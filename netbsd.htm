<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Try to run the NetBSD/x68k</title><link rel="icon" type="image/vnd.microsoft.icon" href="XEiJ.ico"><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="XEiJ.ico"><link rel="stylesheet" type="text/css" href="https://stdkmd.net/stdkmd.css"><script charset="UTF-8" src="https://stdkmd.net/stdkmd.js"></script></head><body><div id="head"><span id="title"><span class="en">Try to run the NetBSD/x68k</span><span class="ja">NetBSD/x68k を動かしてみる</span></span><span id="back">- <a href="https://stdkmd.net/xeij/">XEiJ</a> - <a href="https://stdkmd.net/">STUDIO KAMADA</a></span><span id="langbox"></span></div><div id="body"><h3 id="toc"><span class="en">Table of contents</span><span class="ja">目次</span></h3><ol class="wide"><li><a href="#introduction">前置き</a></li><li><a href="#install">インストール</a><ol><li><a href="#install_download">インストールディスクをダウンロードする</a></li><li><a href="#install_harddisk">ハードディスクのイメージファイルの新規作成</a></li><li><a href="#install_bootiso">インストールディスクから起動する</a></li><li><a href="#install_steps">インストール手順</a></li><li><a href="#install_boothds">NetBSD/x68k を起動する</a></li><li><a href="#install_xwindowsystem">X Window System を動かしてみる</a></li><li><a href="#install_shutdown">終了する</a></li></ol></li></ol><h2><a href="#introduction" id="introduction">1. 前置き</a></h2><p>XEiJ にはイーサネットボードがありません。すなわち XEiJ で NetBSD/x68k を動かしてもネットワークに繋がりません。仮に実装済みの範囲に不具合がなかったとしても、できることは限られています。これは「Human68k よりもエミュレーションの難易度が高い NetBSD/x68k が XEiJ でどこまで動くか試してみた」というだけの話です。</p><h2><a href="#install" id="install">2. インストール</a></h2><p>新規作成した SCSI ハードディスクのイメージファイルに NetBSD/x68k をインストールします。</p><h3><a href="#install_download" id="install_download">2.1. インストールディスクをダウンロードする</a></h3><p><a href="https://archive.netbsd.org/pub/NetBSD-archive/NetBSD-8.1/iso/NetBSD-8.1-x68k.iso" target="_blank">NetBSD-8.1-x68k.iso</a> (289MB) をダウンロードします。</p><h3><a href="#install_harddisk" id="install_harddisk">2.2. ハードディスクのイメージファイルの新規作成</a></h3><p>NetBSD/x68k のインストール先となるハードディスクのイメージファイルを作ります。</p><ol><li>ファイル →SCSI→SCSI ハードディスクのイメージファイルの新規作成</li><li>以下ではファイル名を <code><kbd>NetBSD-8.1.hds</kbd></code> とします。</li><li>容量は 1500MB 以上必要です。以下では 2000MB とします。</li><li>セクタサイズはデフォルトの 512 バイトにします。</li><li>Human68k 用ではないので領域確保を OFF にします。</li><li>フォーマットを開始します。</li></ol><h3><a href="#install_bootiso" id="install_bootiso">2.3. インストールディスクから起動する</a></h3><ol><li>060turbo モードに切り替えます。MPU→ 機種を変更してリセット →060turbo (33.3MHz)</li><li>FC2 ピンをカットします。MPU→FC2 ピンをカットする</li><li>NetBSD-8.1.hds を開きます。ファイル →SCSI→0 接続する、開く、NetBSD-8.1.hds、開く</li><li>NetBSD-8.1-x68k.iso から再起動します。ファイル →SCSI→1 接続する、開く、NetBSD-8.1-x68k.iso、ここから再起動</li></ol><p>コマンドライン</p><pre>&gt;<kbd>java -jar XEiJ.jar -boot=sc1 -cutfc2pin=on -model=060turbo -sc0=NetBSD-8.1.hds -sc1=NetBSD-8.1-x68k.iso</kbd></pre><h3><a href="#install_steps" id="install_steps">2.4. インストール手順</a></h3><p>テキストで表示されるメニューは↑キーと↓キーで選択、Enter キーで確定です。</p><ol><li>NetBSD-8.1 Install System で作業を選択します。</li><li>インストールを開始します。a: Install NetBSD to hard disk</li><li>yes or no? はハードディスクを書き換えることになるが続行するか。b: Yes</li><li>Available disks でインストール先のハードディスクを選択します。a: sd0 (1.0G, XEiJ Hard Disk)</li><li>Choose your installation は既存のパーティションを使うかどうか。a: Set sizes of NetBSD partitions</li><li>パーティションの大きさを決めます。デフォルトのままにしておきます。x: Accept partition sizes. Free space 525 MB, 5 free partitions.</li><li>swap が 128MB、残り全部が / になります。x: Partition sizes ok</li><li>Please enter a name for your NetBSD disk [Hard Disk ]: でインストール先のハードディスクに名前を付けるようです。<code><kbd>NetBSD-8.1</kbd></code></li><li>yes or no? はインストール先のハードディスクに書き込んでよいかどうかの最終確認です。b: Yes</li><li>ファイルシステムが構築されます。</li><li>Hit enter to continue と表示されたら Enter キーを押します。</li><li>Select your distribution でインストール範囲を指示します。全部入れます。a: Full installation</li><li>Install from でインストール元を選択します。a: CD-ROM / DVD</li><li>Enter the CDROM device to be used ... が追加されたようです。x: Continue</li><li>インストールが始まります。手元の環境で 1 時間くらいかかりました。</li><li>Hit enter to continue と表示されたら Enter キーを押します。</li><li>Configure the additional items as needed. でオプションを選択します。そのままにしておきます。x: Finished configuring</li><li>Hit enter to continue と表示されたら Enter キーを押します。</li><li>NetBSD-8.1 Install System に戻ります。</li><li>NetBSD-8.1-x68k.iso をイジェクトします。ファイル →SCSI→1 イジェクトする</li><li>起動デバイスを SCSI 0 にします。設定 → 起動デバイス →SCSI→SCSI 0</li><li>再起動します。d: Reboot the computer</li><li>FD の挿入を促す絵が出るときはもう一度 MPU→ リセット</li></ol><h3><a href="#install_boothds" id="install_boothds">2.5. NetBSD/x68k を起動する</a></h3><p>060turbo モードで NetBSD-8.1.hds から起動します。</p><p>コマンドライン</p><pre>&gt;<kbd>java -jar XEiJ.jar -boot=NetBSD-8.1.hds -cutfc2pin=on -model=060turbo</kbd></pre><p>初回は Updating fontconfig cache: のところで待たされます。手元の環境で 10 分くらいかかりました。</p><p>ログインプロンプトが出たら root でログインします。</p><pre>login: <kbd>root</kbd></pre><h3><a href="#install_xwindowsystem" id="install_xwindowsystem">2.6. X Window System を動かしてみる</a></h3><p>初回はデフォルトの設定をコピーします。</p><pre># <kbd>cp /etc/X11/xinit/xinitrc ~/.xinitrc</kbd></pre><p>X Window System を起動します。</p><pre># <kbd>xinit</kbd></pre><p>マウスカーソルが表示されたら F12 キーを押すかホイールクリックで <a href="feature.htm#exclusivemouse">エクスクルーシブマウスモード</a> に切り替えて操作します。</p><div style="text-align:center"><img alt="netbsd2.png" src="netbsd2.png"></div><h3><a href="#install_shutdown" id="install_shutdown">2.7. 終了する</a></h3><p>NetBSD/x68k を終了するときは shutdown -h now を実行します。</p><pre># <kbd>shutdown -h now</kbd></pre><p>System halted. Hit any key to reboot. と表示されるまで待ってからエミュレータを終了します。</p></div><div id="foot"><a href="https://stdkmd.net/">STUDIO KAMADA</a><br>Copyright &copy; 1999-2025 Makoto Kamada<div></div></div></body></html>