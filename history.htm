<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Past changes</title><link rel="icon" type="image/vnd.microsoft.icon" href="XEiJ.ico"><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="XEiJ.ico"><link rel="stylesheet" type="text/css" href="https://stdkmd.net/stdkmd.css"><script charset="UTF-8" src="https://stdkmd.net/stdkmd.js"></script></head><body><div id="head"><span id="title"><span class="en">Past changes</span><span class="ja">過去の更新</span></span><span id="back">- <a href="https://stdkmd.net/xeij/">XEiJ</a> - <a href="https://stdkmd.net/">STUDIO KAMADA</a></span><span id="langbox"></span></div><div id="body"><h3 id="toc"><span class="en">Table of contents</span><span class="ja">目次</span></h3><ol class="wide"><li><a href="#pastchanges"><span class="en">
Past changes
</span><span class="ja">
過去の更新
</span></a><ul><li><a href="#changes_0250308">0.25.03.08</a></li><li><a href="#changes_0250208">0.25.02.08</a></li><li><a href="#changes_0250108">0.25.01.08</a></li><li><a href="#changes_0241208">0.24.12.08</a></li><li><a href="#changes_0241108">0.24.11.08</a></li><li><a href="#changes_0241008">0.24.10.08</a></li><li><a href="#changes_0240908">0.24.09.08</a></li><li><a href="#changes_0240808">0.24.08.08</a></li><li><a href="#changes_0240708">0.24.07.08</a></li><li><a href="#changes_0240608">0.24.06.08</a></li><li><a href="#changes_0240508">0.24.05.08</a></li><li><a href="#changes_0240408">0.24.04.08</a></li><li><a href="#changes_0240308">0.24.03.08</a></li><li><a href="#changes_0240208">0.24.02.08</a></li><li><a href="#changes_0231208">0.23.12.08</a></li><li><a href="#changes_0231108">0.23.11.08</a></li><li><a href="#changes_0231008">0.23.10.08</a></li><li><a href="#changes_0230808">0.23.08.08</a></li><li><a href="#changes_0230514">0.23.05.14</a></li><li><a href="#changes_0230503">0.23.05.03</a></li><li><a href="#changes_0230501">0.23.05.01</a></li><li><a href="#changes_0230410">0.23.04.10</a></li><li><a href="#changes_0230311">0.23.03.11</a></li><li><a href="#changes_0230121">0.23.01.21</a></li><li><a href="#changes_0230119">0.23.01.19</a></li><li><a href="#changes_0230101">0.23.01.01</a></li><li><a href="#changes_0221018">0.22.10.18</a></li><li><a href="#changes_0220901">0.22.09.01</a></li><li><a href="#changes_0220825">0.22.08.25</a></li><li><a href="#changes_0220608">0.22.06.08</a></li><li><a href="#changes_0220221">0.22.02.21</a></li><li><a href="#changes_0220210">0.22.02.10</a></li><li><a href="#changes_0220206">0.22.02.06</a></li><li><a href="#changes_0220203">0.22.02.03</a></li><li><a href="#changes_0220201">0.22.02.01</a></li><li><a href="#changes_0220130">0.22.01.30</a></li><li><a href="#changes_0210111">0.21.01.11</a></li><li><a href="#changes_0210103">0.21.01.03</a></li><li><a href="#changes_0201231">0.20.12.31</a></li><li><a href="#changes_0191215">0.19.12.15</a></li><li><a href="#changes_0190124">0.19.01.24</a></li><li><a href="#changes_0170617">0.17.06.17</a></li><li><a href="#changes_0170130">0.17.01.30</a></li><li><a href="#changes_0170128">0.17.01.28</a></li><li><a href="#changes_0170124">0.17.01.24</a></li><li><a href="#changes_0161117">0.16.11.17</a></li><li><a href="#changes_0160817">0.16.08.17</a></li><li><a href="#changes_0160717">0.16.07.17</a></li><li><a href="#changes_0160512">0.16.05.12</a></li><li><a href="#changes_0160507">0.16.05.07</a></li><li><a href="#changes_0160430">0.16.04.30</a></li><li><a href="#changes_0160426">0.16.04.26</a></li><li><a href="#changes_0160422">0.16.04.22</a></li><li><a href="#changes_0160421">0.16.04.21</a></li><li><a href="#changes_0160412">0.16.04.12</a></li><li><a href="#changes_0150831">0.15.08.31</a></li><li><a href="#changes_0150812">0.15.08.12</a></li><li><a href="#changes_0150809">0.15.08.09</a></li><li><a href="#changes_0150719">0.15.07.19</a></li><li><a href="#changes_0150715">0.15.07.15</a></li><li><a href="#changes_0150701">0.15.07.01</a></li><li><a href="#changes_0150608">0.15.06.08</a></li><li><a href="#changes_0150422">0.15.04.22</a></li><li><a href="#changes_0150415">0.15.04.15</a></li><li><a href="#changes_0150330">0.15.03.30</a></li><li><a href="#changes_0150129">0.15.01.29</a></li><li><a href="#changes_0150125">0.15.01.25</a></li><li><a href="#changes_0141226">0.14.12.26</a></li><li><a href="#changes_0141123">0.14.11.23</a></li><li><a href="#changes_0141111">0.14.11.11</a></li><li><a href="#changes_0141107">0.14.11.07</a></li><li><a href="#changes_0141103">0.14.11.03</a></li><li><a href="#changes_0141029">0.14.10.29</a></li><li><a href="#changes_0141021">0.14.10.21</a></li><li><a href="#changes_0141020">0.14.10.20</a></li><li><a href="#changes_0141018">0.14.10.18</a></li><li><a href="#changes_0141015">0.14.10.15</a></li><li><a href="#changes_0141014">0.14.10.14</a></li><li><a href="#changes_0140923">0.14.09.23</a></li><li><a href="#changes_0140922">0.14.09.22</a></li><li><a href="#changes_0140908">0.14.09.08</a></li><li><a href="#changes_0140904">0.14.09.04</a></li><li><a href="#changes_0140829">0.14.08.29</a></li><li><a href="#changes_0140822">0.14.08.22</a></li><li><a href="#changes_0140821">0.14.08.21</a></li><li><a href="#changes_0140820">0.14.08.20</a></li><li><a href="#changes_0140819">0.14.08.19</a></li><li><a href="#changes_0140717">0.14.07.17</a></li><li><a href="#changes_0140506">0.14.05.06</a></li><li><a href="#changes_0140505">0.14.05.05</a></li><li><a href="#changes_0140501">0.14.05.01</a></li><li><a href="#changes_0140430">0.14.04.30</a></li><li><a href="#changes_0140429">0.14.04.29</a></li><li><a href="#changes_0140428">0.14.04.28</a></li><li><a href="#changes_0140427">0.14.04.27</a></li><li><a href="#changes_0140426">0.14.04.26</a></li><li><a href="#changes_0140423">0.14.04.23</a></li><li><a href="#changes_0140421">0.14.04.21</a></li><li><a href="#changes_0140419">0.14.04.19</a></li></ul></li></ol><p><span class="en"> <a href="index.htm#changes">Back to recent changes</a> </span><span class="ja"> <a href="index.htm#changes">最近の更新に戻る</a> </span></p><h2><a href="#pastchanges" id="pastchanges">1. <span class="en"> Past changes </span><span class="ja"> 過去の更新 </span></a></h2><h3><a href="#changes_0250308" id="changes_0250308">0.25.03.08</a></h3><h4><span class="en">Data break point</span> <span class="ja">データブレークポイント</span></h4><p><span class="en">Added read and write conditions to data break points.</span> <span class="ja">データブレークポイントにリードとライトの条件を追加しました。</span></p><p><span class="en">Fixed a bug in the process of resetting the overhead to zero on pages where data break points no longer exist due to data break points being disabled.</span> <span class="ja">データブレークポイントが無効化されたことでデータブレークポイントが存在しなくなったページのオーバーヘッドをゼロに戻す処理のバグを修正しました。</span></p><h4><span class="en">4096 patterns</span> <span class="ja">4096 個のパターン</span></h4><p><span class="en">Added <a href="feature.htm#_4096patterns">4096 patterns</a>.</span> <span class="ja"><a href="feature.htm#_4096patterns">4096 個のパターン</a>を追加しました。</span></p><p><span class="en">If the <a href="menu.htm#_4096patterns">4096 patterns checkbox</a> in the <a href="menu.htm#modification">modification menu</a> is checked and reset, 4096 patterns can be defined.</span> <span class="ja"><a href="menu.htm#modification">改造メニュー</a>の<a href="menu.htm#_4096patterns">4096 個のパターンチェックボックス</a>を ON にしてリセットすると、4096 個のパターンを定義できるようになります。</span></p><p><span class="en">This setting is stored in the <a href="parameter.htm#sprbank">parameter sprbank</a>.</span> <span class="ja">この設定は<a href="parameter.htm#sprbank">パラメータ sprbank</a>に保存されます。</span></p><h5><span class="en">Text area shift</span> <span class="ja">テキストエリアの移動</span></h5><p><span class="en">Shift the text area from $00EBC000-$00EBFFFF to $00EB4000-$00EB7FFF so that you can define 256 patterns even if you use 2 planes of text area.</span> <span class="ja">テキストエリアを $00EBC000～$00EBFFFF から $00EB4000～$00EB7FFF へ移動させて、テキストエリアを 2 面使っていてもパターンを 256 個定義できるようにします。</span></p><table><caption><span class="en">Memory map of sprite screen</span><span class="ja">スプライト画面のメモリマップ</span></caption><thead><tr><th rowspan="2"><span class="en">Address</span><span class="ja">アドレス</span></th><th colspan="4" style="border-left-style:solid"><span class="en">Before text area shift</span><span class="ja">テキストエリアの移動前</span></th><th colspan="2" style="border-left-style:solid"><span class="en">After text area shift</span><span class="ja">テキストエリアの移動後</span></th></tr><tr><th colspan="3" style="border-left-style:solid">256x256/512x512</th><th style="border-left-style:solid">768x512</th><th style="border-left-style:solid">256x256/512x512</th><th style="border-left-style:solid">768x512</th></tr></thead><tbody><tr><td>$00EB0000<br>:<br>$00EB03FF</td><td colspan="3" style="border-left-style:solid"><span class="en">Sprite 0 to 127</span><span class="ja">スプライト 0～127</span></td><td rowspan="2" style="border-left-style:solid"><span class="en">Bus error</span><span class="ja">バスエラー</span></td><td style="border-left-style:solid"><span class="en">Sprite 0 to 127</span><span class="ja">スプライト 0～127</span></td><td rowspan="2" style="border-left-style:solid"><span class="en">Bus error</span><span class="ja">バスエラー</span></td></tr><tr><td>$00EB0400<br>:<br>$00EB07FF</td><td colspan="3" style="border-left-style:solid"><span class="en">Sprite 128 to 255 (extended)</span><span class="ja">スプライト 128～255(拡張)</span></td><td style="border-left-style:solid"><span class="en">Sprite 128 to 255 (extended)</span><span class="ja">スプライト 128～255(拡張)</span></td></tr><tr><td>$00EB0800<br>:<br>$00EB0815</td><td colspan="6" style="border-left-style:solid"><span class="en">Control registers</span><span class="ja">制御レジスタ</span></td></tr><tr><td>$00EB0816<br>:<br>$00EB3FFF</td><td colspan="6" style="border-left-style:solid"><span class="en">Unused</span><span class="ja">未使用</span></td></tr><tr><td>$00EB4000<br>:<br>$00EB5FFF</td><td rowspan="2" colspan="4" style="border-left-style:solid"><span class="en">Unused</span><span class="ja">未使用</span></td><td style="border-left-style:solid"><span class="en">Text area 0</span><span class="ja">テキストエリア 0</span></td><td rowspan="5" style="border-left-style:solid"><span class="en">Bus error</span><span class="ja">バスエラー</span></td></tr><tr><td>$00EB6000<br>:<br>$00EB7FFF</td><td style="border-left-style:solid"><span class="en">Text area 0</span><span class="ja">テキストエリア 1</span></td></tr><tr><td>$00EB8000<br>:<br>$00EBBFFF</td><td colspan="3" style="border-left-style:solid"><span class="en">Pattern 0 to 127</span><span class="ja">パターン 0～127</span></td><td rowspan="3" style="border-left-style:solid"><span class="en">Bus error</span><span class="ja">バスエラー</span></td><td rowspan="3" style="border-left-style:solid"><span class="en">Pattern 0 to 255</span><span class="ja">パターン 0～255</span></td></tr><tr><td>$00EBC000<br>:<br>$00EBDFFF</td><td colspan="2" style="border-left-style:solid"><span class="en">Pattern 128 to 191</span><span class="ja">パターン 128～191</span></td><td style="border-left-style:solid"><span class="en">Text area 0</span><span class="ja">テキストエリア 0</span></td></tr><tr><td>$00EBE000<br>:<br>$00EBFFFF</td><td style="border-left-style:solid"><span class="en">Pattern 192 to 255</span><span class="ja">パターン 192～255</span></td><td style="border-left-style:solid"><span class="en">Text area 1</span><span class="ja">テキストエリア 1</span></td><td style="border-left-style:solid"><span class="en">Text area 1</span><span class="ja">テキストエリア 1</span></td></tr></tbody></table><h5><span class="en">Referencing patterns from sprite and text areas</span> <span class="ja">スプライトエリアとテキストエリアからのパターンの参照</span></h5><p><span class="en">Increase the number of patterns that can be referenced from 256 to 1024 or 4096 by changing the sprite and text areas as follows</span><p>スプライトエリアとテキストエリアを以下のように変更することで、参照できるパターンの数を 256 個から 1024 個または 4096 個に増やします。</p></p><table><caption><span class="en">Sprite area (256 patterns)</span><span class="ja">スプライトエリア (256 個のパターン)</span></caption><tbody><tr><td></td><th style="border-left-style:solid">15</th><th style="border-left-style:solid">14</th><th style="border-left-style:solid">13</th><th style="border-left-style:solid">12</th><th style="border-left-style:solid">11</th><th style="border-left-style:solid">10</th><th style="border-left-style:solid">9</th><th style="border-left-style:solid">8</th><th style="border-left-style:solid">7</th><th style="border-left-style:solid">6</th><th style="border-left-style:solid">5</th><th style="border-left-style:solid">4</th><th style="border-left-style:solid">3</th><th style="border-left-style:solid">2</th><th style="border-left-style:solid">1</th><th style="border-left-style:solid">0</th></tr><tr><th>+0</th><td rowspan="2" colspan="6" style="border-left-style:solid"></td><td colspan="10" style="border-left-style:solid">X 座標</td></tr><tr><th>+2</th><td colspan="10" style="border-left-style:solid">Y 座標</td></tr><tr><th>+4</th><td style="border-left-style:solid"><span class="en">Up/Down</span><span class="ja">上下</span></td><td style="border-left-style:solid"><span class="en">Left/Right</span><span class="ja">左右</span></td><td colspan="2" style="border-left-style:solid"></td><td colspan="4" style="border-left-style:solid"><span class="en">Palette block</span><span class="ja">パレットブロック</span></td><td colspan="8" style="border-left-style:solid"><span class="en">Pattern number</span><span class="ja">パターン番号</span></td></tr><tr><th>+6</th><td colspan="14" style="border-left-style:solid"></td><td colspan="2" style="border-left-style:solid"><span class="en">Priority</span><span class="ja">プライオリティ</span></td></tr><tr><td colspan="17">:</td></tr></tbody></table><table><caption><span class="en">Sprite area (1024 patterns)</span><span class="ja">スプライトエリア (1024 個のパターン)</span></caption><tbody><tr><td></td><th style="border-left-style:solid">15</th><th style="border-left-style:solid">14</th><th style="border-left-style:solid">13</th><th style="border-left-style:solid">12</th><th style="border-left-style:solid">11</th><th style="border-left-style:solid">10</th><th style="border-left-style:solid">9</th><th style="border-left-style:solid">8</th><th style="border-left-style:solid">7</th><th style="border-left-style:solid">6</th><th style="border-left-style:solid">5</th><th style="border-left-style:solid">4</th><th style="border-left-style:solid">3</th><th style="border-left-style:solid">2</th><th style="border-left-style:solid">1</th><th style="border-left-style:solid">0</th></tr><tr><th>+0</th><td rowspan="2" colspan="6" style="border-left-style:solid"></td><td colspan="10" style="border-left-style:solid">X 座標</td></tr><tr><th>+2</th><td colspan="10" style="border-left-style:solid">Y 座標</td></tr><tr><th>+4</th><td style="border-left-style:solid"><span class="en">Up/Down</span><span class="ja">上下</span></td><td style="border-left-style:solid"><span class="en">Left/Right</span><span class="ja">左右</span></td><td colspan="2" style="border-left-style:solid"><span class="en">Bank number</span><span class="ja">バンク番号</span></td><td colspan="4" style="border-left-style:solid"><span class="en">Palette block</span><span class="ja">パレットブロック</span></td><td colspan="8" style="border-left-style:solid"><span class="en">Pattern number</span><span class="ja">パターン番号</span></td></tr><tr><th>+6</th><td colspan="14" style="border-left-style:solid"></td><td colspan="2" style="border-left-style:solid"><span class="en">Priority</span><span class="ja">プライオリティ</span></td></tr><tr><td colspan="17">:</td></tr></tbody></table><table><caption><span class="en">Sprite area (4096 patterns without inversion)</span><span class="ja">スプライトエリア (4096 個のパターン、反転なし)</span></caption><tbody><tr><td></td><th style="border-left-style:solid">15</th><th style="border-left-style:solid">14</th><th style="border-left-style:solid">13</th><th style="border-left-style:solid">12</th><th style="border-left-style:solid">11</th><th style="border-left-style:solid">10</th><th style="border-left-style:solid">9</th><th style="border-left-style:solid">8</th><th style="border-left-style:solid">7</th><th style="border-left-style:solid">6</th><th style="border-left-style:solid">5</th><th style="border-left-style:solid">4</th><th style="border-left-style:solid">3</th><th style="border-left-style:solid">2</th><th style="border-left-style:solid">1</th><th style="border-left-style:solid">0</th></tr><tr><th>+0</th><td rowspan="2" colspan="6" style="border-left-style:solid"></td><td colspan="10" style="border-left-style:solid">X 座標</td></tr><tr><th>+2</th><td colspan="10" style="border-left-style:solid">Y 座標</td></tr><tr><th>+4</th><td colspan="4" style="border-left-style:solid"><span class="en">Bank number</span><span class="ja">バンク番号</span></td><td colspan="4" style="border-left-style:solid"><span class="en">Palette block</span><span class="ja">パレットブロック</span></td><td colspan="8" style="border-left-style:solid"><span class="en">Pattern number</span><span class="ja">パターン番号</span></td></tr><tr><th>+6</th><td colspan="14" style="border-left-style:solid"></td><td colspan="2" style="border-left-style:solid"><span class="en">Priority</span><span class="ja">プライオリティ</span></td></tr><tr><td colspan="17">:</td></tr></tbody></table><table><caption><span class="en">Sprite area (4096 patterns with inversion)</span><span class="ja">スプライトエリア (4096 個のパターン、反転あり)</span></caption><tbody><tr><td></td><th style="border-left-style:solid">15</th><th style="border-left-style:solid">14</th><th style="border-left-style:solid">13</th><th style="border-left-style:solid">12</th><th style="border-left-style:solid">11</th><th style="border-left-style:solid">10</th><th style="border-left-style:solid">9</th><th style="border-left-style:solid">8</th><th style="border-left-style:solid">7</th><th style="border-left-style:solid">6</th><th style="border-left-style:solid">5</th><th style="border-left-style:solid">4</th><th style="border-left-style:solid">3</th><th style="border-left-style:solid">2</th><th style="border-left-style:solid">1</th><th style="border-left-style:solid">0</th></tr><tr><th>+0</th><td rowspan="2" colspan="6" style="border-left-style:solid"></td><td colspan="10" style="border-left-style:solid">X 座標</td></tr><tr><th>+2</th><td colspan="10" style="border-left-style:solid">Y 座標</td></tr><tr><th>+4</th><td colspan="4" style="border-left-style:solid"><span class="en">Bank number</span><span class="ja">バンク番号</span></td><td colspan="4" style="border-left-style:solid"><span class="en">Palette block</span><span class="ja">パレットブロック</span></td><td colspan="8" style="border-left-style:solid"><span class="en">Pattern number</span><span class="ja">パターン番号</span></td></tr><tr><th>+6</th><td style="border-left-style:solid"><span class="en">Up/Down</span><span class="ja">上下</span></td><td style="border-left-style:solid"><span class="en">Left/Right</span><span class="ja">左右</span></td><td colspan="12" style="border-left-style:solid"></td><td colspan="2" style="border-left-style:solid"><span class="en">Priority</span><span class="ja">プライオリティ</span></td></tr><tr><td colspan="17">:</td></tr></tbody></table><table><caption><span class="en">Text area (256 patterns)</span><span class="ja">テキストエリア (256 個のパターン)</span></caption><thead><tr><th>15</th><th style="border-left-style:solid">14</th><th style="border-left-style:solid">13</th><th style="border-left-style:solid">12</th><th style="border-left-style:solid">11</th><th style="border-left-style:solid">10</th><th style="border-left-style:solid">9</th><th style="border-left-style:solid">8</th><th style="border-left-style:solid">7</th><th style="border-left-style:solid">6</th><th style="border-left-style:solid">5</th><th style="border-left-style:solid">4</th><th style="border-left-style:solid">3</th><th style="border-left-style:solid">2</th><th style="border-left-style:solid">1</th><th style="border-left-style:solid">0</th></tr></thead><tbody><tr><td><span class="en">Up/Down</span><span class="ja">上下</span></td><td style="border-left-style:solid"><span class="en">Left/Right</span><span class="ja">左右</span></td><td colspan="2" style="border-left-style:solid"></td><td colspan="4" style="border-left-style:solid"><span class="en">Palette block</span><span class="ja">パレットブロック</span></td><td colspan="8" style="border-left-style:solid"><span class="en">Pattern number</span><span class="ja">パターン番号</span></td></tr><tr><td colspan="16">:</td></tr></tbody></table><table><caption><span class="en">Text area (1024 patterns)</span><span class="ja">テキストエリア (1024 個のパターン)</span></caption><thead><tr><th>15</th><th style="border-left-style:solid">14</th><th style="border-left-style:solid">13</th><th style="border-left-style:solid">12</th><th style="border-left-style:solid">11</th><th style="border-left-style:solid">10</th><th style="border-left-style:solid">9</th><th style="border-left-style:solid">8</th><th style="border-left-style:solid">7</th><th style="border-left-style:solid">6</th><th style="border-left-style:solid">5</th><th style="border-left-style:solid">4</th><th style="border-left-style:solid">3</th><th style="border-left-style:solid">2</th><th style="border-left-style:solid">1</th><th style="border-left-style:solid">0</th></tr></thead><tbody><tr><td><span class="en">Up/Down</span><span class="ja">上下</span></td><td style="border-left-style:solid"><span class="en">Left/Right</span><span class="ja">左右</span></td><td colspan="2" style="border-left-style:solid"><span class="en">Bank number</span><span class="ja">バンク番号</span></td><td colspan="4" style="border-left-style:solid"><span class="en">Palette block</span><span class="ja">パレットブロック</span></td><td colspan="8" style="border-left-style:solid"><span class="en">Pattern number</span><span class="ja">パターン番号</span></td></tr><tr><td colspan="16">:</td></tr></tbody></table><table><caption><span class="en">Text area (4096 patterns)</span><span class="ja">テキストエリア (4096 個のパターン)</span></caption><thead><tr><th>15</th><th style="border-left-style:solid">14</th><th style="border-left-style:solid">13</th><th style="border-left-style:solid">12</th><th style="border-left-style:solid">11</th><th style="border-left-style:solid">10</th><th style="border-left-style:solid">9</th><th style="border-left-style:solid">8</th><th style="border-left-style:solid">7</th><th style="border-left-style:solid">6</th><th style="border-left-style:solid">5</th><th style="border-left-style:solid">4</th><th style="border-left-style:solid">3</th><th style="border-left-style:solid">2</th><th style="border-left-style:solid">1</th><th style="border-left-style:solid">0</th></tr></thead><tbody><tr><td colspan="4"><span class="en">Bank number</span><span class="ja">バンク番号</span></td><td colspan="4" style="border-left-style:solid"><span class="en">Palette block</span><span class="ja">パレットブロック</span></td><td colspan="8" style="border-left-style:solid"><span class="en">Pattern number</span><span class="ja">パターン番号</span></td></tr><tr><td colspan="16">:</td></tr></tbody></table><p><span class="en">When the number of patterns is increased to 4096, the up/down and left/right inversions are eliminated. However, if there is no need to save patterns, it is considered sufficient to define inverted patterns as needed.</span> <span class="ja">4096 個にしたとき上下左右の反転がなくなりますが、パターンを節約する必要がなければ、必要に応じて反転したパターンを定義すればよいと考えられます。</span></p><p><span class="en">Replacing the inversion instructions with a bank selection allows you to define the result of the inversion. For example, shadows of patterns that used to be done by inversion can be adjusted simply by changing the definition process.</span> <span class="ja">反転の指示をバンク選択に置き換えることで、反転の結果を定義できるようになります。例えば、反転で済ませていたパターンの影の調整が、定義の処理の変更だけで行えます。</span></p><h5><span class="en">Expansion of pattern area</span> <span class="ja">パターンエリアの拡張</span></h5><p><span class="en">The pattern area ($00EB8000-$00EBFFFF) is expanded 16 times using bank switching, increasing the number of patterns that can be defined from 256 to 4096.</span> <span class="ja">パターンエリア ($00EB8000～$00EBFFFF) をバンク切り替えを用いて 16 倍に拡張することで、定義できるパターンの数を 256 個から 4096 個に増やします。</span></p><p><span class="en">The weakness of bank switching is random access, but since a pattern is 16 or 64 words, even if writes increase by one word per pattern, the impact is expected to be limited.</span> <span class="ja">バンク切り替えの弱点はランダムアクセスですが、1 パターンが 16 または 64 ワードなので、書き込みが 1 パターンあたり 1 ワード増えたとしても影響は限定的と考えられます。</span></p><h5><span class="en">Adding registers</span> <span class="ja">レジスタの追加</span></h5><p><span class="en">Added bank control register ($00EB0812) and bank select register ($00EB0814).</span> <span class="ja">バンク制御レジスタ ($00EB0812) とバンク選択レジスタ ($00EB0814) を追加します。</span></p><table><caption><span class="en">Bank control register ($00EB0812)</span><span class="ja">バンク制御レジスタ ($00EB0812)</span></caption><thead><tr><th>15</th><th style="border-left-style:solid">14</th><th style="border-left-style:solid">13</th><th style="border-left-style:solid">12</th><th style="border-left-style:solid">11</th><th style="border-left-style:solid">10</th><th style="border-left-style:solid">9</th><th style="border-left-style:solid">8</th><th style="border-left-style:solid">7</th><th style="border-left-style:solid">6</th><th style="border-left-style:solid">5</th><th style="border-left-style:solid">4</th><th style="border-left-style:solid">3</th><th style="border-left-style:solid">2</th><th style="border-left-style:solid">1</th><th style="border-left-style:solid">0</th></tr></thead><tbody><tr><td colspan="13"></td><td colspan="2" style="border-left-style:solid"><span class="en">Mode</span><span class="ja">モード</span></td><td style="border-left-style:solid"><span class="en">Shift</span><span class="ja">移動</span></td></tr></tbody></table><table><caption><span class="en">Mode</span><span class="ja">モード</span></caption><thead><tr><th><span class="en">Mode</span><span class="ja">モード</span></th><th style="border-left-style:solid"><span class="en">Number of patterns</span><span class="ja">パターンの数</span></th><th style="border-left-style:solid"><span class="en">Sprite inversion</span><span class="ja">スプライトの反転</span></th><th style="border-left-style:solid"><span class="en">Text inversion</span><span class="ja">テキストの反転</span></th></tr></thead><tbody><tr><td>0</td><td style="border-left-style:solid">256</td><td rowspan="2" colspan="2" style="border-left-style:solid"><span class="en">Available</span><span class="ja">できる</span></td></tr><tr><td>1</td><td style="border-left-style:solid">1024</td></tr><tr><td>2</td><td rowspan="2" style="border-left-style:solid">4096</td><td colspan="2" style="border-left-style:solid"><span class="en">Not available</span><span class="ja">できない</span></td></tr><tr><td>3</td><td style="border-left-style:solid"><span class="en">Available</span><span class="ja">できる</span></td><td style="border-left-style:solid"><span class="en">Not available</span><span class="ja">できない</span></td></tr></tbody></table><table><caption><span class="en">Shift</span><span class="ja">移動</span></caption><thead><tr><th><span class="en">Shift</span><span class="ja">移動</span></th><th style="border-left-style:solid"><span class="en">Text area shift</span><span class="ja">テキストエリアの移動</span></th><th style="border-left-style:solid"><span class="en">Range of the text area</span><span class="ja">テキストエリアの範囲</span></th></tr></thead><tbody><tr><td>0</td><td style="border-left-style:solid"><span class="en">Not do</span><span class="ja">しない</span></td><td style="border-left-style:solid"><span class="en">$00EBC000-$00EBFFFF</span><span class="ja">$00EBC000～$00EBFFFF</span></td></tr><tr><td>1</td><td style="border-left-style:solid"><span class="en">Do</span><span class="ja">する</span></td><td style="border-left-style:solid"><span class="en">$00EB4000-$00E7FFFF</span><span class="ja">$00EB4000～$00EB7FFF</span></td></tr></tbody></table><table><caption><span class="en">Bank select register ($00EB0814)</span><span class="ja">バンク選択レジスタ ($00EB0814)</span></caption><thead><tr><th>15</th><th style="border-left-style:solid">14</th><th style="border-left-style:solid">13</th><th style="border-left-style:solid">12</th><th style="border-left-style:solid">11</th><th style="border-left-style:solid">10</th><th style="border-left-style:solid">9</th><th style="border-left-style:solid">8</th><th style="border-left-style:solid">7</th><th style="border-left-style:solid">6</th><th style="border-left-style:solid">5</th><th style="border-left-style:solid">4</th><th style="border-left-style:solid">3</th><th style="border-left-style:solid">2</th><th style="border-left-style:solid">1</th><th style="border-left-style:solid">0</th></tr></thead><tbody><tr><td colspan="4"></td><td colspan="4" style="border-left-style:solid"><span class="en">Bank number</span><span class="ja">バンク番号</span></td><td colspan="8" style="border-left-style:solid"></td></tr></tbody></table><table><caption><span class="en">Bank number</span><span class="ja">バンク番号</span></caption><thead><tr><th><span class="en">Bank number</span><span class="ja">バンク番号</span></th><th style="border-left-style:solid"><span class="en">Range of pattern numbers accessible in $00EB8000-$00EBFFFF</span><span class="ja">$00EB8000～$00EBFFFF でアクセスできるパターン番号の範囲</span></th></tr></thead><tbody><tr><td>0</td><td style="border-left-style:solid"><span class="en">0 to 255†</span><span class="ja">0～255†</span></td></tr><tr><td>1</td><td style="border-left-style:solid"><span class="en">256 to 511</span><span class="ja">256～511</span></td></tr><tr><td>2</td><td style="border-left-style:solid"><span class="en">512 to 767</span><span class="ja">512～767</span></td></tr><tr><td>3</td><td style="border-left-style:solid"><span class="en">768 to 1023</span><span class="ja">768～1023</span></td></tr><tr><td>4</td><td style="border-left-style:solid"><span class="en">1024 to 1279</span><span class="ja">1024～1279</span></td></tr><tr><td>5</td><td style="border-left-style:solid"><span class="en">1280 to 1535</span><span class="ja">1280～1535</span></td></tr><tr><td>6</td><td style="border-left-style:solid"><span class="en">1536 to 1791</span><span class="ja">1536～1791</span></td></tr><tr><td>7</td><td style="border-left-style:solid"><span class="en">1792 to 2047</span><span class="ja">1792～2047</span></td></tr><tr><td>8</td><td style="border-left-style:solid"><span class="en">2048 to 2303</span><span class="ja">2048～2303</span></td></tr><tr><td>9</td><td style="border-left-style:solid"><span class="en">2304 to 2559</span><span class="ja">2304～2559</span></td></tr><tr><td>10</td><td style="border-left-style:solid"><span class="en">2560 to 2815</span><span class="ja">2560～2815</span></td></tr><tr><td>11</td><td style="border-left-style:solid"><span class="en">2816 to 3071</span><span class="ja">2816～3071</span></td></tr><tr><td>12</td><td style="border-left-style:solid"><span class="en">3072 to 3327</span><span class="ja">3072～3327</span></td></tr><tr><td>13</td><td style="border-left-style:solid"><span class="en">3328 to 3583</span><span class="ja">3328～3583</span></td></tr><tr><td>14</td><td style="border-left-style:solid"><span class="en">3584 to 3839</span><span class="ja">3584～3839</span></td></tr><tr><td>15</td><td style="border-left-style:solid"><span class="en">3840 to 4095</span><span class="ja">3840～4095</span></td></tr></tbody></table><p><span class="en">†The number of patterns that can be accessed in bank 0 is 256, but if one plane is used without text area shift, the number is reduced to 192, and if two planes are used, the number is reduced to 128.</span> <span class="ja">†バンク 0 でアクセスできるパターンは 256 個ですが、テキストエリアを移動せず 1 面使うと 192 個に、同じく 2 面使うと 128 個に減ります。</span></p><p><span class="en">Pattern numbers from 0 to 4095 can be written to the bank select register without shifting.</span> <span class="ja">0～4095 のパターン番号をシフトせずにバンク選択レジスタへ書き込めます。</span></p><p><span class="en">To prevent later programs from malfunctioning, set both back to 0 when you are finished using them.</span> <span class="ja">後のプログラムが誤動作しないように、どちらも使い終わったら 0 に戻してください。</span></p><h5><span class="en">Pseudo graphic screen</span> <span class="ja">疑似グラフィック画面</span></h5><p><span class="en">By laying each of the 4096 patterns in the background one by one, it can be used as a third 1024x1024 dot 16-color graphic screen.</span> <span class="ja">バックグラウンドに 4096 個のパターンを 1 個ずつ敷き詰めることで、3 枚目の 1024x1024 ドット 16 色のグラフィック画面として使うことができます。</span></p><h5><span class="en">Supplemental information on text area</span> <span class="ja">テキストエリアに関する補足</span></h5><p><span class="en">The text area before shift and the second half of bank 0 in the pattern area have the same address but different entities. Data written to the text area before shift is written to both the text area and the second half of bank 0. Data read from the text area before shift is read from the second half of bank 0. Data written to the text area after shift cannot be read from the text area before shift because it has not been written to the second half of bank 0.</span> <span class="ja">移動前のテキストエリアと、パターンエリアのバンク 0 の後半は、アドレスが同じですが実体が違います。移動前のテキストエリアへ書き込んだデータは、テキストエリアと、バンク 0 の後半の両方へ書き込まれます。移動前のテキストエリアから読み出したデータは、バンク 0 の後半から読み出されます。移動後のテキストエリアへ書き込んだデータは、バンク 0 の後半へ書き込まれていないので、移動前のテキストエリアから読み出せません。</span></p><p><span class="en">When bank 1 or higher is selected, the text area before shift will not be visible.</span> <span class="ja">バンク 1 以上を選択すると、移動前のテキストエリアは見えなくなります。</span></p><h5><span class="en">Other</span> <span class="ja">その他</span></h5><p><span class="en">Standard IOCS calls do not support 4096 patterns.</span> <span class="ja">標準の IOCS コールは 4096 個のパターンに対応していません。</span></p><h4>pat4096test.x</h4><p><span class="en">Added <a href="miscfiles.htm#pat4096testx">pat4096test.x.</a></span> <span class="ja"><a href="miscfiles.htm#pat4096testx">pat4096test.x</a>を追加しました。</span></p><p><span class="smallimg"><img alt="pat4096test.png" src="pat4096test.png"></span></p><p><span class="en">Test <a href="feature.htm#_256sprites">256 sprites</a> and <a href="feature.htm#_4096patterns">4096 patterns</a>.</span> <span class="ja"><a href="feature.htm#_256sprites">256 枚のスプライト</a>と<a href="feature.htm#_4096patterns">4096 個のパターン</a>をテストします。</span></p><p><span class="en">Turn on the <a href="menu.htm#_256sprites">256 sprites checkbox</a> and the <a href="menu.htm#_4096patterns">4096 patterns checkbox</a> in the <a href="menu.htm#modification">modification menu</a>, and reset before executing.</span> <span class="ja"><a href="menu.htm#modification">改造メニュー</a>の<a href="menu.htm#_256sprites">256 枚のスプライトチェックボックス</a>と<a href="menu.htm#_4096patterns">4096 個のパターンチェックボックス</a>を ON にしてリセットしてから実行します。</span></p><p><span class="en">Press any key to exit.</span> <span class="ja">何かキーを押すと終了します。</span></p><p><span class="en">It does not work on the actual X68000 machine.</span> <span class="ja">X68000 実機では動きません。</span></p><h4><span class="en">Sprites displayed in 768x512</span> <span class="ja">768x512 でスプライトを表示</span></h4><p><span class="en">Added <a href="feature.htm#spr768x512">sprites displayed in 768x512</a>.</span> <span class="ja"><a href="feature.htm#spr768x512">768x512 でスプライトを表示</a>を追加しました。</span></p><p><span class="en">If the <a href="menu.htm#spr768x512">sprites displayed in 768x512 checkbox</a> in the <a href="menu.htm#modification">modification menu</a> is checked and reset, the sprite screen can be displayed in 768x512.</span> <span class="ja"><a href="menu.htm#modification">改造メニュー</a>の<a href="menu.htm#spr768x512">768x512 でスプライトを表示チェックボックス</a>を ON にしてリセットすると、768x512 でスプライト画面を表示できるようになります。</span></p><p><span class="en">This setting is stored in the <a href="parameter.htm#spr768x512">parameter spr768x512</a>.</span> <span class="ja">この設定は<a href="parameter.htm#spr768x512">パラメータ spr768x512</a>に保存されます。</span></p><p><span class="en">The restriction that the sprite screen cannot be displayed when the lower 5 bits of R20 of CRTC are %1xx1x is removed.</span> <span class="ja">CRTC の R20 の下位 5 ビットが %1xx1x のときスプライト画面を表示できないという制限を解除します。</span></p><p><span class="en">Bits 4, 1, and 0 of R20 of CRTC select the dot clock (oscillator and frequency divider ratio). For %1xx1x, the dot clock is 25 MHz or higher, which corresponds to 768x512, 1024x424, 1024x848, and 640x480 in CRTMOD 16 to 19 in standard screen mode.</span> <span class="ja">CRTC の R20 のビット 4,1,0 はドットクロック (オシレータと分周比) を選択します。%1xx1x はドットクロックが 25MHz 以上で、標準の画面モードでは CRTMOD 16～19 の 768x512、1024x424、1024x848、640x480 が該当します。</span></p><p><span class="en">This limitation is so strong that even if one wanted to display a sprite screen at 768x512, just accessing the sprite area, pattern area, or text area would cause a bus error and there is no way to solve the problem.</span> <span class="ja">この制限は強く、768x512 でスプライト画面を表示したくてもスプライトエリア、パターンエリア、テキストエリアにアクセスしただけでバスエラーが発生してしまい、取り付く島もありません。</span></p><p><span class="en">By removing this limitation, the sprite screen can be displayed even in 768x512.</span> <span class="ja">この制限を解除することで、768x512 でもスプライト画面を表示できるようになります。</span></p><h4>spr768x512.x</h4><p><span class="en">Added <a href="miscfiles.htm#spr768x512x">spr768x512.x.</a></span> <span class="ja"><a href="miscfiles.htm#spr768x512x">spr768x512.x</a>を追加しました。</span></p><p><span class="smallimg"><img alt="spr768x512.png" src="spr768x512.png"></span></p><p><span class="en">Test <a href="feature.htm#_256sprites">256 sprites</a>, <a href="feature.htm#_4096patterns">4096 patterns</a> and <a href="feature.htm#spr768x512">sprites displayed in 768x512</a>.</span> <span class="ja"><a href="feature.htm#_256sprites">256 枚のスプライト</a>と<a href="feature.htm#_4096patterns">4096 個のパターン</a>と<a href="feature.htm#spr768x512">768x512 でスプライトを表示</a>をテストします。</span></p><p><span class="en">Turn on the <a href="menu.htm#_256sprites">256 sprites checkbox</a>, the <a href="menu.htm#_4096patterns">4096 patterns checkbox</a>, and the <a href="menu.htm#spr768x512">sprites displayed in 768x512 checkbox</a> in the <a href="menu.htm#modification">modification menu</a>, and reset before executing.</span> <span class="ja"><a href="menu.htm#modification">改造メニュー</a>の<a href="menu.htm#_256sprites">256 枚のスプライトチェックボックス</a>と<a href="menu.htm#_4096patterns">4096 個のパターンチェックボックス</a>と<a href="menu.htm#spr768x512">768x512 でスプライトを表示チェックボックス</a>を ON にしてリセットしてから実行します。</span></p><p><span class="en">Press any key to exit.</span> <span class="ja">何かキーを押すと終了します。</span></p><p><span class="en">It does not work on the actual X68000 machine.</span> <span class="ja">X68000 実機では動きません。</span></p><h4><span class="en">Text screen</span> <span class="ja">テキスト画面</span></h4><p><span class="en">When the real screen size is 1024x1024 and the text screen and the graphic screen are displayed and the scroll position in the X direction of either is not a multiple of 8, the scroll position in the X direction of the text screen shifts by 1 to 7 dots at the position where the real screen coordinates in the X direction of the graphic screen cross a multiple of 512. This bug has been fixed.</span> <span class="ja">実画面サイズが 1024x1024 で、テキスト画面とグラフィック画面が表示されていて、どちらかの X 方向のスクロール位置が 8 の倍数ではないとき、グラフィック画面の X 方向の実画面座標が 512 の倍数を跨ぐ位置で、テキスト画面の X 方向のスクロール位置が 1～7 ドットずれるバグを修正しました。</span></p><h4><span class="en">BG1 displayed in 512x512</span> <span class="ja">512x512 で BG1 を表示</span></h4><p><span class="en">Added <a href="feature.htm#spr512bg1">BG1 displayed in 512x512</a>.</span> <span class="ja"><a href="feature.htm#spr512bg1">512x512 で BG1 を表示</a>を追加しました。</span></p><p><span class="en">If the <a href="menu.htm#spr512bg1">BG1 displayed in 512x512 checkbox</a> in the <a href="menu.htm#modification">modification menu</a> is checked and reset, the BG1 can be displayed in 512x512.</span> <span class="ja"><a href="menu.htm#modification">改造メニュー</a>の<a href="menu.htm#spr512bg1">512x512 で BG1 を表示チェックボックス</a>を ON にしてリセットすると、512x512 で BG1 を表示できるようになります。</span></p><p><span class="en">This setting is stored in the <a href="parameter.htm#spr512bg1">parameter spr512bg1</a>.</span> <span class="ja">この設定は<a href="parameter.htm#spr512bg1">パラメータ spr512bg1</a>に保存されます。</span></p><p><span class="en">Remove the limitation that only one background plane can be displayed in 512x512. It is possible to display two planes of background in 512x512 as well as in 256x256.</span> <span class="ja">512x512 のときはバックグラウンドを 1 面しか表示できないという制限を解除します。256x256 のときと同様に 512x512 のときもバックグラウンドを 2 面表示できるようになります。</span></p><h4>hypotrochoid.x</h4><p><span class="en">Added <a href="miscfiles.htm#hypotrochoidx">hypotrochoid.x.</a></span> <span class="ja"><a href="miscfiles.htm#hypotrochoidx">hypotrochoid.x</a>を追加しました。</span></p><p><span class="smallimg"><img alt="hypotrochoid.png" src="hypotrochoid.png"></span></p><p><span class="en">Draw a hypotrochoid on the pseudo graphic screen (background with 4096 patterns laid out). Blue (S) and purple (S) are sprite screens (BG0 and BG1), red (T) is a text screen, and green (G) is a graphic screen.</span> <span class="ja">疑似グラフィック画面 (4096 個のパターンを敷き詰めたバックグラウンド) にハイポトロコイドを描きます。青 (S) と紫 (S) はスプライト画面 (BG0 と BG1)、赤 (T) はテキスト画面、緑 (G) はグラフィック画面です。</span></p><p><span class="en">Turn on the the <a href="menu.htm#_4096patterns">4096 patterns checkbox</a>, the <a href="menu.htm#spr768x512">sprites displayed in 768x512 checkbox</a>, and the <a href="menu.htm#spr512bg1">BG1 displayed in 512x512 checkbox</a> in the <a href="menu.htm#modification">modification menu</a>, and reset before executing.</span> <span class="ja"><a href="menu.htm#modification">改造メニュー</a>の<a href="menu.htm#_4096patterns">4096 個のパターンチェックボックス</a>と<a href="menu.htm#spr768x512">768x512 でスプライトを表示チェックボックス</a>と<a href="menu.htm#spr512bg1">512x512 で BG1 を表示チェックボックス</a>を ON にしてリセットしてから実行します。</span></p><p><span class="en">Press BREAK/CTRL+C/ESC key to exit, other keys to stop during operation. While stopped, press ENTER key to resume and other keys to advance frame.</span> <span class="ja">BREAK/CTRL+C/ESC キーで終了、動作中はその他のキーで停止。停止中は ENTER キーで再開、その他のキーでコマ送りします。</span></p><p><span class="en">It does not work on the actual X68000 machine.</span> <span class="ja">X68000 実機では動きません。</span></p><h3><a href="#changes_0250208" id="changes_0250208">0.25.02.08</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 23.0.2. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 23.0.2 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4>DMAC</h4><p><span class="en"> Removed the process of clearing the PCT when a 1 is written to the PCT of the CSR. </span><span class="ja"> CSR の PCT に 1 が書き込まれたとき PCT をクリアする処理を外しました。 </span></p><h4><span class="en"> OPM log </span><span class="ja"> OPM ログ </span></h4><p><span class="en"> Fixed a bug that could cause a crash if the start playback button was pressed during playback. </span><span class="ja"> 再生中に再生開始ボタンを押すとクラッシュすることがあるバグを修正しました。 </span></p><h4><span class="en"> Key repeat </span><span class="ja"> キーリピート </span></h4><p><span class="en"> Fixed a bug that caused extra key repeats when reading the UDR more than once in the key-input interrupt routine. The method of processing key repeats has been changed from being done in MFP to using TimerTask. </span><span class="ja"> キー入力割り込みルーチンで UDR を 2 回以上読むと余計なキーリピートが発生するバグを修正しました。 キーリピートの処理を MFP の中で済ませる方法から TimerTask を使う方法に変更しました。 </span></p><h3><a href="#changes_0250108" id="changes_0250108">0.25.01.08</a></h3><h4>IPLROM 1.6 (2024-12-09)</h4><p><span class="smallimg"><img alt="iplrom16style.png" src="iplrom16style.png"></span></p><p><span class="en"> You can change the X68000 logo on the <a href="iplrom16.htm#startupscreen">IPLROM 1.6 startup screen</a>. Specify the file name of the TEXTPUT format data or the ROM image file name in the <a href="parameter.htm#x68000logo">parameter x68000logo</a>. The logo height is 16 dots, the standard width is 112 dots, and the upper limit is 208 dots. If the logo width is larger than the standard, the string &#34;SERIES&#34; will not be displayed. To use the 060turbo logo, the ROM of the actual 060turbo machine is required. </span><span class="ja"> <a href="iplrom16.htm#startupscreen">IPLROM 1.6 の起動画面</a>の X68000 ロゴを変更できます。TEXTPUT 形式のデータのファイル名または ROM イメージファイル名を、<a href="parameter.htm#x68000logo">パラメータ x68000logo</a>に指定します。 ロゴの高さは 16 ドット、幅は標準が 112 ドット、上限が 208 ドットです。 ロゴの幅が標準より大きいとき、文字列「SERIES」は表示されません。060turbo のロゴにするには 060turbo 実機の ROM が必要です。 </span></p><p><span class="en"> You can change the style of the IPLROM 1.6 startup screen. The proportional pitch is 1, centered is 2, with gaps is 4, and the sum of these is specified in the <a href="parameter.htm#iplrom16style">parameter iplrom16style</a>. The default is 7. </span><span class="ja"> IPLROM 1.6 の起動画面のスタイルを変更できます。 プロポーショナルピッチを 1、中央寄せを 2、隙間ありを 4 として、それらの合計を<a href="parameter.htm#iplrom16style">パラメータ iplrom16style</a>に指定します。 デフォルトは 7 です。 </span></p><h4>ppcon.x 0.11</h4><p><span class="en"> Fixed the behavior of the escape sequence &#34;ESC = r c&#34; in <a href="miscfiles.htm#ppconx">ppcon.x</a>. </span><span class="ja"> <a href="miscfiles.htm#ppconx">ppcon.x</a>のエスケープシーケンス「ESC = r c」の動作を修正しました。 </span></p><h4><span class="en"> RS-232C transmit buffer empty interrupt </span><span class="ja"> RS-232C の送信バッファ空割り込み </span></h4><p><span class="en"> RS-232C transmit buffer empty interrupt is implemented. The transmit interrupt output mode of bsio.x 0.21 is available. </span><span class="ja"> RS-232C の送信バッファ空割り込みを実装しました。bsio.x 0.21 の送信割り込み出力モードを使用できます。 </span></p><pre>;&#39;0&#39;～&#39;9&#39;を200個と$0D,$0A、最後に$1Aを送信する
;bsio.x -iのとき直ちに終了することを確認する
        .include        doscall.mac
        .include        iocscall.mac
@@:     IOCS    _OSNS232C
        tst.l   d0
        beq     @b
        moveq.l #&#39;0&#39;,d6
        moveq.l #10-1,d5
5:      move.w  #200-1,d4
4:      move.l  d6,d1
        IOCS    _OUT232C
        dbra    d4,4b
        moveq.l #$0D,d1
        IOCS    _OUT232C
        moveq.l #$0A,d1
        IOCS    _OUT232C
        addq.w  #1,d6
        dbra    d5,5b
        moveq.l #$1A,d1
        IOCS    _OUT232C
        DOS     _EXIT</pre><h4><span class="en"> Text screen copy </span><span class="ja"> テキスト画面コピー </span></h4><p><span class="en"> Added <a href="feature.htm#textscreencopy">text screen copy</a>. </span><span class="ja"> <a href="feature.htm#textscreencopy">テキスト画面コピー</a>を追加しました。 </span></p><p><span class="en"> Text screen copy is a function that reverses the character displayed as a bitmap image on the text screen to the character code and copies it to the clipboard. 8x8, 8x16, and 16x16 fonts in CGROM can be reverse-converted. Fonts loaded by &#34;COPY XXX.FON @IOCS&#34; etc. cannot be reverse-converted. Some characters are indistinguishable in principle, such as half-width space and full-width space. Light blue, yellow, bold, and reversal can be reverse-converted. Character attributes are not reflected in the result. Follows hardware scrolling. The coordinates of the character to be converted must be a multiple of 8x16. Characters that cannot be converted will be converted to &#34;?&#34;. </span><span class="ja"> テキスト画面コピーはテキスト画面にビットマップ画像として表示されている文字を文字コードに逆変換してクリップボードにコピーする機能です。CGROM にある 8x8、8x16、16x16 のフォントを逆変換できます。 「COPY XXX.FON @IOCS」などで読み込まれたフォントは逆変換できません。 半角スペースと全角スペースのように原理上区別できない文字があります。 水色、黄色、太字、反転を逆変換できます。 文字属性は結果に反映されません。 ハードウェアスクロールに追従します。 変換する文字の座標は 8x16 の倍数に限ります。 変換できなかった文字は「?」になります。 </span></p><p><span class="en"> Clicking <a href="menu.htm#textscreencopy">text screen copy</a> in the <a href="menu.htm#input">input menu</a> or pressing Alt+Shift+C copies the text displayed in the set range to the clipboard. The range to be copied can be selected using the display area radio button, C_WIDTH radio button, entire VRAM radio button, and last enclosed area radio button in the <a href="menu.htm#textscreencopysetting">text screen copy setting menu</a>. This setting is saved in the <a href="parameter.htm#textcopyarea">parameter textcopyarea</a>. </span><span class="ja"> <a href="menu.htm#input">入力メニュー</a>の<a href="menu.htm#textscreencopy">テキスト画面コピー</a>をクリックするか、Alt+Shift+C を押すと、設定された範囲に表示されているテキストがクリップボードにコピーされます。 <a href="menu.htm#textscreencopysetting">テキスト画面コピー設定メニュー</a>にある表示領域ラジオボタン、C_WIDTH ラジオボタン、VRAM 全体ラジオボタン、最後に囲んだ範囲ラジオボタンでコピーする範囲を選択できます。 この設定は<a href="parameter.htm#textcopyarea">パラメータ textcopyarea</a>に保存されます。 </span></p><p><span class="en"> When the enclose each time with mouse check box in the <a href="menu.htm#textscreencopysetting">text screen copy setting menu</a> is ON, pressing and dragging the left mouse button on the text screen will display a red frame, and releasing the button will copy the text inside the frame to the clipboard. This setting is saved in the <a href="parameter.htm#textcopy">parameter textcopy</a>. </span><span class="ja"> <a href="menu.htm#textscreencopysetting">テキスト画面コピー設定メニュー</a>にあるマウスで都度囲むチェックボックスが ON のとき、テキスト画面でマウスの左ボタンを押してドラッグすると赤い枠が表示され、ボタンを離すと枠の内側のテキストがクリップボードにコピーされます。 この設定は<a href="parameter.htm#textcopy">パラメータ textcopy</a>に保存されます。 </span></p><p><span class="en"> The mnemonic of the <a href="menu.htm#config">config menu</a> has been changed from C to G, following the assignment of <a href="menu.htm#textscreencopy">text screen copy</a> to the keyboard accelerator Alt+Shift+C. </span><span class="ja"> キーボードアクセラレータ Alt+Shift+C に<a href="menu.htm#textscreencopy">テキスト画面コピー</a>を割り当てたことに伴い、<a href="menu.htm#config">設定メニュー</a>のニモニックを C から G に変更しました。 </span></p><h4><span class="en"> Button function assignments window </span><span class="ja"> ボタン機能割り当てウインドウ </span></h4><p><span class="smallimg"><img alt="buttonfunction.png" src="buttonfunction.png"></span></p><p><span class="en"> Added <a href="feature.htm#buttonfunctionassignments">button function assignments window</a>. </span><span class="ja"> <a href="feature.htm#buttonfunctionassignments">ボタン機能割り当てウインドウ</a>を追加しました。 </span></p><p><span class="en"> Clicking <a href="menu.htm#buttonfunctionassignments">button function assignments</a> in the <a href="menu.htm#input">input menu</a> opens the button function assignments window. In the button function assignments window, you can assign functions to the F11 key, F12 key, wheel button, wheel scroll up, wheel scroll down, button 4, and button 5. You can select one of Shift, Ctrl, or Alt as a modifier key. </span><span class="ja"> <a href="menu.htm#input">入力メニュー</a>の<a href="menu.htm#buttonfunctionassignments">ボタン機能割り当て</a>をクリックするとボタン機能割り当てウインドウが開きます。 ボタン機能割り当てウインドウで、F11 キー、F12 キー、ホイールボタン、ホイールスクロールアップ、ホイールスクロールダウン、ボタン 4、ボタン 5 に機能を割り当てることができます。 修飾キーとして Shift、Ctrl、Alt から 1 個を選択できます。 </span></p><p><span class="en"> The functions that can be assigned to each button are as follows. </span><span class="ja"> 各ボタンに割り当てられる機能は以下の通りです。 </span></p><ol><li><span class="en"> Toggle fullscreen </span><span class="ja"> 全画面表示の切り替え </span></li><li><span class="en"> Toggle seamless mouse </span><span class="ja"> シームレスマウスの切り替え </span></li><li><span class="en"> Take a screenshot </span><span class="ja"> スクリーンショットを撮る </span></li><li><span class="en"> Text screen copy </span><span class="ja"> テキスト画面コピー </span></li><li><span class="en"> Start recording GIF animation </span><span class="ja"> GIF アニメーション録画開始 </span></li><li><span class="en"> Stop and start </span><span class="ja"> 停止と再開 </span></li><li><span class="en"> 1 trace </span><span class="ja"> トレース 1 回 </span></li><li><span class="en"> 10 traces </span><span class="ja"> トレース 10 回 </span></li><li><span class="en"> 100 traces </span><span class="ja"> トレース 100 回 </span></li><li><span class="en"> 1 step </span><span class="ja"> ステップ 1 回 </span></li><li><span class="en"> 10 steps </span><span class="ja"> ステップ 10 回 </span></li><li><span class="en"> 100 steps </span><span class="ja"> ステップ 100 回 </span></li><li><span class="en"> Step until return </span><span class="ja"> ステップアンティルリターン </span></li><li><span class="en"> Left click </span><span class="ja"> 左クリック </span></li><li><span class="en"> Right click </span><span class="ja"> 右クリック </span></li><li><span class="en"> No function </span><span class="ja"> 機能なし </span></li></ol><p><span class="en"> These settings are stored in <a href="parameter.htm#f11key">parameter f11key, etc</a>. The parameter keys are strings consisting of shift, ctrl, alt, which represent modifier keys, and f11key, f12key, wheel, wheelup, wheeldown, button4, button5, which represent buttons. The parameter values represent the corresponding functions. </span><span class="ja"> これらの設定は<a href="parameter.htm#f11key">パラメータ f11key など</a>に保存されます。 パラメータのキーは修飾キーを表す shift、ctrl、alt と、ボタンを表す f11key、f12key、wheel、wheelup、wheeldown、button4、button5 を連結した文字列です。 パラメータの値は対応する機能を表します。 </span></p><p><span class="en"> The F11 and F12 keys can only be entered with the keys assigned in the <a href="feature.htm#keyassignments">key assignments window</a> when the no function is selected in the <a href="feature.htm#buttonfunctionassignments">button function assignments window</a>. </span><span class="ja"> F11 キーと F12 キーは<a href="feature.htm#buttonfunctionassignments">ボタン機能割り当てウインドウ</a>で機能なしを選択したときだけ<a href="feature.htm#keyassignments">キー割り当てウインドウ</a>で割り当てたキーを入力できます。 </span></p><p><span class="en"> The F11 key menu has been eliminated. The F11 key, when in full screen mode, can be pressed to cancel full screen mode regardless of the F11 key assignment, but this function has also been eliminated. When the F11 key is not assigned to full screen switching, pressing the F11 key does not cancel the full screen display. </span><span class="ja"> F11 キーメニューを廃止しました。 全画面表示のとき F11 キーを押すと F11 キーの割り当てと関係なく全画面表示が解除される機能がありましたが、これも廃止しました。F11 キーに全画面表示の切り替えが割り当てられていないときは、F11 キーを押しても全画面表示は解除されません。 </span></p><p><span class="en"> The mouse wheel menu has been eliminated. The parameter mousewheel can be specified but is not saved as parameter mousewheel. -mousewheel=trace is interpreted as -wheelup=trace1 -shiftwheelup=trace10 -ctrlwheelup=trace100 -wheeldown=step1 -shiftwheeldown=step10 -ctrlwheeldown=step100 -altwheeldown=return. -mousewheel=click is interpreted as -wheelup=leftclick -wheeldown=rightclick. </span><span class="ja"> マウスホイールメニューを廃止しました。 パラメータ mousewheel は指定できますがパラメータ mousewheel としては保存されません。-mousewheel=trace は -wheelup=trace1 -shiftwheelup=trace10 -ctrlwheelup=trace100 -wheeldown=step1 -shiftwheeldown=step10 -ctrlwheeldown=step100 -altwheeldown=return として解釈されます。-mousewheel=click は -wheelup=leftclick -wheeldown=rightclick として解釈されます。 </span></p><h4>SPC</h4><p><span class="en"> Supported Synchronize Cache command. Supported Request Sense command for non-existent LUNs. Do not report that it is confirmed that XOR commands cannot be used. </span><span class="ja"> Synchronize Cache コマンドに対応。 存在しない LUN に対する Request Sense コマンドに対応。XOR 系のコマンドが使えないことを確認されたことを報告しない。 </span></p><h4><span class="en"> Debug console </span><span class="ja"> デバッグコンソール </span></h4><p><span class="en"> Rebuild command d, f. Added commands ll, me, ms, tx, txf. </span><span class="ja"> コマンド d、f を再構築。 コマンド ll、me、ms、tx、txf を追加。 </span></p><h3><a href="#changes_0241208" id="changes_0241208">0.24.12.08</a></h3><h4><span class="en"> Restore windows that were open </span><span class="ja"> 開いていたウインドウを復元する </span></h4><p><span class="en"> Added <a href="menu.htm#restorewindows">restore windows that were open checkbox</a> to the <a href="menu.htm#inifile">configuration file menu</a>. Select whether or not to restore windows that were open at exit time at startup. This setting is saved in <a href="parameter.htm#xxxopen">parameter xxxopen</a>. (Thanks megazone-mc21) </span><span class="ja"> <a href="menu.htm#inifile">設定ファイルメニュー</a>に<a href="menu.htm#restorewindows">開いていたウインドウを復元するチェックボックス</a>を追加しました。 終了時に開いていたウインドウを、起動時に復元するかどうか選択します。 この設定は<a href="parameter.htm#xxxopen">パラメータ xxxopen</a>に保存されます。(Thanks megazone-mc21) </span></p><h4><span class="en"> Instruction break point </span><span class="ja"> 命令ブレークポイント </span></h4><p><span class="en"> Fixed a problem in which the program may not stop when going back and forth between user mode and supervisor mode when performing Instruction breakpoint, Run to here, and Step. </span><span class="ja"> 命令ブレークポイント、ここまで実行、ステップを行うとき、ユーザモードとスーパーバイザモードを行き来すると停止しないことがある不具合を修正しました。 </span></p><h4><span class="en"> SCSI Ukun Kai support </span><span class="ja"> すかじー U 君改対応 </span></h4><p><span class="en"> It is now compatible with the <a href="https://xn--tnb-k69dq77f996c.com/%E3%81%99%E3%81%8B%E3%81%98%E3%83%BCU%E5%90%9B%E6%94%B9.html" target="_blank">SCSI Ukun Kai</a>. There is the SCSI Ukun Kai (experimental) menu in the SCSI menu in the <a href="menu.htm#file">File menu</a>. When the connection checkbox is turned on and reset, the built-in SCSI port switches to the SCSI Ukun Kai. This setting is stored in the <a href="parameter.htm#suk">parameter suk</a>. </span><span class="ja"> <a href="https://xn--tnb-k69dq77f996c.com/%E3%81%99%E3%81%8B%E3%81%98%E3%83%BCU%E5%90%9B%E6%94%B9.html" target="_blank">すかじー U 君改</a>に対応しました。 <a href="menu.htm#file">ファイルメニュー</a>の中の SCSI メニューの中にすかじー U 君改 (実験中) メニューがあります。 接続チェックボックスを ON にしてリセットすると内蔵 SCSI ポートがすかじー U 君改に切り替わります。 この設定は<a href="parameter.htm#suk">パラメータ suk</a>に保存されます。 </span></p><h4>MC68EC030</h4><p><span class="en"> Corrected the behavior of the MC68EC030 F-line instruction. When trying to execute cpSAVE or cpRESTORE in user mode, a privilege violation exception occurs. When attempting to execute cpRESTORE in supervisor mode, it would read the effective address. The latter corresponds to an unexpected memory access which is the reason why some DOS call numbers had to be moved when Human68k was adapted to the X68030. If there was nothing in the accessed location, a bus error would occur. This fix may cause programs that do not support X68030 and do not work on the actual X68030 machine, but work in XEiJ&#39;s X68030 mode, to not work in XEiJ&#39;s X68030 mode either. </span><span class="ja"> MC68EC030 の F ライン命令の動作を修正しました。 ユーザモードで cpSAVE または cpRESTORE を実行しようとしたとき特権違反例外が発生します。 スーパーバイザモードで cpRESTORE を実行しようとしたとき実効アドレスをリードします。 後者は Human68k が X68030 に対応するとき一部の DOS コール番号を移動しなければならなくなった理由である予期しないメモリアクセスに相当します。 アクセスした場所に何もなければバスエラーが発生します。 この修正により、X68030 に対応しておらず X68030 実機では動かないのに XEiJ の X68030 モードでは動いてしまっていたプログラムが、XEiJ の X68030 モードでも動かなくなる可能性があります。 </span></p><h4>flinebuserror.x</h4><p><span class="en"> Added <a href="miscfiles.htm#flinebuserrorx">misc/flinebuserror.x</a>. This is an experiment to call the DOS call _GETENV with the old number $FF53 on the MC68030 to generate a bus error. </span><span class="ja"> <a href="miscfiles.htm#flinebuserrorx">misc/flinebuserror.x</a>を追加しました。MC68030 で DOS コールの _GETENV を古い番号 $FF53 で呼び出してバスエラーを発生させる実験です。 </span></p><h4>flineprivilege.x</h4><p><span class="en"> Added <a href="miscfiles.htm#flineprivilegex">misc/flineprivilege.x</a>. Check which of $FE00 to $FFFF raises a privilege violation exception when the MC68030 is in user mode. </span><span class="ja"> <a href="miscfiles.htm#flineprivilegex">misc/flineprivilege.x</a>を追加しました。MC68030 でユーザモードのとき $FE00～$FFFF のどれで特権違反例外が発生するか調べます。 </span></p><h4><span class="en"> Stop on error </span><span class="ja"> エラーで停止する </span></h4><p><span class="en"> The MPU does not stop on a privilege violation generated by a DOS call, even if the Stop on error (&#34;!&#34; check box in disassembly list, etc.) is enabled. </span><span class="ja"> エラーで停止する (逆アセンブルリストなどにある「!」チェックボックス) が有効になっていても、DOS コールで発生した特権違反では MPU が停止しないようにしました。 </span></p><h4>060turbo.sys 0.60</h4><p><span class="en"> -fe can no longer be specified except for 68060. Privilege violation exceptions are now merged with F-line exceptions. </span><span class="ja"> -fe を 68060 以外で指定できないようにしました。 特権違反例外を F ライン例外に合流させるようにしました。 </span></p><h3><a href="#changes_0241108" id="changes_0241108">0.24.11.08</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 23.0.1. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 23.0.1 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4>MC68000</h4><p><span class="en"> Fixed behavior of undefined flag V in NBCD/SBCD of MC68000. (Thanks みゆ&#127801;&#3589;^&#8226;ω&#8226;^&#3589;) </span><span class="ja"> MC68000 の NBCD/SBCD の未定義フラグ V の挙動を修正しました。(Thanks みゆ&#127801;&#3589;^&#8226;ω&#8226;^&#3589;) </span></p><h4>instructiontest.x</h4><p><span class="en"> Fixed expected of hard for ABCD/NBCD/SBCD of MC68000 in <a href="miscfiles.htm#instructiontestx">instructiontest.x</a>. (Thanks みゆ&#127801;&#3589;^&#8226;ω&#8226;^&#3589;) </span><span class="ja"> <a href="miscfiles.htm#instructiontestx">instructiontest.x</a>の MC68000 の ABCD/NBCD/SBCD の hard の expected を修正しました。(Thanks みゆ&#127801;&#3589;^&#8226;ω&#8226;^&#3589;) </span></p><h4><span class="en"> High memory on 060turbo </span><span class="ja"> 060turbo のハイメモリ </span></h4><p><span class="en"> High memory on 060turbo is also available on X68000. This setting can be changed using the Available on X68000 checkbox in the <a href="menu.htm#localmemory">High memory on 060turbo menu</a>. This setting is stored in the <a href="parameter.htm#himem68000">parameter himem68000</a>. Note that the mere presence of high memory can cause the program to malfunction. </span><span class="ja"> X68000 でも 060turbo のハイメモリが使えます。 この設定は<a href="menu.htm#localmemory">060turbo のハイメモリメニュー</a>の X68000 でも有効チェックボックスで変更できます。 この設定は<a href="parameter.htm#himem68000">パラメータ himem68000</a>に保存されます。 ハイメモリは存在するだけでプログラムを誤動作させることがあるので注意してください。 </span></p><p><span class="en"> The Use high memory on 060turbo checkbox that was in the <a href="menu.htm#highmemory">High memory on X68030/Xellent30 menu</a> has been moved to the Available on X68030/Xellent30 checkbox in the <a href="menu.htm#localmemory">High memory on 060turbo menu</a>. </span><span class="ja"> <a href="menu.htm#highmemory">X68030/Xellent30 のハイメモリメニュー</a>にあった 060turbo のハイメモリを使うチェックボックスは<a href="menu.htm#localmemory">060turbo のハイメモリメニュー</a>の X68030/Xellent30 でも有効チェックボックスに移動しました。 </span></p><h4>IPLROM 1.6 (2024-10-23)</h4><p><span class="en"> When started in X68000 mode, it also detects high memory and displays the range and capacity. </span><span class="ja"> X68000 モードで起動したときもハイメモリを検出して範囲と容量を表示します。 </span></p><h4><span class="en"> Full screen </span><span class="ja"> 全画面表示 </span></h4><p><span class="en"> Fixed problem with not switching to full screen at startup. (Thanks megazone-mc21) </span><span class="ja"> 起動時に全画面表示に切り替わらない問題を修正しました。(Thanks megazone-mc21) </span></p><h4><span class="en"> Wait cycles </span><span class="ja"> ウェイトサイクル </span></h4><p><span class="en"> The number of wait cycles now follows changes in operating frequency. </span><span class="ja"> ウェイトサイクル数が動作周波数の変化に追従するようにしました。 </span></p><h4><span class="en"> XEiJ development environment </span><span class="ja"> XEiJ の開発環境 </span></h4><p><span class="en"> XEiJ development environment has been updated from Windows 10 Pro to Windows 11 Pro. </span><span class="ja"> XEiJ の開発環境を Windows 10 Pro から Windows 11 Pro へアップデートしました。 </span></p><h4><span class="en"> Icon </span><span class="ja"> アイコン </span></h4><p><span class="en"> Changed taskbar icon size from 16x16 to 48x48. </span><span class="ja"> タスクバーのアイコンのサイズを 16x16 から 48x48 へ変更しました。 </span></p><h4>DMAC</h4><p><span class="en"> Fixed a bug that prevented CSRs from being cleared bit by bit. Fixed a bug that CER was not cleared after writing 1 to the ERR bit of CSR. </span><span class="ja"> CSR をビット単位でクリアできないバグを修正しました。CSR の ERR ビットに 1 を書き込んでも CER がクリアされないバグを修正しました。 </span></p><h3><a href="#changes_0241008" id="changes_0241008">0.24.10.08</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 23. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 23 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4><span class="en"> Full screen </span><span class="ja"> 全画面表示 </span></h4><p><span class="en"> Exit full screen before opening subwindows. On macOS, it also exits full screen before opening dialogs. (Thanks megazone-mc21) </span><span class="ja"> サブウインドウを開く前に全画面表示を終了します。macOS のときはダイアログを開く前にも全画面表示を終了します。(Thanks megazone-mc21) </span></p><h3><a href="#changes_0240908" id="changes_0240908">0.24.09.08</a></h3><h4>CRTC</h4><p><span class="en"> When the text and graphic screens are 512x256 dots, the sprite screen can be set to 512x512 dots. (Thanks megazone-mc21) </span><span class="ja"> テキスト画面とグラフィック画面が 512x256 ドットのとき、スプライト画面を 512x512 ドットに設定できます。(Thanks megazone-mc21) </span></p><h4>IPLROM 1.6/crtmod16.x</h4><p><span class="en"> Screen modes 40-47 have been added to IOCS _CRTMOD for <a href="iplrom16.htm#crtmod_list">IPLROM 1.6</a> and <a href="miscfiles.htm#crtmod16x">crtmod16.x</a>. Screen modes 40-43 are 512x256 dots for all screens, and screen modes 44-47 are 512x256 dots for the text and graphic screens and 512x512 dots for the sprite screen. </span><span class="ja"> <a href="iplrom16.htm#crtmod_list">IPLROM 1.6</a>と<a href="miscfiles.htm#crtmod16x">crtmod16.x</a>の IOCS _CRTMOD に、画面モード 40～47 を追加しました。 画面モード 40～43 はすべての画面が 512x256 ドット、画面モード 44～47 はテキスト画面とグラフィック画面が 512x256 ドットでスプライト画面が 512x512 ドットです。 </span></p><h4>crtmodtest.x</h4><p><span class="en"> Screen modes 40-47 can be specified in <a href="miscfiles.htm#crtmodtestx">crtmodtest.x</a>. </span><span class="ja"> <a href="miscfiles.htm#crtmodtestx">crtmodtest.x</a>で画面モード 40～47 を指定できます。 </span></p><p><span class="en"> Avoid stepping on the IOCS _SP_INIT bug in IPLROM 1.0 to 1.3. </span><span class="ja"> IPLROM 1.0～1.3 の IOCS _SP_INIT のバグを踏まないようにしました。 </span></p><p><span class="en"> When exiting with the ESC key, hides sprites and graphics, erases text, and restores the text palette. </span><span class="ja"> ESC キーで終了したとき、スプライトとグラフィックを非表示に、テキストを消去、テキストパレットを復元します。 </span></p><p><span class="smallimg"><img alt="crtmod45.png" src="crtmod45.png"></span></p><h3><a href="#changes_0240808" id="changes_0240808">0.24.08.08</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 22.0.2. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 22.0.2 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4><span class="en"> RS-232C and terminal </span><span class="ja"> RS-232C とターミナル </span></h4><p><span class="en"> The additional port text field has been added to the <a href="feature.htm#rs232candterminal">RS-232C and terminal</a>. When the port you want to connect to is not displayed after pressing the refresh button, enter the descriptor of the port you want to connect to in the additional port text field and press the refresh button. Typically, the descriptor is a string such as &#34;COM[*]&#34; on Windows or &#34;/dev/tty[*]&#34; on Linux and macOS. You can add ports that can be connected to with SerialPort.getCommPort(portDescriptor) but do not appear in the list of SerialPort.getCommPorts(). Be careful not to enter a descriptor for a port that does not exist or is already on the list. The contents of the additional port text field are stored in the <a href="parameter.htm#additionalport">parameter additionalport</a>. (Thanks くにちこ) </span><span class="ja"> <a href="feature.htm#rs232candterminal">RS-232C とターミナル</a>に追加ポートテキストフィールドを追加しました。 更新ボタンを押しても接続したいポートが表示されないとき、追加ポートテキストフィールドに接続したいポートのデスクリプタを入力して更新ボタンを押します。 通常、デスクリプタは Windows では「COM[*]」、Linux および macOS では「/dev/tty[*]」のような文字列です。SerialPort.getCommPort(portDescriptor) で接続できるが SerialPort.getCommPorts() のリストに出てこないポートを追加できます。 存在しないポートや既にリストにあるポートのデスクリプタを入力しないように注意してください。 追加ポートテキストフィールドの内容は<a href="parameter.htm#additionalport">パラメータ additionalport</a>に保存されます。(Thanks くにちこ) </span></p><h4><span class="en"> Modification menu </span><span class="ja"> 改造メニュー </span></h4><p><span class="en"> The display position of &#34;Number of sprites per raster&#34; in the <a href="menu.htm#modification">modification menu</a> has been corrected. </span><span class="ja"> <a href="menu.htm#modification">改造メニュー</a>の「ラスタあたりのスプライトの枚数」の表示位置を修正しました。 </span></p><h4>MFP</h4><p><span class="en"> To solve a phenomenon in which a program that keeps sending data to the keyboard runs extremely fast compared to the actual device, the time required for transmission is calculated from the Timer-B and UCR configurations and reflected in the BE bit of the TSR. (Thanks くにちこ) </span><span class="ja"> キーボードへデータを送信し続けるプログラムが実機と比較して極端に速く動作する現象を解消するため、Timer-B と UCR の構成から送信にかかる時間を計算して TSR の BE ビットに反映させるようにしました。(Thanks くにちこ) </span></p><h4><span class="en"> isHFS.x and isXEiJ.x </span><span class="ja"> isHFS.x と isXEiJ.x </span></h4><p><span class="en"> <a href="miscfiles.htm#ishfsx">isHFS.x</a> and <a href="miscfiles.htm#isxeijx">isXEiJ.x</a> are added. </span><span class="ja"> <a href="miscfiles.htm#ishfsx">isHFS.x</a>と<a href="miscfiles.htm#isxeijx">isXEiJ.x</a>を追加しました。 </span></p><h3><a href="#changes_0240708" id="changes_0240708">0.24.07.08</a></h3><h4><span class="en"> FE function instructions </span><span class="ja"> FE ファンクション命令 </span></h4><p><span class="en"> Fixed a bug in __LDIV where -2147483648/-1 did not result in an error. </span><span class="ja"> __LDIV で -2147483648/-1 がエラーにならないバグを修正しました。 </span></p><p><span class="en"> The Z and V flags for the __LMUL/__LDIV/__LMOD results are not written in the CZ-6BP1 manual, but X-BASIC uses them so they should be set. </span><span class="ja"> __LMUL/__LDIV/__LMOD の結果の Z フラグと V フラグは、CZ-6BP1 のマニュアルに書かれていませんが、X-BASIC が使っているので設定するようにしました。 </span></p><h4>smktest.x</h4><p><span class="en"> Added <a href="miscfiles.htm#smktestx">smktest.x</a>. The program simply displays &#34;XEiJ meets ShiroMadoKun&#34; on ShiroMadoKun. </span><span class="ja"> <a href="miscfiles.htm#smktestx">smktest.x</a>を追加しました。 白窓君に「XEiJ meets ShiroMadoKun」と表示するだけのプログラムです。 </span></p><h4><span class="en"> Joystick port settings </span><span class="ja"> ジョイスティックポート設定 </span></h4><p><span class="en"> JoyPortUkun&#39;s items were placed side by side. </span><span class="ja"> じょいぽーと U 君の項目を横に並べました。 </span></p><h4><span class="en"> Register list </span><span class="ja"> レジスタリスト </span></h4><p><span class="en"> Changed threads in register list to prevent VM hangs. </span><span class="ja"> VM がハングアップしないようにレジスタリストのスレッドを変更しました。 </span></p><h4>SCSIINROM/SCSIEXROM 16 (2024-07-02)</h4><p><span class="en"> The _B_DSKINI bug that was present in level 0 (SUPER), level 3 (XVI) and level 4 (FORMAT.X) remains and has been corrected. </span><span class="ja"> レベル 0(SUPER)、レベル 3(XVI) およびレベル 4(FORMAT.X) にあった _B_DSKINI のバグが残っていたので修正しました。 </span></p><p><span class="en"> By setting the SASI flag, you can access SASI HDs connected to the SCSI bus. For example, when ID 0 is SCSI HD and ID 1 is SASI HD, if you perform the following operations before booting, A: will be SCSI HD, B: and C: will be FD, and D: will be SASI HD. 00000010 indicates the ID of the SASI HD. Can also be $02. </span><span class="ja"> SASI フラグを設定することで SCSI バスに接続された SASI HD にアクセスできます。 例えば ID 0 が SCSI HD、ID 1 が SASI HD のとき、以下の操作をしてから起動すると A: は SCSI HD、B: と C: は FD、そして D: が SASI HD になります。00000010 は SASI HD の ID を示します。$02 でも可。 </span></p><pre>A&gt;switch b=scsi0
A&gt;switch ^=00000010</pre><p><span class="en"> FORMAT.X can be used to initialize a device and allocate space for a SASI HD connected to the SCSI bus. The device name is the hard disk, the device number is twice the SASI ID, and the capacity is the capacity of the image file. </span><span class="ja"> FORMAT.X で SCSI バスに接続された SASI HD の装置初期化や領域確保ができます。 装置名はハードディスク、装置番号は SASI ID の 2 倍、容量はイメージファイルの容量を選択します。 </span></p><h4>IPLROM 1.6 (2024-07-02)</h4><p><span class="en"> The version was changed to match SCSIINROM 16. </span><span class="ja"> SCSIINROM 16 に合わせてバージョンを変更しました。 </span></p><h4>SPC</h4><p><span class="en"> Added 0x06 Format Block (SASI). It zero-clears the specified range. </span><span class="ja"> 0x06 Format Block(SASI) を追加しました。 指定された範囲をゼロクリアします。 </span></p><p><span class="en"> Added 0xc2 Assign Drive (SASI). It only accepts drive parameters and does nothing. </span><span class="ja"> 0xc2 Assign Drive(SASI) を追加しました。 ドライブパラメータを受け取るだけで何もしません。 </span></p><h4>SRAM</h4><p><span class="en"> The SASI flag in SRAM is used to automatically correct the maximum number of SASI hard disks. </span><span class="ja"> SRAM にある SASI ハードディスクの最大数を自動修正するとき SASI フラグを使います。 </span></p><h4>jSerialComm</h4><p><span class="en"> As of this writing, the latest version of jSerialComm is 2.11.0. </span><span class="ja"> これを書いている時点で jSerialComm の最新版は 2.11.0 です。 </span></p><ul><li><a href="https://github.com/Fazecast/jSerialComm/releases/tag/v2.11.0" target="_blank">Release jSerialComm v2.11.0 &#183; Fazecast/jSerialComm &#183; GitHub</a></li></ul><h3><a href="#changes_0240608" id="changes_0240608">0.24.06.08</a></h3><h4>IPLROM 1.6</h4><p><span class="en"> Added nop instruction as a countermeasure to the problem of not being able to boot on the actual 040turbo device. (Thanks fujitech pro-68k and GIMONS) </span><span class="ja"> 040turbo 実機で起動できない問題の対策として nop 命令を追加しました。(Thanks fujitech pro-68k and GIMONS) </span></p><h4><span class="en"> RS-232C and terminal </span><span class="ja"> RS-232C とターミナル </span></h4><p><span class="en"> At the terminal, press the Pause key or select &#34;Send ^C&#34; from the pop-up menu to send 0x03. </span><span class="ja"> ターミナルで、Pause キーを押すか、ポップアップメニューの「^C 送信」を選択すると、0x03 が送信されます。 </span></p><h4>SCSIEXROM.DAT</h4><p><span class="en"> The size of SCSIEXROM.DAT that could be specified for the <a href="parameter.htm#scsiexrom">parameter scsiexrom</a> was 8192 bytes only, but now it is possible to specify a file of 8160 bytes with the first 32 bytes missing. Note that the size of XEIJSCSIEXROM.DAT created in the <a href="menu.htm#romfile">create ROM file menu</a> is always 8192 bytes. </span><span class="ja"> <a href="parameter.htm#scsiexrom">パラメータ scsiexrom</a>に指定できる SCSIEXROM.DAT のサイズは 8192 バイトのみでしたが、先頭 32 バイトが欠落した 8160 バイトのファイルも指定できるようにしました。 なお、<a href="menu.htm#romfile">ROM ファイルの作成メニュー</a>で作られる XEIJSCSIEXROM.DAT のサイズは常に 8192 バイトです。 </span></p><h3><a href="#changes_0240508" id="changes_0240508">0.24.05.08</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 22.0.1. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 22.0.1 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4>SCC</h4><p><span class="en"> The operating frequency of the SCC when modified was changed from 7.5 MHz to 7.3728 MHz. The notation in <a href="miscfiles.htm#set232cx">set232c.x</a> was also changed from 7.5 MHz to 7.3728 MHz. </span><span class="ja"> 改造したときの SCC の動作周波数を 7.5MHz から 7.3728MHz に変更しました。 <a href="miscfiles.htm#set232cx">set232c.x</a>の表記も 7.5MHz から 7.3728MHz に変更しました。 </span></p><h3><a href="#changes_0240408" id="changes_0240408">0.24.04.08</a></h3><h4>crtmrb16.x</h4><p><span class="en"> <a href="miscfiles.htm#crtmrb16x">crtmrb16.x</a> is added. crtmrb16.x is a modification of <a href="miscfiles.htm#crtmod16x">crtmod16.x</a> to reproduce the IPLROM 1.0 to 1.3 bug. </span><span class="ja"> <a href="miscfiles.htm#crtmrb16x">crtmrb16.x</a>を追加しました。crtmrb16.x は<a href="miscfiles.htm#crtmod16x">crtmod16.x</a>に IPLROM 1.0～1.3 のバグを再現させる改造を施したものです。 </span></p><p><span class="en"> IPLROM 1.0 to 1.3 has a bug in which IOCS _CRTMOD initializes the graphics palette with a different number of colors than the specified screen mode. Specifically, IOCS _CRTMOD ignores the number of colors specified by the screen mode specified in the _CRTMOD argument and initializes the graphics palette as 16 colors for 256x256, 256 colors for 512x512, and 65536 colors for 768x512, which is a nonsense behavior. If you call _G_CLR_ON after _CRTMOD according to the manner in which the graphics screen is displayed, there is no problem because _G_CLR_ON will re-initialize the graphics palette with the correct number of colors. If you display the graphics screen without calling _G_CLR_ON after _CRTMOD, the bug in _CRTMOD will be exposed. </span><span class="ja"> IPLROM 1.0～1.3 には、IOCS _CRTMOD がグラフィックパレットを指定された画面モードと異なる色数で初期化するというバグがあります。 具体的には、_CRTMOD の引数で指定された画面モードで定められた色数を無視して、256x256 は 16 色、512x512 は 256 色、768x512 は 65536 色とみなしてグラフィックパレットを初期化するという、ナンセンスな動きをします。 グラフィック画面を表示するときの作法に従って _CRTMOD の後に _G_CLR_ON を呼び出せば、_G_CLR_ON が正しい色数でグラフィックパレットを初期化し直すので問題ありません。_CRTMOD の後に _G_CLR_ON を呼び出さずにグラフィック画面を表示すると、_CRTMOD のバグが露見します。 </span></p><p><span class="en"> Trouble is, it seems that some software is painting over the bug by initializing the graphics palette in a way that depends on this bug. Such software appears to work correctly with IPLROM 1.0 to 1.3, but when run under IPLROM 1.6/crtmod16.x, where the bug has been fixed, the bug is exposed and the display is corrupted. If you have software whose graphics palette is not correct only with IPLROM 1.6, you may be able to get the expected display by running it after &#34;crtmrb16.x -e -m 16&#34;. </span><span class="ja"> 困ったことに、一部のソフトウェアがこのバグに依存した方法でグラフィックパレットを初期化するというバグの上塗りをしているようです。そのようなソフトウェアは IPLROM 1.0～1.3 では正しく動作しているように見えますが、バグが修正された IPLROM 1.6/crtmod16.x の環境で動かすとバグの上塗りが露見して表示が乱れます。IPLROM 1.6 のときだけグラフィックパレットがおかしくなるソフトウェアがあるとき、「crtmrb16.x -e -m 16」としてから動かすと期待通りの表示になるかも知れません。 </span></p><p><span class="en"> When a bug is fixed and another bug is found that hides it, the correct course of action is not to restore the fixed bug, but to fix the newly found bug. Do not use crtmrb16.x on a regular basis, as it is intended to temporarily restore a bug that has been fixed when it is not possible to fix the newly found bug. </span><span class="ja"> あるバグを修正したらそれを隠していた別のバグが見つかったときの正しい対処方法は、修正したバグを復元することではなく、新たに見つかったバグを修正することです。crtmrb16.x は、新たに見つかったバグを修正できない場合に、一時的に、修正したバグを復元するためのものなので、常用しないでください。 </span></p><h4><span class="en"> Font size menu </span><span class="ja"> フォントサイズメニュー </span></h4><p><span class="en"> A <a href="menu.htm#fontsize">font size menu</a> has been added to the <a href="menu.htm#language">language menu</a>. You can choose from very small, small, medium, large, and very large font sizes for menus, buttons, disassembly lists, etc. The change is reflected at the next startup. Added <a href="parameter.htm#fontsize">parameter fontsize</a>. Changed default font size from small to medium. </span><span class="ja"> <a href="menu.htm#language">言語メニュー</a>の中に<a href="menu.htm#fontsize">フォントサイズメニュー</a>を追加しました。 メニュー、ボタン、逆アセンブルリストなどの文字の大きさを極小、小、中、大、極大から選べます。 変更は次回の起動時に反映されます。 <a href="parameter.htm#fontsize">パラメータ fontsize</a>を追加しました。 デフォルトの文字の大きさを小から中に変更しました。 </span></p><h4><span class="en"> Color menu </span><span class="ja"> 色メニュー </span></h4><p><span class="en"> The <a href="menu.htm#color">color menu</a> has been added to the <a href="menu.htm#language">language menu</a>. You can change the color of the window frame, keyboard, menus, buttons, disassembly list, etc. Changes are reflected at the next startup. Parameter hhssbb has been removed and <a href="parameter.htm#hsb">parameter hsb</a> has been added. The interpolation method has been changed from linear interpolation, which uses the minimum and maximum values, to quadratic interpolation, which also uses the center value. The units of HSB were changed from 1/1000, 1/1000, and 1/1000 to 1/360, 1/100, and 1/100. </span><span class="ja"> <a href="menu.htm#language">言語メニュー</a>の中に<a href="menu.htm#color">色メニュー</a>を追加しました。 ウインドウの枠、キーボード、メニュー、ボタン、逆アセンブルリストなどの色を変更できます。 変更は次回の起動時に反映されます。 パラメータ hhssbb を廃止し、<a href="parameter.htm#hsb">パラメータ hsb</a>を追加しました。 補間方法を最小の値と最大の値を用いる線形補間から中央の値も用いる 2 次補間に変更しました。HSB の単位を 1/1000,1/1000,1/1000 から 1/360,1/100,1/100 に変更しました。 </span></p><h3><a href="#changes_0240308" id="changes_0240308">0.24.03.08</a></h3><h4>CRTC</h4><p><span class="en"> Cannot write 0 to bit 0 of CRTC R00. When creating a 384x256, some software programs, in an attempt to make the synchronization frequency the same as that of a 768x512, write 0 to bit 0 of CRTC R00, which is not allowed to write 0. When such software is executed, the actual device does not have the synchronization frequency expected by the software author, but the emulator, which can write 0 to bit 0 of CRTC R00, has the synchronization frequency expected by the software author, resulting in a discrepancy between the operation of the actual device and the emulator. </span><span class="ja"> CRTC R00 のビット 0 に 0 を書き込めないようにしました。384x256 を作るとき、768x512 と同じ同期周波数にしようとして、0 を書き込んではいけない CRTC R00 のビット 0 に 0 を書き込んでいるソフトウェアがあります。 そのようなソフトウェアを実行したとき、実機ではソフトウェアの作者が期待した同期周波数になりませんが、CRTC R00 のビット 0 に 0 を書き込めるエミュレータではソフトウェアの作者が期待した同期周波数になってしまい、実機とエミュレータの動作にずれが生じます。 </span></p><p><span class="en"> Added &#34;Can write 0 to bit 0 of CRTC R00&#34; checkbox to the <a href="menu.htm#modification">modification menu</a>. The change will take effect from the next write to CRTC R00. </span><span class="ja"> <a href="menu.htm#modification">改造メニュー</a>に「CRTC R00 のビット 0 に 0 を書き込める」チェックボックスを追加しました。 変更は次の CRTC R00 への書き込みから反映されます。 </span></p><p><span class="en"> Added <a href="parameter.htm#r00bit0zero">parameter r00bit0zero</a>. </span><span class="ja"> <a href="parameter.htm#r00bit0zero">パラメータ r00bit0zero</a>を追加しました。 </span></p><h4>r00bit0test.x</h4><p><span class="en"> Added <a href="miscfiles.htm#r00bit0testx">r00bit0test.x</a>. Verify that bit 0 of CRTC R00 is fixed to 1. </span><span class="ja"> <a href="miscfiles.htm#r00bit0testx">r00bit0test.x</a>を追加しました。CRTC R00 の bit0 が 1 に固定されていることを確認します。 </span></p><h4>vperiod.x</h4><p><span class="en"> Added <a href="miscfiles.htm#vperiodx">vperiod.x</a>. Measure the vertical period (vertical synchronous signal period). </span><span class="ja"> <a href="miscfiles.htm#vperiodx">vperiod.x</a>を追加しました。 垂直周期 (垂直同期信号の周期) を計測します。 </span></p><h4>IPLROM 1.6 (2024-03-04)</h4><p><span class="en"> The startup screen can now display an operating frequency higher than 65535*12/1000=786.42MHz. Placed [$0CB8].w and [$0CBA].w as longwords in [$0D20].l and [$0D24].l. </span><span class="ja"> 起動画面で 65535*12/1000=786.42MHz より高い動作周波数を表示できるようにしました。[$0CB8].w と [$0CBA].w をロングワードにしたものを [$0D20].l と [$0D24].l に配置しました。 </span></p><p><span class="en"> You can use <a href="miscfiles.htm#stupsndx">stupsnd.x</a> to change the height of the startup sound. </span><span class="ja"> <a href="miscfiles.htm#stupsndx">stupsnd.x</a>を使って起動音の高さを変更できます。 </span></p><p><span class="en"> Changed the timing of displaying &#34;Hit any key&#34; when the L/N/V key is pressed at startup from before to after SCSI bus reset. This eliminates the unnatural appearance that a key is pressed but the device does not start moving immediately. It is not necessary to hold down the L/N/V key until &#34;Hit any key&#34; is displayed. When SCSIINROM displays a message, &#34;Hit any key&#34; is displayed afterwards. </span><span class="ja"> 起動時に L/N/V キーが押されていたとき「Hit any key」を表示するタイミングを SCSI バスリセットの前から後に変更しました。 キーを押したのにすぐに動き出さないように見える不自然さを解消しました。 「Hit any key」が表示されるまで L/N/V キーを押し続けている必要はありません。SCSIINROM がメッセージを表示したときはその後に「Hit any key」が表示されます。 </span></p><h4>stupsnd.x (2024-03-04)</h4><p><span class="en"> In addition to turning the startup sound on and off with <a href="miscfiles.htm#stupsndx">stupsnd.x</a>, the startup sound height can be changed. The startup sound height is specified by a number representing a key code or a string such as o5c. </span><span class="ja"> <a href="miscfiles.htm#stupsndx">stupsnd.x</a>で起動音の on/off に加えて起動音の高さを変更できます。 起動音の高さは、キーコードを表す数字または o5c などの文字列で指定します。 </span></p><h4><span class="en"> How to use IPLROM 1.6 on real machines or other X68000 emulators </span><span class="ja"> 実機または他の X68000 エミュレータで IPLROM 1.6 を使う方法 </span></h4><p><span class="en"> Updated <a href="iplrom16.htm#export">how to use IPLROM 1.6 on real machines or other X68000 emulators</a>. SRAM initialization data now reflects the size of main memory. The procedure has been modified so that it does not affect the XEiJ environment in use. Added instructions for creating CGROM30.DAT. </span><span class="ja"> <a href="iplrom16.htm#export">実機または他の X68000 エミュレータで IPLROM 1.6 を使う方法</a>を更新しました。SRAM 初期化データにメインメモリのサイズが反映されるようにしました。 使用中の XEiJ の環境に影響を及ぼさないように手順を改めました。CGROM30.DAT の作り方を追記しました。 </span></p><h4><span class="en"> Host file system </span><span class="ja"> ホストファイルシステム </span></h4><p><span class="en"> The interpretation of the argument OFFSET of DOS _SEEK depends on MODE. </span><span class="ja"> DOS _SEEK の引数の OFFSET の解釈が MODE によって変わります。 </span></p><ul><li><span class="en"> When MODE is 0, OFFSET is zero-extended. The seekable range is from &#34;first position&#34; to &#34;first position + 4GB - 1&#34;. </span><span class="ja"> MODE が 0 のとき、OFFSET はゼロ拡張されます。 シーク可能範囲は「先頭位置」から「先頭位置 +4GB-1」までです。 </span></li><li><span class="en"> When MODE is 1, OFFSET is sign-extended. The seekable range is from &#34;current position - 2GB&#34; to &#34;current position + 2GB - 1&#34;. </span><span class="ja"> MODE が 1 のとき、OFFSET は符号拡張されます。 シーク可能範囲は「現在位置 -2GB」から「現在位置 +2GB-1」までです。 </span></li><li><span class="en"> When MODE is 2, OFFSET is zero-extended for 0 and one-extended for non-zero. The seekable range is from &#34;end position - 4GB + 1&#34; to &#34;end position&#34;. </span><span class="ja"> MODE が 2 のとき、OFFSET は 0 はゼロ拡張、0 以外はイチ拡張されます。 シーク可能範囲は「終端位置 -4GB+1」から「終端位置」までです。 </span></li></ul><h3><a href="#changes_0240208" id="changes_0240208">0.24.02.08</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 21.0.2. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 21.0.2 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4><span class="en"> File menu </span><span class="ja"> ファイルメニュー </span></h4><p><span class="en"> Fixed a bug that prevented the parameters scappreboot, hfreadonly, and hfappreboot from being saved. </span><span class="ja"> パラメータ scappreboot、hfreadonly、hfappreboot が保存されないバグを修正しました。 </span></p><h4><span class="en"> RS-232C, terminal, and serial port </span><span class="ja"> RS-232C とターミナル </span></h4><p><span class="en"> When interconnecting RS-232C, terminal and serial ports, data is now routed through a queue. </span><span class="ja"> RS-232C とターミナルとシリアルポートを相互に接続するとき、データがキューを経由するようにしました。 </span></p><p><span class="en"> Added 57600, 76800, and 115200 baud rate options in <a href="feature.htm#rs232candterminal">RS-232C and terminal</a>. </span><span class="ja"> <a href="feature.htm#rs232candterminal">RS-232C とターミナル</a>のボーレートの選択肢に 57600、76800、115200 を追加しました。 </span></p><p><span class="en"> Added 7.5MHz checkbox. Changes the SCC operating frequency from 5MHz to 7.5MHz. The connection must be initialized using <a href="miscfiles.htm#set232cx">misc/set232c.x</a> or similar to reflect the changes. </span><span class="ja"> 7.5MHz チェックボックスを追加しました。SCC の動作周波数を 5MHz から 7.5MHz に変更します。 変更を反映させるには<a href="miscfiles.htm#set232cx">misc/set232c.x</a>などを使って接続を初期化する必要があります。 </span></p><h4>SCC</h4><p><span class="en"> The SCC operating frequency can be specified with the <a href="parameter.htm#sccfreq">parameter sccfreq</a>. The possible values are either 5000000 or 7500000. </span><span class="ja"> <a href="parameter.htm#sccfreq">パラメータ sccfreq</a>で SCC の動作周波数を指定できます。 指定できる値は 5000000 または 7500000 のいずれかです。 </span></p><h4>IPLROM 1.6 (2024-02-02)</h4><p><span class="en"> Measure the transfer rate of the DMAC displayed on the startup screen with the instruction cache disabled. </span><span class="ja"> 起動画面に表示する DMAC の転送速度の計測を命令キャッシュを無効にした状態で行います。 </span></p><p><span class="en"> Added patch for IOCS _SET232C. </span><span class="ja"> IOCS _SET232C のパッチを追加しました。 </span></p><ul><li><span class="en"> Enabled to use baud rate 8=19200bps. IPLROM 1.3&#39;s IOCS _SET232C can select baud rate 8=19200bps, but the values of SCC WR13:WR12 are wrong, and even if the start bit is synchronized, the stop bit will be off by about 1 bit, so it could not be used. </span><span class="ja"> ボーレート 8=19200bps を使えるようにしました。IPLROM 1.3 の IOCS _SET232C はボーレート 8=19200bps を選択できますが、SCC WR13:WR12 の値が間違っており、スタートビットが同期されてもストップビットまでにおよそ 1 ビットずれてしまうので使えませんでした。 </span></li><li><span class="en"> Baud rate 9=38400bps and 10=76800bps can be selected. It doesn&#39;t necessarily mean it can be used. Since it does not support RTS/CTS, its practicality is unknown. When the operating frequency of SCC is 7.5MHz, 9=57600bps and 10=115200bps. </span><span class="ja"> ボーレート 9=38400bps と 10=76800bps を選択できるようにしました。 使えるとは限りません。RTS/CTS に対応していないので実用性は不明です。SCC の動作周波数が 7.5MHz のとき 9=57600bps と 10=115200bps になります。 </span></li><li><span class="en"> Reliably ignores RTS/CTS selection. Although it does not support RTS/CTS, there was a problem where the baud rate would become 4=1200bps just by selecting it. </span><span class="ja"> RTS/CTS の選択を確実に無視します。RTS/CTS には対応していませんが、選択されているだけでボーレートが 4=1200bps になってしまう問題がありました。 </span></li></ul><h4><span class="en"> RSDRV.SYS patches </span><span class="ja"> RSDRV.SYS のパッチ </span></h4><p><span class="en"> When RSDRV.SYS 2.02 is built in, it will be patched in memory. </span><span class="ja"> RSDRV.SYS 2.02 が組み込まれたときメモリ上でパッチをあてます。 </span></p><ul><li><span class="en"> The receive buffer size is changed from 64 bytes to 1024 bytes. </span><span class="ja"> 受信バッファサイズが 64 バイトから 1024 バイトに変更されます。 </span></li><li><span class="en"> The maximum baud rate that can be specified in IOCS _SET232C was 38400bps and the maximum baud rate that can be stored in SRAM was 19200bps, but both will be 76800bps. 38400bps and 76800bps can be specified in <a href="miscfiles.htm#set232cx">misc/set232c.x</a>. Note that using SPEED.X or SWITCH.X will restore the original settings. </span><span class="ja"> IOCS _SET232C で指定できるボーレートの上限は 38400bps、SRAM に保存できるボーレートの上限は 19200bps でしたが、いずれも 76800bps になります。38400bps と 76800bps は<a href="miscfiles.htm#set232cx">misc/set232c.x</a>で指定できます。SPEED.X や SWITCH.X を使うと元に戻ってしまうので注意してください。 </span></li></ul><h4>misc/set232c.x</h4><p><span class="en"> <a href="miscfiles.htm#set232cx">misc/set232c.x</a> added. Change the current or startup RS-232C settings. 38400bps and 76800bps can be specified. Note that using SPEED.X or SWITCH.X will restore the original settings. </span><span class="ja"> <a href="miscfiles.htm#set232cx">misc/set232c.x</a>を追加しました。 現在または起動時の RS-232C の設定を変更します。38400bps と 76800bps を指定できます。SPEED.X や SWITCH.X を使うと元に戻ってしまうので注意してください。 </span></p><h4>misc/stupsnd.x</h4><p><span class="en"> <a href="miscfiles.htm#stupsndx">misc/stupsnd.x</a> added. Turn on/off startup sound switch of X68030 or higher and IPLROM 1.6. </span><span class="ja"> <a href="miscfiles.htm#stupsndx">misc/stupsnd.x</a>を追加しました。X68030 以上と IPLROM 1.6 の起動音のスイッチを ON/OFF します。 </span></p><h3><a href="#changes_0231208" id="changes_0231208">0.23.12.08</a></h3><h4>IPLROM 1.6/crtmod16.x</h4><p><span class="en"> Calling IOCS _CRTMOD with D1.W=$16FF returns D0.L=$16xxxxxxx when the sync frequency for CRT is selected and D0.L=$96xxxxxxx when the sync frequency for LCD is selected. The difference from the call with D1.W=$56FF is that the flags for CRT and LCD are added to bit 31 of the result. </span><span class="ja"> IOCS _CRTMOD を D1.W=$16FF で呼び出すと、CRT 向けの同期周波数が選択されているときは D0.L=$16xxxxxx が、LCD 向けの同期周波数が選択されているときは D0.L=$96xxxxxx が返ります。D1.W=$56FF で呼び出したときとの違いは、結果のビット 31 に CRT 向けと LCD 向けのフラグが追加されていることです。 </span></p><h4>crtmodtest.x</h4><p><span class="en"> When the synchronization frequency for CRT and LCD is selected with option -l, the synchronization frequency is restored before exiting. When option -s is specified, the synchronization frequency is not restored but saved in SRAM. </span><span class="ja"> オプション -l で CRT 向けと LCD 向けの同期周波数を選択したとき、同期周波数を元に戻してから終了するようにしました。 オプション -s を指定すると同期周波数を元に戻さず SRAM に保存します。 </span></p><h4><span class="en"> RS-232C and terminal </span><span class="ja"> RS-232C とターミナル </span></h4><p><span class="en"> Fixed a bug that prevented the Communication Settings and Transfer buttons from being enabled or disabled when changing connections. </span><span class="ja"> 接続を変更したとき通信設定と転送のボタンが有効または無効にならないバグを修正しました。 </span></p><h4>CRTC</h4><p><span class="en"> Fixed a bug that prevented full-screen redrawing when the scroll position in the Y direction on the text and graphics screens was changed. </span><span class="ja"> テキスト画面とグラフィック画面の Y 方向のスクロール位置が変更されたとき全画面再描画が行われないことがあるバグを修正しました。 </span></p><p><span class="en"> Fixed behavior when the scroll position in the X direction of the text screen is outside the range of cylindrical scrolling. </span><span class="ja"> テキスト画面の X 方向のスクロール位置が円筒スクロールの範囲外のときの動作を修正しました。 </span></p><h4>cylindertest.x</h4><p><span class="smallimg"><img alt="cylindertest.png" src="cylindertest.png"></span></p><p><span class="en"> Test the cylindrical scrolling of the text screen. Use the cursor keys to move, the CTRL key to move fast, and the ESC key to exit. </span><span class="ja"> テキスト画面の円筒スクロールをテストします。 カーソルキーで移動、CTRL キーで高速移動、ESC キーで終了します。 </span></p><h4><span class="en"> Aspect ratio </span><span class="ja"> アスペクト比 </span></h4><p><span class="en"> For the 256x256, 384x256, 512x512, and 768x512 resolutions, the screen aspect ratio can be selected from 4:3 (1.333), 7:5 (1.400), 13:9 (1.444), and 3:2 (1.500), respectively. The default screen aspect ratios are 4:3 (1.333) for 256x256, 384x256, and 512x512, and 3:2 (1.500) for 768x512. </span><span class="ja"> 解像度 256x256、384x256、512x512、768x512 について、それぞれ画面アスペクト比を 4:3 (1.333)、7:5 (1.400)、13:9 (1.444)、3:2 (1.500) から選べます。 デフォルトの画面アスペクト比は、256x256、384x256、512x512 が 4:3 (1.333)、768x512 が 3:2 (1.500) です。 </span></p><p><span class="en"> HRL square pixel checkbox in the <a href="menu.htm#display">display menu</a> has been eliminated and an <a href="menu.htm#aspectratio">aspect ratio menu</a> has been added. Selecting 384x256 3:2 (1.500) @ 1:1 (1.000) will give the same aspect ratio as HRL square pixel. Changes take effect immediately. </span><span class="ja"> <a href="menu.htm#display">画面メニュー</a>の HRL 正方形ピクセルチェックボックスを廃止し、<a href="menu.htm#aspectratio">アスペクト比メニュー</a>を追加しました。384x256 3:2 (1.500) @ 1:1 (1.000) を選択すると HRL 正方形ピクセルと同じアスペクト比になります。 変更は直ちに反映されます。 </span></p><p><span class="en"> The parameter hrlsquare was removed and the <a href="parameter.htm#aspectratioNxN">parameter aspectratioNxN</a> was added. Specifying aspectratio384x384=3:2 will give the same aspect ratio as hrlsquare=on. </span><span class="ja"> パラメータ hrlsquare を廃止し、<a href="parameter.htm#aspectratioNxN">パラメータ aspectratioNxN</a>を追加しました。aspectratio384x384=3:2 を指定すると hrlsquare=on と同じアスペクト比になります。 </span></p><h4><span class="en"> MEGA DRIVE 6 button pad </span><span class="ja"> メガドラ 6 ボタンパッド </span></h4><p><span class="en"> Corrected 1111MXYZ to 1CB1MXYZ. 1SA100DU immediately following 1CB1MXYZ was corrected to 1SA1111. </span><span class="ja"> 1111MXYZ を 1CB1MXYZ に修正しました。1CB1MXYZ の直後の 1SA100DU を 1SA11111 に修正しました。 </span></p><h3><a href="#changes_0231108" id="changes_0231108">0.23.11.08</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 21.0.1. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 21.0.1 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4><span class="en"> IPLROM 1.6/CRTMOD16.X </span><span class="ja"> IPLROM 1.6/CRTMOD16.X </span></h4><p><span class="en"> Calling IOCS _CRTMOD with D1.W=$56FF returns D0.L=$16xxxxxx. </span><span class="ja"> IOCS _CRTMOD を D1.W=$56FF で呼び出すと D0.L=$16xxxxxx が返ります。 </span></p><h4><span class="en"> CRTC </span><span class="ja"> CRTC </span></h4><p><span class="en"> Mimics the phenomenon that the text screen collapses when the scroll position in the x-direction of the text screen is outside the range of cylindrical scrolling. Turning on <a href="menu.htm#sphericalscrolling">spherical scrolling of text screen checkbox</a> in the <a href="menu.htm#modification">modification menu</a> will prevent the text screen from collapsing. This setting is saved in the <a href="parameter.htm#sphericalscrolling">parameter sphericalscrolling</a>. Changes will take effect immediately. </span><span class="ja"> テキスト画面の X 方向のスクロール位置が円筒スクロールの範囲外のときテキスト画面が崩れる現象を模倣します。 <a href="menu.htm#modification">改造メニュー</a>の<a href="menu.htm#sphericalscrolling">テキスト画面の球面スクロールチェックボックス</a>を ON にするとテキスト画面が崩れなくなります。 この設定は<a href="parameter.htm#sphericalscrolling">パラメータ sphericalscrolling</a>に保存されます。 変更は直ちに反映されます。 </span></p><h3><a href="#changes_0231008" id="changes_0231008">0.23.10.08</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 21. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 21 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4><span class="en"> Host file system </span><span class="ja"> ホストファイルシステム </span></h4><p><span class="en"> To stabilize music playback during read/write, data transfer between buffer and memory is divided every 128 bytes. </span><span class="ja"> 読み書き中の音楽再生を安定させるために、バッファ・メモリ間のデータ転送を 128 バイト毎に分割するようにしました。 </span></p><p><span class="en"> To reduce wait cycles, data transfer between buffer and memory has been changed from byte units to longword units. </span><span class="ja"> ウェイトサイクルを減らすために、バッファ・メモリ間のデータ転送をバイト単位からロングワード単位に変更しました。 </span></p><h4><span class="en"> Dialog to open image files and directories </span><span class="ja"> イメージファイルとディレクトリを開くダイアログ </span></h4><p><span class="en"> The state of the Read-only checkbox is stored in the <a href="parameter.htm#fdreadonly">parameter fdreadonly</a> for FD, the <a href="parameter.htm#sareadonly">parameter sareadonly</a> for SASI, the <a href="parameter.htm#screadonly">parameter screadonly</a> for SCSI and the <a href="parameter.htm#hfreadonly">parameter hfreadonly</a> for HFS. The Read-only checkbox in the dialog is valid for the image files and directories selected in the dialog. Image files specified without &#34;:R&#34; in the parameters or dropped into the window will always open with write permission. </span><span class="ja"> 書き込み禁止チェックボックスの状態が、FD は<a href="parameter.htm#fdreadonly">パラメータ fdreadonly</a>に、SASI は<a href="parameter.htm#sareadonly">パラメータ sareadonly</a>に、SCSI は<a href="parameter.htm#screadonly">パラメータ screadonly</a>に、そして HFS は<a href="parameter.htm#hfreadonly">パラメータ hfreadonly</a>に保存されます。 ダイアログにある書き込み禁止チェックボックスは、ダイアログで選択したイメージファイルとディレクトリに対して有効です。 パラメータで「:R」を付けずに指定したイメージファイルやウインドウにドロップしたイメージファイルは、常に書き込みが許可された状態で開きます。 </span></p><p><span class="en"> Radio buttons have been added to the left of the &#34;Reboot from it&#34; button and the left of the &#34;Open&#34; button so that you can choose which button is pressed when you double-click on a file name. Default behavior when double-clicking on a file name has been changed from &#34;Reboot from it&#34; to &#34;Open&#34;. This setting is stored in the <a href="parameter.htm#fdappreboot">parameter fdappreboot</a> for FD, the <a href="parameter.htm#saappreboot">parameter saappreboot</a> for SASI, the <a href="parameter.htm#scappreboot">parameter scappreboot</a> for SCSI and the <a href="parameter.htm#hfappreboot">parameter hfappreboot</a> for HFS. </span><span class="ja"> 「ここから再起動」ボタンと「開く」ボタンの左側にラジオボタンを追加し、ファイル名をダブルクリックしたときどちらのボタンが押されたことにするか選べるようにしました。 ファイル名をダブルクリックしたときのデフォルトの動作を「ここから再起動」から「開く」に変更しました。 この設定が、FD は<a href="parameter.htm#fdappreboot">パラメータ fdappreboot</a>に、SASI HD は<a href="parameter.htm#saappreboot">パラメータ saappreboot</a>に、SCSI は<a href="parameter.htm#scappreboot">パラメータ scappreboot</a>に、そして HFS は<a href="parameter.htm#hfappreboot">パラメータ hfappreboot</a>に保存されます。 </span></p><p><span class="en"> A history of the selected image files and directories is stored in the <a href="parameter.htm#fdhistoryN">parameter fdhistoryN</a> for FD, the <a href="parameter.htm#sahistoryN">parameter sahistoryN</a> for SASI, the <a href="parameter.htm#schistoryN">parameter schistoryN</a> for SCSI and the <a href="parameter.htm#hfhistoryN">parameter hfhistoryN</a> for HFS. Selecting &#34;Clear history&#34; at the bottom of the history will display a dialog asking if you want to clear the history. </span><span class="ja"> 選択したイメージファイルとディレクトリの履歴が、FD は<a href="parameter.htm#fdhistoryN">パラメータ fdhistoryN</a>に、SASI HD は<a href="parameter.htm#sahistoryN">パラメータ sahistoryN</a>に、SCSI は<a href="parameter.htm#schistoryN">パラメータ schistoryN</a>に、そして HFS は<a href="parameter.htm#hfhistoryN">パラメータ hfhistoryN</a>に保存されます。 履歴の一番下の「履歴を消去する」を選択すると、履歴を消去するか問い合わせるダイアログが表示されます。 </span></p><p><span class="en"> The behavior when a disk image file is dropped onto a window has been changed from &#34;Reboot from it&#34; to &#34;Open&#34;. </span><span class="ja"> ディスクイメージファイルをウインドウにドロップしたときの動作を、「ここから再起動」から「開く」に変更しました。 </span></p><h4><span class="en"> Memory dump list </span><span class="ja"> メモリダンプリスト </span></h4><p><span class="en"> A second bridge checkbox has been added. When a 2-byte character that straddles a 16-byte boundary is written at the end of a line, you can select whether the same character is also written at the beginning of the next line. </span><span class="ja"> セカンドブリッジチェックボックスを追加しました。16 バイト境界を跨ぐ 2 バイトの文字を行末に書いたとき、同じ文字を次の行の行頭にも書くか選択できます。 </span></p><p><span class="en"> When writing a character that straddles a 16-byte boundary both at the end of a line and at the beginning of the next line, draw a line on either side of the character area to darken the overflow of the character. </span><span class="ja"> 16 バイト境界を跨ぐ文字を行末と次の行の行頭の両方に書くとき、キャラクタエリアの左右に線を描いて文字のはみ出した部分を暗くします。 </span></p><h4><span class="en"> RS-232C and terminal </span><span class="ja"> RS-232C とターミナル </span></h4><p><span class="en"> Only the terminal will expand and contract when the window size is changed. </span><span class="ja"> ウインドウの大きさを変更したときターミナルだけ伸び縮みするようにしました。 </span></p><h4><span class="en"> FE function instructions </span><span class="ja"> FE ファンクション命令 </span></h4><p><span class="en"> Fixed a bug that caused an ArrayIndexOutOfBoundsException when executing print gcvt(1e+18,19) in X-BASIC when the FE function instruction is enabled. (Thanks TcbnErik) </span><span class="ja"> FE ファンクション命令を有効にしているとき X-BASIC で print gcvt(1e+18,19) を実行すると ArrayIndexOutOfBoundsException が出るバグを修正しました。(Thanks TcbnErik) </span></p><p><span class="en"> Fixed a bug that caused an ArrayIndexOutOfBoundsException when executing print gcvt(1,0) in X-BASIC when the FE function instruction is enabled. </span><span class="ja"> FE ファンクション命令を有効にしているとき X-BASIC で print gcvt(1,0) を実行すると ArrayIndexOutOfBoundsException が出るバグを修正しました。 </span></p><h4><span class="en"> Keyboard display </span><span class="ja"> キーボードの表示 </span></h4><p><span class="en"> When the brightness specified by the parameter hhssbb is in descending order, the color scheme of the keyboard is switched so that the keys do not appear concave. </span><span class="ja"> パラメータ hhssbb で指定された輝度が降順のときキーボードの配色を入れ替えてキーが凹んで見えないようにしました。 </span></p><h4><span class="en"> misc/060tsys/060turbo.sys </span><span class="ja"> misc/060tsys/060turbo.sys </span></h4><p><span class="en"> 060turbo.sys 0.59 is now included. The changes from 0.58 are as follows. </span><span class="ja"> 060turbo.sys 0.59 を同梱しました。0.58 からの変更点は以下の通りです。 </span></p><ul><li><span class="en"> Fixed a bug that tried to use move16 at 68030. </span><span class="ja"> 68030 のとき move16 を使おうとするバグを修正しました。 </span></li></ul><h4><span class="en"> IPLROM 1.6 </span><span class="ja"> IPLROM 1.6 </span></h4><p><span class="en"> Starting up while holding down the Q key will enter a mode in which the startup screen is not displayed. This mode is released by starting up while holding down the L, N, or V key. This mode is stored in bit 1 of $00ED0095 in the battery-backed SRAM. </span><span class="ja"> Q キーを押しながら起動すると起動画面を表示しないモードになります。 このモードは L キー、N キー、V キーのいずれかを押しながら起動すると解除されます。 このモードはバッテリバックアップ SRAM の $00ED0095 のビット 1 に保存されます。 </span></p><h4><span class="en"> misc/optime.x </span><span class="ja"> misc/optime.x </span></h4><p><span class="en"> Fixed a bug that caused a bus error if &#34;...&#34; written in the command line was not closed. </span><span class="ja"> コマンドラインに書かれた &#34;…&#34; が閉じていないとバスエラーが出るバグを修正しました。 </span></p><h4><span class="en"> Z keyboard support </span><span class="ja"> Z キーボード対応 </span></h4><p><span class="en"> Changed device path search criteria from &#34;paths containing the first vid_33dd&amp;pid_0011&amp;mi_01&amp;col05 found&#34; to &#34;paths containing the last vid_33dd&amp;pid_0011&amp;mi_01&amp;col05 found&#34;. </span><span class="ja"> デバイスパスの検索条件を「最初に見つかった vid_33dd&amp;pid_0011&amp;mi_01&amp;col05 を含むパス」から「最後に見つかった vid_33dd&amp;pid_0011&amp;mi_01&amp;col05 を含むパス」へ変更しました。 </span></p><p><span class="en"> The debug flag checkbox has been added to the <a href="menu.htm#zkeyboard">Z keyboard menu</a>. If it is turned on before connecting, information will be output when connecting. </span><span class="ja"> <a href="menu.htm#zkeyboard">Z キーボードメニュー</a>に<a href="menu.htm#zkeyboard_debugflag">デバッグフラグチェックボックス</a>を追加しました。 接続する前に ON にしておくと接続するとき情報が出力されます。 </span></p><p><span class="en"> Fixed a problem in which the CLR key was sometimes entered when the Z keyboard connection was terminated. </span><span class="ja"> Z キーボードの接続を終了したとき CLR キーが入力されることがある不具合を修正しました。 </span></p><h3><a href="#changes_0230808" id="changes_0230808">0.23.08.08</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 20.0.2 2023-07-18. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 20.0.2 2023-07-18 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4><span class="en"> Boot device menu </span><span class="ja"> 起動デバイスメニュー </span></h4><p><span class="en"> &#34;Default&#34; in the <a href="menu.htm#bootdevice">boot device menu</a> has been changed to &#34;Follow settings in SWITCH.X&#34;. </span><span class="ja"> <a href="menu.htm#bootdevice">起動デバイスメニュー</a>の「既定」の表記を「SWITCH.X の設定に従う」に変更しました。 </span></p><h4><span class="en"> File menu </span><span class="ja"> ファイルメニュー </span></h4><p><span class="en"> Changed the color scheme of the icons of unconnected units in the <a href="menu.htm#file">file menu</a>. </span><span class="ja"> <a href="menu.htm#file">ファイルメニュー</a>の未接続のユニットのアイコンの配色を変更しました。 </span></p><h4>FDC</h4><p><span class="en"> The interval between motor ON, rising READY and state transition interrupt requests has been changed to avoid the problem of IOCS _B_DRVSNS hanging up. </span><span class="ja"> IOCS _B_DRVSNS がハングアップする不具合を回避するため、モータ ON と READY 立ち上がりと状態遷移割り込み要求の間隔を変更しました。 </span></p><h4><span class="en"> GIF animation recording </span><span class="ja"> GIF アニメーション録画 </span></h4><p><span class="en"> The maximum waiting time for <a href="feature.htm#gifanimationrecording">GIF animation recording</a> was changed from 10 to 30 seconds. </span><span class="ja"> <a href="feature.htm#gifanimationrecording">GIF アニメーション録画</a>の待ち時間の最大値を 10 秒から 30 秒に変更しました。 </span></p><h4><span class="en"> High memory </span><span class="ja"> ハイメモリ </span></h4><p><span class="en"> Added use high memory on 060turbo checkbox to the <a href="menu.htm#highmemory">high memory on X68030/Xellent30 menu</a>. X68030 and Xellent30 can use large amount of high memory starting from address $10000000. If enabled, the previous high memory starting at $01000000 will no longer be available. This setting is stored in the <a href="parameter.htm#highmemory060turbo">parameter highmemory060turbo</a>. </span><span class="ja"> <a href="menu.htm#highmemory">X68030/Xellent30 のハイメモリメニュー</a>に 060turbo のハイメモリを使うチェックボックスを追加しました。X68030 と Xellent30 でアドレス $10000000 から始まる大容量のハイメモリが使えます。 これを有効にすると従来の $01000000 から始まるハイメモリは使えなくなります。 この設定は<a href="parameter.htm#highmemory060turbo">パラメータ highmemory060turbo</a>に保存されます。 </span></p><p><span class="en"> Added 384 MB, 512 MB, and 768 MB to the capacity of high memory on 060turbo. You can select them in the <a href="menu.htm#localmemory">high memory on 060turbo menu</a> and <a href="parameter.htm#localmemory">parameter localmemory</a>. While increasing the capacity of high memory increases what can be done, software that does not support high memory is more likely to malfunction. It is recommended to set it to 128 MB or less, the same as the actual device, when not needed. Also note that saving the contents of a large amount of high memory will cause the configuration file to become huge and take longer to start up and close. </span><span class="ja"> 060turbo のハイメモリの容量に 384MB、512MB、768MB を追加しました。 <a href="menu.htm#localmemory">060turbo のハイメモリメニュー</a>と<a href="parameter.htm#localmemory">パラメータ localmemory</a>で選択できます。 ハイメモリの容量を増やすことでできることが増える一方、ハイメモリに対応していないソフトウェアは誤動作しやすくなります。 必要でないときは実機と同じ 128MB 以下に設定しておくことをお勧めします。 また、大容量のハイメモリの内容を保存すると設定ファイルが巨大化して起動と終了に時間がかかるので注意してください。 </span></p><h4><span class="en"> IPLROM 1.6 </span><span class="ja"> IPLROM 1.6 </span></h4><p><span class="en"> The RTC date and time are displayed on the <a href="iplrom16.htm#startupscreen">IPLROM 1.6 startup screen</a>. The date and time will be strikethrough if there is an incorrect BCD, a non-existent date and time, an obviously past date, or an incorrect day of the week. </span><span class="ja"> <a href="iplrom16.htm#startupscreen">IPLROM 1.6 の起動画面</a>に RTC の日時が表示されます。 不正な BCD、存在しない日時、明らかに過去の日付、または曜日の誤りがあるとき、日時に取り消し線が表示されます。 </span></p><p><span class="en"> Changed unimplemented exception handling routines in <a href="iplrom16.htm">IPLROM 1.6</a>. When a bus error or address error occurred on the 68000, the exception stack frame is no longer dug up. The exception stack frame for bus errors and address errors on the 68000 is deeper than the status register with additional information such as the direction of transfer and the address that was attempted to be accessed. The previous unimplemented exception handling routines would dig up the exception stack frame to the location of the status register, so the TRAP#14 (error display) routine could not reference the additional information. </span><span class="ja"> <a href="iplrom16.htm">IPLROM 1.6</a>の未実装例外処理ルーチンを変更しました。68000 でバスエラーまたはアドレスエラーが発生したとき、例外スタックフレームを掘り起こさないようにしました。68000 のバスエラーとアドレスエラーの例外スタックフレームは、転送方向やアクセスしようとしたアドレスなどの追加情報がステータスレジスタよりも深い場所にあります。 従来の未実装例外処理ルーチンはステータスレジスタの位置まで例外スタックフレームを掘り起こしてしまうため、TRAP#14(エラー表示) ルーチンが追加情報を参照することができませんでした。 </span></p><p><span class="en"> A simple TRAP#14 (error display) routine has been added to <a href="iplrom16.htm">IPLROM 1.6</a>. When an error occurs during startup, the error code and program counter are displayed. When a bus error or address error occurs, it also displays the transfer direction and the address that was attempted to be accessed. When nothing is displayed and the unit hangs up, the program counter may be checked by pressing the INTERRUPT switch. Conventionally, when an error occurs during startup, the message &#34;An error has occurred. Please reset.&#34; but it was not clear where or what kind of error had occurred. </span><span class="ja"> <a href="iplrom16.htm">IPLROM 1.6</a>に簡易的な TRAP#14(エラー表示) ルーチンを追加しました。 起動中にエラーが発生したとき、エラーコードとプログラムカウンタを表示します。 バスエラーまたはアドレスエラーが発生したときは、転送方向とアクセスしようとしたアドレスも表示します。 何も表示されずハングアップしたとき、INTERRUPT スイッチを押すとプログラムカウンタを確認できるかも知れません。 従来は、起動中にエラーが発生したとき「エラーが発生しました。リセットしてください。」と表示されるだけで、どこでどのようなエラーが発生したのか分かりませんでした。 </span></p><h4><span class="en"> JoyPortUkun </span><span class="ja"> じょいぽーと U 君 </span></h4><p><span class="en"> <a href="https://fazecast.github.io/jSerialComm/" target="_blank">jSerialComm</a> is used for connecting to the <a href="feature.htm#joyportukun">JoyPortUkun</a> except Windows. You may be able to use the JoyPortUkun on macOS and Linux. On Windows, the conventional native code is used for connecting to the JoyPortUkun, but jSerialComm can also be selected. Added <a href="parameter.htm#ukunjsc">parameter ukunjsc</a>. </span><span class="ja"> Windows 以外のとき、<a href="feature.htm#joyportukun">じょいぽーと U 君</a>との接続に<a href="https://fazecast.github.io/jSerialComm/" target="_blank">jSerialComm</a>を使用します。macOS や Linux でもじょいぽーと U 君が使えるかも知れません。Windows のときはじょいぽーと U 君との接続に従来の native コードを使用しますが、jSerialComm も選択できます。 <a href="parameter.htm#ukunjsc">パラメータ ukunjsc</a>を追加しました。 </span></p><p><span class="en"> Added output interval adjustment to stabilize the initialization sequence of Shiromadokun. The interval between writes to PPI is measured in virtual time and real time, respectively. If the virtual time interval is shorter, a wait cycle is added. If the real time interval is shorter, an empty loop is added with an upper limit of 500 us to reduce the gap between the virtual time interval and the real time interval. The load factor increases when adding an empty loop. This feature is enabled by <a href="parameter.htm#ukuninterval">parameter ukuninterval</a>. </span><span class="ja"> 白窓君の初期化シーケンスを安定させるため、出力間隔調整を追加しました。PPI への書き込みの間隔を仮想時間と実時間でそれぞれ計測します。 仮想時間の間隔の方が短ければウェイトサイクルを、実時間の間隔の方が短ければ空ループを、500us を上限として追加することで、仮想時間の間隔と実時間の間隔のずれを軽減します。 空ループを追加するとき負荷率が高くなります。 この機能は<a href="parameter.htm#ukuninterval">パラメータ ukuninterval</a>で有効になります。 </span></p><h4><span class="en"> Keyboard display </span><span class="ja"> キーボードの表示 </span></h4><p><span class="en"> Keyboard display now reflects LED brightness (bright, slightly bright, slightly dark, dark). The following is an example of using KeyWitch to make LEDs blink. </span><span class="ja"> キーボードの表示に LED の明るさ (明るい、やや明るい、やや暗い、暗い) を反映させるようにしました。 以下は KeyWitch を用いて LED を明滅させる例です。 </span></p><pre>A:\&gt;<kbd>echo &amp;unlockblink $19 0 0 1 2 3 3 2 1 &gt; blink.env</kbd>
A:\&gt;<kbd>KeyWitch blink.env</kbd></pre><h4><span class="en"> Mouse wheel </span><span class="ja"> マウスホイール </span></h4><p><span class="en"> The functions performed when the mouse wheel is rotated on the screen were Trace and Step, but now you can choose to left-click, right-click, or do nothing. When left and right click are selected, left click is performed when the mouse wheel is rotated down and right click is performed when the mouse wheel is rotated up. The buttons are pressed for 100 ms. Added the <a href="menu.htm#mousewheel">mouse wheel menu</a>. Added <a href="parameter.htm#mousewheel">parameter mousewheel</a>. </span><span class="ja"> 画面上でマウスホイールを回転させたとき実行される機能はトレースとステップでしたが、左クリックと右クリックおよび何もしないを選択できるようにしました。 左クリックと右クリックを選択すると、マウスホイールを下へ回転させたとき左クリック、上へ回転させたとき右クリックになります。 ボタンが押されている時間は 100ms です。 <a href="menu.htm#mousewheel">マウスホイールメニュー</a>を追加しました。 <a href="parameter.htm#mousewheel">パラメータ mousewheel</a>を追加しました。 </span></p><h4><span class="en"> RS-232C and terminal </span><span class="ja"> RS-232C とターミナル </span></h4><ul><li><span class="en"> RS-232C on X680x0 on XEiJ </span><span class="ja"> XEiJ 上の X680x0 の RS-232C </span></li><li><span class="en"> Terminal on XEiJ </span><span class="ja"> XEiJ のターミナル </span></li><li><span class="en"> Host machine serial port </span><span class="ja"> ホストマシンのシリアルポート </span></li></ul><p><span class="en"> From the above three, you can choose two to connect. In the following, they are written as RS-232C, terminal, and serial port, respectively. </span><span class="ja"> 以上の 3 つから、2 つを選んで接続できるようにしました。 以下ではそれぞれ RS-232C、ターミナル、シリアルポートと書きます。 </span></p><p><span class="en"> For example, small file exchanges can be made between the emulator and the actual machine. </span><span class="ja"> 例えば、エミュレータと実機の間で小規模なファイル交換ができます。 </span></p><ol><li><span class="en"> Prepare a serial port on the host machine and connect it directly to the actual X680x0 machine with an RS-232C crossover cable. </span><span class="ja"> ホストマシンにシリアルポートを用意して RS-232C クロスケーブルで X680x0 実機と直結します。 </span></li><li><span class="en"> Connect the terminal to the serial port and send ZM.X (and RSDRV.SYS if necessary) to the actual X680x0 device with the terminal function. </span><span class="ja"> ターミナルとシリアルポートを接続し、ターミナルの機能で X680x0 実機に ZM.X(と必要ならば RSDRV.SYS) を送信します。 </span></li><li><span class="en"> Connecting the RS-232C and serial port creates a file exchange environment using ZM.X between the emulator and the actual device. </span><span class="ja"> RS-232C とシリアルポートを接続すると、エミュレータと実機の間で ZM.X によるファイル交換環境が出来上がります。 </span></li></ol><p><span class="en"> The sxmr.bas and TeraTerm written in <a href="http://retropc.net/x68000/data/exchange/" target="_blank">file exchange with Windows</a> are no longer needed and only XEiJ and ZM.X are needed for file exchange. RSDRV.SYS is on the Human68k 3.0 system disk and is used to set flow control to RTS. </span><span class="ja"> <a href="http://retropc.net/x68000/data/exchange/" target="_blank">Windows とのファイル交換</a>に書いた sxmr.bas と TeraTerm は不要になり、XEiJ と ZM.X だけでファイル交換ができます。RSDRV.SYS は Human68k 3.0 のシステムディスクに入っていてフロー制御を RTS にするとき使います。 </span></p><p><span class="en"> Select RS-232C and terminal from the config menu to open the RS232C and terminal window. The RS-232C and terminal window is divided into connection, communication settings, transfer, and terminal. </span><span class="ja"> 「設定」メニューの「RS-232C とターミナル」を選択すると「RS232C とターミナル」ウインドウが開きます。 「RS232C とターミナル」ウインドウは「接続」、「通信設定」、「転送」、「ターミナル」に分かれています。 </span></p><p><span class="en"> In the &#34;Connection&#34; section of the &#34;RS232C and terminal&#34; window, you can select whether to connect to a terminal (Terminal), RS-232C (AUX), or serial port (COM3, etc.). This setting is stored in the <a href="parameter.htm#rs232cconnection">parameter rs232cconnection</a>. Pressing the &#34;Refresh&#34; button will re-search the serial port. </span><span class="ja"> 「RS232C とターミナル」ウインドウの「接続」では、ターミナル (Terminal)、RS-232C(AUX)、シリアルポート (COM3 など) のどれとどれを接続するか選択します。 この設定は<a href="parameter.htm#rs232cconnection">パラメータ rs232cconnection</a>に保存されます。 「更新」ボタンを押すとシリアルポートが再検索されます。 </span></p><p><span class="en"> When a terminal (Terminal) and RS-232C (AUX) are connected, the ROM debugger can be operated with the terminal as before. Also, when you want to copy a string of characters displayed on the screen by a command, you can easily copy it by using &#34;CTTY AUX&#34; to move the command prompt to the terminal and execute the command. </span><span class="ja"> ターミナル (Terminal) と RS-232C(AUX) を接続すると、従来通りターミナルで ROM デバッガを操作できます。 また、コマンドが画面に表示した文字列をコピーしたいとき、「CTTY AUX」でコマンドプロンプトをターミナルに移してコマンドを実行すると簡単にコピーできます。 </span></p><p><span class="en"> By connecting a serial port (e.g. COM3) and RS-232C (AUX), serial communication between X680x0 on XEiJ and a device outside the host machine is possible. You may be able to exchange files with the actual X680x0 machine and even play communication games. </span><span class="ja"> シリアルポート (COM3 など) と RS-232C(AUX) を接続すると、XEiJ 上の X680x0 とホストマシンの外にある機器の間でシリアル通信ができます。X680x0 実機とファイルのやり取りをしたり、通信対戦もできるかも知れません。 </span></p><p><span class="en"> If you connect a serial port (COM3, etc.) to a terminal (Terminal), you can move the command prompt of the actual X680x0 device to the terminal. In the &#34;Communication settings&#34; section, match the settings with those of the actual device and enter &#34;CTTY AUX&#34; on the actual device. </span><span class="ja"> シリアルポート (COM3 など) とターミナル (Terminal) を接続すると、X680x0 実機のコマンドプロンプトをターミナルに移すことができます。 「通信設定」で実機と設定を合わせて実機で「CTTY AUX」と入力します。 </span></p><p><span class="en"> &#34;Communication settings&#34; in the &#34;RS232C and terminal&#34; window is used when a serial port (e.g. COM3) is connected to a terminal (Terminal). It selects baud rate, data bits, parity, stop bit, and flow control. These settings are stored in the <a href="parameter.htm#terminalsettings">parameter terminalsettings</a>. </span><span class="ja"> 「RS232C とターミナル」ウインドウの「通信設定」は、シリアルポート (COM3 など) とターミナル (Terminal) を接続しているときに使います。 ボーレート、データビット、パリティ、ストップビット、フロー制御を選択します。 この設定は<a href="parameter.htm#terminalsettings">パラメータ terminalsettings</a>に保存されます。 </span></p><p><span class="en"> The &#34;Send file&#34; button under &#34;Transfer&#34; in the &#34;RS232C and terminal&#34; window is used to transfer a small file from the host to the actual X680x0 device when the serial port (COM3, etc.) is connected to the terminal (Terminal). Type &#34;CTTY AUX&#34; on the actual device to move the command prompt of the actual device to the terminal, press the &#34;Send file&#34; button, select a file, and press the &#34;Send&#34; button. The selected file is converted into a self-restoring file named a.r that does not contain any control code, and is sent in the following order: string &#34;copy aux a.r&#34;, new line, contents of a.r, string &#34;a.r&#34;, new line. As long as COMMAND.X is running on the actual device, the process of converting a binary file into a file that does not contain control codes, sending it, and restoring it is done automatically. </span><span class="ja"> 「RS232C とターミナル」ウインドウの「転送」の「ファイル送信」ボタンは、シリアルポート (COM3 など) とターミナル (Terminal) を接続しているとき、ホストから X680x0 実機に小さいファイルを転送したいときに使います。 実機で「CTTY AUX」と入力して実機のコマンドプロンプトをターミナルに移し、「ファイル送信」ボタンを押してファイルを選択して、「送信」ボタンを押します。 選択されたファイルが、制御コードを含まない a.r という自己復元ファイルに変換され、文字列「copy aux a.r」、改行、a.r の内容、文字列「a.r」、改行の順に送信されます。 実機で COMMAND.X さえ動いていれば、バイナリファイルを制御コードを含まないファイルに変換して送信して復元する作業が自動で行われます。 </span></p><p><span class="en"> This transfer function is a simple one that uses the COMMAND.X copy command. The file to be transferred must fit into the memory of the actual device, including the area needed for decompression. Once the transfer is started, it cannot be stopped. The transfer may not be stopped due to communication errors. If the decoder is corrupted, a white window may appear. If the file is corrupted, a CRC error will be displayed. If the transfer fails, check the flow control, lower the baud rate, and try again. Data bits must be 8 bits. </span><span class="ja"> この転送機能は COMMAND.X の copy コマンドを用いる簡易的なものです。 転送するファイルは解凍に必要な領域を含めて実機のメモリに収まらなければなりません。 転送を始めたら途中で止められません。 通信エラーで転送が止まらなくなることがあるかも知れません。 デコーダが破損したときは白窓が表示されるかも知れません。 ファイルが破損したときは CRC エラーが表示されます。 転送に失敗するときはフロー制御を確認してボーレートを下げてやり直してください。 データビットは 8 ビットに限ります。 </span></p><h4><span class="en"> SCSI menu </span><span class="ja"> SCSI メニュー </span></h4><p><span class="en"> Fixed a bug that prevented opening hard disk image files initialized with SCSIFORMAT.X included with SxSI. (Thanks りっきーさん) </span><span class="ja"> SxSI に付属している SCSIFORMAT.X で初期化されたハードディスクのイメージファイルを開くことができないバグを修正しました。(Thanks りっきーさん) </span></p><h4><span class="en"> SPC </span><span class="ja"> SPC </span></h4><p><span class="en"> Write and Verify(10) is implemented with the same behavior as Write(10). </span><span class="ja"> Write and Verify(10) を Write(10) と同じ動作で実装しました。 </span></p><h4><span class="en"> misc/060tsys/060turbo.sys </span><span class="ja"> misc/060tsys/060turbo.sys </span></h4><p><span class="en"> 060turbo.sys 0.58 is now included. The changes from 0.56 are as follows. </span><span class="ja"> 060turbo.sys 0.58 を同梱しました。0.56 からの変更点は以下の通りです。 </span></p><ul><li><span class="en"> The logical address space has been changed from 29 bits to 30 bits. </span><span class="ja"> 論理アドレス空間を 29 ビットから 30 ビットに変更しました。 </span></li><li><span class="en"> The upper limit of high memory capacity was changed from 256 MB to 768 MB. </span><span class="ja"> ハイメモリの容量の上限を 256MB から 768MB に変更しました。 </span></li><li><span class="en"> The upper limit of RAMDISK capacity was changed from 512MB to 768MB. </span><span class="ja"> RAMDISK の容量の上限を 512MB から 768MB に変更しました。 </span></li><li><span class="en"> Fixed a bug that caused a hang-up when creating a RAMDISK ending in the end of the logical address space. </span><span class="ja"> 論理アドレス空間の末尾で終わる RAMDISK を作るとハングアップするバグを修正しました。 </span></li><li><span class="en"> The -ts limit was changed from 1024 to 4096. </span><span class="ja"> -ts の上限を 1024 から 4096 に変更しました。 </span></li><li><span class="en"> Added parameter -nt to disable use of MMU. Do not specify on the actual machine and on emulators that fill the cache using the same procedure as the actual machine. </span><span class="ja"> MMU を使わないようにするパラメータ -nt を追加しました。 実機および実機と同じ手順でキャッシュを充填するエミュレータでは指定しないでください。 </span></li><li><span class="en"> Can also be incorporated in 68030. MMU of 68030 is not supported. </span><span class="ja"> 68030 でも組み込めます。68030 の MMU は非対応です。 </span></li><li><span class="en"> SASI machines can be incorporated if they are 68030 or higher. SCSI BIOS installed after 060turbo.sys will not be wrapped. </span><span class="ja"> 68030 以上であれば SASI 機でも組み込めます。060turbo.sys より後に組み込まれた SCSI BIOS はラップされません。 </span></li><li><span class="en"> COMMAND.X 2.03 patch added. </span><span class="ja"> COMMAND.X 2.03 のパッチを追加しました。 </span></li><li><span class="en"> PCM8A.X 1.02 patch added. </span><span class="ja"> PCM8A.X 1.02 のパッチを追加しました。 </span></li><li><span class="en"> Fixed where btst was bset (no real damage due to SRAM). </span><span class="ja"> btst が bset になっていたところ (SRAM のため実害なし) を修正しました。 </span></li></ul><h3><a href="#changes_0230514" id="changes_0230514">0.23.05.14</a></h3><h4><span class="en"> CYBER STICK </span><span class="ja"> サイバースティック </span></h4><p><span class="en"> A cyber stick has been added to the devices that can be connected to the joystick port. The analog mode can be operated with an XInput gamepad, and the digital mode can be operated with an XInput gamepad or keyboard. Cyberstick button assignments can be set in the joystick port settings window or with the parameters <a href="parameter.htm#cyberstickanalogN">cyberstickanalogN</a> and <a href="parameter.htm#cyberstickdigitalN">cyberstickdigitalN</a>. </span><span class="ja"> ジョイスティックポートに接続できるデバイスにサイバースティックを追加しました。 アナログモードは XInput 方式のゲームパッドで、また、デジタルモードは XInput 方式のゲームパッドまたはキーボードで操作できます。 サイバースティックのボタンの割り当てはジョイスティックポート設定ウインドウまたはパラメータ<a href="parameter.htm#cyberstickanalogN">cyberstickanalogN</a>および<a href="parameter.htm#cyberstickdigitalN">cyberstickdigitalN</a>で設定できます。 </span></p><h4><span class="en"> XInput support </span><span class="ja"> XInput 対応 </span></h4><p><span class="en"> When using Windows, the normal 2 button pad, the MEGA DRIVE 3 button pad, the MEGA DRIVE 6 button pad, and the cyber stick can be operated with an XInput gamepad. This functionality can be configured in the joystick port settings window or with the <a href="parameter.htm#xinput">parameter xinput</a>. Place the included xeijwin.dll in the current directory or in a directory in your path. </span><span class="ja"> Windows のとき、ノーマル 2 ボタンパッド、メガドラ 3 ボタンパッド、メガドラ 6 ボタンパッドおよびサイバースティックを XInput 方式のゲームパッドで操作できます。 この機能はジョイスティックポート設定ウインドウまたは<a href="parameter.htm#xinput">パラメータ xinput</a>で設定できます。 付属の xeijwin.dll をカレントディレクトリまたはパスの通っているディレクトリに置いてください。 </span></p><h3><a href="#changes_0230503" id="changes_0230503">0.23.05.03</a></h3><h4><span class="en"> Sprite screen </span><span class="ja"> スプライト画面 </span></h4><p><span class="en"> Fixed a bug that caused transparent lines to appear on the sprite screen when palette or scroll position was changed during the horizontal data display period. </span><span class="ja"> 水平データ表示期間中にパレットやスクロール位置を変更するとスプライト画面に透明な線ができるバグを修正しました。 </span></p><h3><a href="#changes_0230501" id="changes_0230501">0.23.05.01</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 20.0.1 2023-04-18. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 20.0.1 2023-04-18 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4><span class="en"> F11 key </span><span class="ja"> F11 キー </span></h4><p><span class="en"> Shift+F11 key toggles between <a href="feature.htm#seamlessmouse">seamless mouse mode</a> and <a href="feature.htm#exclusivemouse">exclusive mouse mode</a> as well as the F12 key. Use this key when the F12 key is not assigned on the Z keyboard. </span><span class="ja"> Shift+F11 キーで F12 キーと同様に<a href="feature.htm#seamlessmouse">シームレスマウスモード</a>と<a href="feature.htm#exclusivemouse">エクスクルーシブマウスモード</a>を切り替えられます。Z キーボードで F12 キーが割り当てられていないときに使います。 </span></p><p><span class="en"> Added &#34;Do nothing&#34; to the <a href="menu.htm#f11key">F11 key menu</a>. When the right Ctrl key on the Z keyboard is used as the F11 key, you can usually select &#34;Do nothing&#34; and nothing will happen if you accidentally press it. </span><span class="ja"> <a href="menu.htm#f11key">F11 キーメニュー</a>に「何もしない」を追加しました。Z キーボードの右 Ctrl キーを F11 キーにしているとき普段は「何もしない」を選択しておけば間違って押しても何も起こりません。 </span></p><h4><span class="en"> File menu </span><span class="ja"> ファイルメニュー </span></h4><p><span class="en"> The frame of the connection icon is no longer darkened when the unit is not connected. </span><span class="ja"> ユニットが接続されていないとき接続アイコンの枠の部分を暗くしないようにしました。 </span></p><h4><span class="en"> Host file system </span><span class="ja"> ホストファイルシステム </span></h4><p><span class="en"> Fixed a bug that caused file timestamps to be set incorrectly if _CLOSE was performed immediately after _CREATE/_NEWFILE. </span><span class="ja"> _CREATE/_NEWFILE してすぐに _CLOSE するとファイルのタイムスタンプが正しく設定されないバグを修正しました。 </span></p><h4><span class="en"> IPLROM 1.6 </span><span class="ja"> IPLROM 1.6 </span></h4><p><span class="en"> When the MPU is 68060, for exceptions and IOCS calls where bit 4 of the number is 1, the undefined vectors will not contain vector numbers. When there is high memory at address $01xxxxxxxx, such undefined exceptions or IOCS calls will not run out of control and the appropriate white window will be displayed. </span><span class="ja"> MPU が 68060 のとき、番号のビット 4 が 1 である例外および IOCS コールについて、未定義のベクタにベクタ番号を入れないようにしました。 アドレス $01xxxxxx にハイメモリがあるときそのような未定義の例外または IOCS コールを呼び出しても暴走せず適切な白窓が表示されるようになります。 </span></p><p><span class="en"> For the following interrupt-related IOCS calls, the condition for determining that an interrupt is unused has been changed from &#34;the vector is $01000000 or more&#34; to &#34;the vector contains a vector number&#34;. When the vector of an interrupt in use points to high memory, the interrupt is no longer misidentified as unused. </span><span class="ja"> 以下の割り込み関係の IOCS コールについて、割り込みが未使用であると判断する条件を「ベクタが $01000000 以上」から「ベクタにベクタ番号が入っている」に変更しました。 使用中の割り込みのベクタがハイメモリを指しているとき割り込みが未使用と誤認されなくなります。 </span></p><ul><li>_OPMINTST</li><li>_TIMERDST</li><li>_VDISPST</li><li>_CRTCRAS</li><li>_HSYNCST</li><li>_PRNINTST</li></ul><h4><span class="en"> JoyPortUkun support (experimental) </span><span class="ja"> じょいぽーと U 君対応 (実験中) </span></h4><p><span class="en"> When using Windows, <a href="https://xn--tnb-k69dq77f996c.com/" target="_blank">TNB Seisakusho</a>&#39;s JoyPortUkun is supported. Input/output devices connected to the joystick port of the actual X68000 may be used with XEiJ. See <a href="feature.htm#joyportukun">JoyPortUkun support (experimental)</a> for details. </span><span class="ja"> Windows のとき、<a href="https://xn--tnb-k69dq77f996c.com/" target="_blank">TNB 製作所さん</a>のじょいぽーと U 君に対応しました。X68000 実機のジョイスティックポートに繋いでいた入出力デバイスが XEiJ で使えるかも知れません。 詳しくは<a href="feature.htm#joyportukun">じょいぽーと U 君対応 (実験中)</a>を参照してください。 </span></p><h4><span class="en"> Key assignments </span><span class="ja"> キー割り当て </span></h4><p><span class="en"> The width of keyCode that can be used for key assignment when using Windows has been changed from 12 bits to 16 bits. The F13 to F24 keys used on the Z keyboard can be assigned. </span><span class="ja"> Windows のときキー割り当てに使える keyCode の幅を 12 ビットから 16 ビットに変更しました。Z キーボードで使う F13～F24 キーを割り当てられます。 </span></p><h4><span class="en"> Operation frequency </span><span class="ja"> 動作周波数 </span></h4><p><span class="en"> Changed the operating frequency of 060turbo and 060turboPRO from 33.3MHz to 50MHz. </span><span class="ja"> 060turbo と 060turboPRO の動作周波数を 33.3MHz から 50MHz に変更しました。 </span></p><p><span class="en"> Added 66.7MHz, 75MHz, and 100MHz radio buttons to the <a href="menu.htm#mpu">MPU menu</a>. </span><span class="ja"> <a href="menu.htm#mpu">MPU メニュー</a>に 66.7MHz、75MHz、100MHz のラジオボタンを追加しました。 </span></p><p><span class="en"> The default value of the arbitrary frequency spinner in the <a href="menu.htm#mpu">MPU menu</a> was changed to 200MHz. </span><span class="ja"> <a href="menu.htm#mpu">MPU メニュー</a>の任意の周波数スピナーの初期値を 200MHz に変更しました。 </span></p><h4><span class="en"> SCSI menu </span><span class="ja"> SCSI メニュー </span></h4><p><span class="en"> The tooltip for the hard disk icon is no longer displayed when the unit is not connected. </span><span class="ja"> ユニットが接続されていないときハードディスクアイコンのツールチップを表示しないようにしました。 </span></p><h4><span class="en"> SPC </span><span class="ja"> SPC </span></h4><p><span class="en"> Selection phase is no longer omitted when the unit is not connected. </span><span class="ja"> ユニットが接続されていないときセレクションフェーズを省略しないようにしました。 </span></p><h4><span class="en"> Z Keyboard support (experimental) </span><span class="ja"> Z キーボード対応 (実験中) </span></h4><p><span class="en"> In a Windows 10 and Microsoft IME or Google Japanese Input environment, all keys on the X68000 Z keyboard can be entered, with some limitations, by remapping the special keys to the F13-F24 keys using Microsoft PowerToys Keyboard Manager. You can control the 7 LEDs on the X68000 Z keyboard. See <a href="feature.htm#zkeyboard">Z keyboard support (experimental)</a> for details. </span><span class="ja"> Windows 10 と Microsoft IME または Google 日本語入力の環境で、Microsoft PowerToys Keyboard Manager を用いて特殊キーを F13～F24 キーへ再マップすることで、いくつかの制約はありますが、X68000 Z のキーボードのすべてのキーを入力できます。X68000 Z のキーボードの 7 個の LED を制御できます。 詳しくは<a href="feature.htm#zkeyboard">Z キーボード対応 (実験中)</a>を参照してください。 </span></p><h3><a href="#changes_0230410" id="changes_0230410">0.23.04.10</a></h3><h4><span class="en"> 8-bit port </span><span class="ja"> 8 ビットポート </span></h4><p><span class="en"> When accessing an even address of an 8-bit port with byte size, a bus error is now generated unless the Xellent30 is in 68030 mode. </span><span class="ja"> 8 ビットポートの偶数アドレスにバイトサイズでアクセスしたとき Xellent30 の 68030 モードでなければバスエラーが発生するようにしました。 </span></p><h4><span class="en"> Change the model and reset </span><span class="ja"> 機種を変更してリセット </span></h4><p><span class="en"> Fixed a bug that prevented X68000 Compact (16.7MHz) from responding in the menu. </span><span class="ja"> メニューの X68000 Compact (16.7MHz) が反応しないバグを修正しました。 </span></p><h4><span class="en"> Controll pipe </span><span class="ja"> 制御パイプ </span></h4><p><span class="en"> Added <a href="feature.htm#controlpipe">control pipe</a>. When in Windows, the named pipe &#34;\\.\pipe\XEiJControl&amp;#34, you can send control commands, such as pressing an interrupt switch, from other processes via this pipe. Place the supplied xeijwin.dll in the current directory or in a directory that is in your path. Activating the <a href="feature.htm#pastepipe">paste pipe</a> via the <a href="menu.htm#pastesettings">paste settings menu</a> or the <a href="parameter.htm#pastepipe">parameter pastepipe</a> also activates the control pipe. </span><span class="ja"> <a href="feature.htm#controlpipe">制御パイプ</a>を追加しました。Windows のとき、名前付きパイプ「\\.\pipe\XEiJControl」を介して他のプロセスからインタラプトスイッチを押すなどの制御コマンドを送信できます。 付属の xeijwin.dll をカレントディレクトリまたはパスの通っているディレクトリに置いてください。 <a href="menu.htm#pastesettings">貼り付け設定メニュー</a>または<a href="parameter.htm#pastepipe">パラメータ pastepipe</a>で<a href="feature.htm#pastepipe">貼り付けパイプ</a>を有効にすると制御パイプも有効になります。 </span></p><pre>echo interrupt &gt; \\.\pipe\XEiJControl</pre><h4><span class="en"> DMAC </span><span class="ja"> DMAC </span></h4><p><span class="en"> Fixed a bug where DMAC would not read the source operand if it knew an address error would occur when writing to the destination operand. </span><span class="ja"> DMAC がデスティネーションオペランドへライトするときアドレスエラーが発生することが分かっているとソースオペランドをリードしないバグを修正しました。 </span></p><p><span class="en"> Fixed an enbug in array chain mode and linked array chain mode that attempted to determine address and count errors before the first MAR and MTC were loaded. </span><span class="ja"> アレイチェーンモードとリンクアレイチェーンモードのとき最初の MAR と MTC がロードされる前にアドレスエラーとカウントエラーを判別しようとするエンバグを修正しました。 </span></p><h4><span class="en"> Host file system </span><span class="ja"> ホストファイルシステム </span></h4><p><span class="en"> Fixed an error code when a file was not found in files. </span><span class="ja"> files でファイルが見つからなかったときのエラーコードを修正しました。 </span></p><p><span class="en"> Remnants of _FILES buffers are now erased on reset. </span><span class="ja"> リセット時、_FILES のバッファの残骸を消すようにしました。 </span></p><h4><span class="en"> IPLROM 1.6 </span><span class="ja"> IPLROM 1.6 </span></h4><p><span class="en"> When the MPU is other than 68000 and the program counter is $02xxxxxx to $0Fxxxxxx, the vector number is obtained from the program counter instead of the vector offset. With this change, when an undefined F line instruction is executed on X68030, the message &#34;A strange instruction was executed&#34; will be displayed instead of &#34;An error ($000B) occurred&#34;. </span><span class="ja"> MPU が 68000 以外かつプログラムカウンタが $02xxxxxx～$0Fxxxxxx のとき、ベクタオフセットの代わりにプログラムカウンタからベクタ番号を取得します。 この変更により、X68030 で未定義の F ライン命令を実行したとき、「エラー ($000B) が発生しました」ではなく「おかしな命令を実行しました」と表示されるようになります。 </span></p><h4><span class="en"> Parameters hdN and saN </span><span class="ja"> パラメータ hdN と saN </span></h4><p><span class="en"> The parameter for specifying the SASI HD image file name has been changed from <a href="parameter.htm#hdN">parameter hdN</a> to <a href="parameter.htm#saN">parameter saN</a>. </span><span class="ja"> SASI HD のイメージファイル名を指定するパラメータを<a href="parameter.htm#hdN">パラメータ hdN</a>から<a href="parameter.htm#saN">パラメータ saN</a>に変更しました。 </span></p><p><span class="en"> hdN can now be specified as either a SASI HD or SCSI HD/CD image file name. The file specified by hdN is considered to be a SASI HD image file name if the file extension is HDF or the file size is 10441728, 20748288, or 41496576. To be considered a SCSI HD/CD image file name, the file specified by hdN must have the HDS or ISO extension or have a file size that is not 10441728, 20748288, or 41496576. </span><span class="ja"> hdN には SASI HD と SCSI HD/CD のどちらのイメージファイル名でも指定できるようにしました。hdN で指定されたファイルが SASI HD のイメージファイル名とみなされる条件は、拡張子が HDF であるか、ファイルサイズが 10441728、20748288、41496576 のいずれかであることです。hdN で指定されたファイルが SCSI HD/CD のイメージファイル名とみなされる条件は、拡張子が HDS または ISO であるか、ファイルサイズが 10441728、20748288、41496576 のいずれでもないことです。 </span></p><p><span class="en"> The image file name specified in hdN will be stored in saN if it is a SASI HD or in scN if it is a SCSI HD or CD-ROM. It is not stored in hdN. </span><span class="ja"> hdN で指定されたイメージファイル名は SASI HD であれば saN に、SCSI HD または CD-ROM であれば scN に保存されます。hdN には保存されません。 </span></p><p><span class="en"> When deleting an image file name, use saN=none or scN=none. You cannot delete with hdN=none. </span><span class="ja"> イメージファイル名を削除するときは saN=none または scN=none としてください。hdN=none では削除できません。 </span></p><h4><span class="en"> RTC </span><span class="ja"> RTC </span></h4><p><span class="en"> A slight discrepancy between the host machine&#39;s time and the X68000&#39;s time could affect the file modification date and time settings in the host file system. The unit of time difference between the host machine and the X68000 was changed from milliseconds to seconds, and the slight discrepancy was rounded to zero. </span><span class="ja"> ホストマシンの時刻と X68000 の時刻のわずかなずれが、ホストファイルシステムのファイルの更新日時の設定に影響することがありました。 ホストマシンと X68000 の時差の単位をミリ秒から秒に変更し、わずかなずれが丸め処理でゼロになるようにしました。 </span></p><h3><a href="#changes_0230311" id="changes_0230311">0.23.03.11</a></h3><h4><span class="en"> Core control buttons </span><span class="ja"> コア制御ボタン </span></h4><p><img alt="ori illegal" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAWklEQVR4Xr2PAQoAIAgD/T/4wh5TEBSxiSVZA6N2Y5iolpo50o8k/SmkL4A8ToUYQO+Ik7EItzjiZMDd8lxOhhWKcDTW9wwFOBugMMfQ2MLaZsfNwhu9K8ycBmKyStAxpc8eAAAAAElFTkSuQmCC"> <img alt="stop on error" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAMUlEQVR4XmPo7b39n5qYAUxQCRBtINx2AmDUQNxg8BtILBg4A6nuZaobSCyAG0hNDACdPOxBiQ3iXAAAAABJRU5ErkJggg=="> <img alt="stop at start" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAYUlEQVR4Xs2QUQrAIAxDvT94wh1mgqDUl8wfKyxQoal5hZZanzezSn+S9D8gs0fAeTN4ApQjGw2fcwukOI+9nTmTtQTwV/pdIHpc8rlQjCAGKM4EOMwI2kHpW+CJ7gEzqwGddy1IaxAdSgAAAABJRU5ErkJggg=="> <img alt="break" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAXUlEQVR4Xr3NUQrAIAyDYe8PnnCHUTKYFEkakbIf9KHFz9b7MypPe6+iJLh+E6m9BW92FETsIZvFUhBFwGHIgugUQ/+DO+bQFGQAm8UkmD10uxTc519qL8HbFlh5JoqgVqBZC/feAAAAAElFTkSuQmCC"> <img alt="trace" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAS0lEQVR4XmPo7b39n5qYAUxQCdDPQHRvYFODDdDPQGRAFwPR+TBAkYHoYjBxog3EhdHV0t9AbACbYTBxsg1EFwMBsg3EBeAGUhMDAJtvLUjdvGQiAAAAAElFTkSuQmCC"> <img alt="trace 10" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAZUlEQVR4XsWPAQqAMAwD93/YC32MgmC53dRNqRjI2qZZxkqty5rJsh9J+Dfw8PmLvP868EyP3oJf5Y7VevQ2xOJC8+5RYGeW5vk2kAwzKr1NbwPRmaV5HgYSDDQbz2zgDL4LzOQGnU82JNBcPmAAAAAASUVORK5CYII="> <img alt="trace 100" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAXUlEQVR4XsWPAQpAIQxCuz90wn+YgmBgNn8LFgkmG/miUuvXMl3GkaR3QLszfU3Mx8BtqtdQblElA3jGXSgZwJe83W96QPRS2CUDTbh3iyoVEIUFs5pDwKjuATPdASFBX3wW0L/BAAAAAElFTkSuQmCC"> <img alt="step" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAATUlEQVR4XmPo7b39n5qYAUxQCdDXQHSvwL2EBwyMgbj42ABFBmLTR7GB6HqxGghTiK4BXRyXGtobSCxANwwmRpGBWMWwSZAL4AZSEwMAcRZWoAlX5CwAAAAASUVORK5CYII="> <img alt="step 10" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAYklEQVR4XmPo7b39n5qYAUxQCQysgTB16F5E1k+2gdjE4Wx0AXRbkeWQaXRxOBtDAE0RITkM/RgCWGhcYuh8vAYiY3Q5mHp0PoaB6ABDMZoYOp+ggcgAl+vJNpAYQDsDqYkBusQ/APsXNCcAAAAASUVORK5CYII="> <img alt="step 100" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAWUlEQVR4XsVPCQoAIAzq/7AX9piCYGBDO2CRYDKXRsWstkyWcSThX6Hfmb4m5uvCrarXEDSolJoBcbdUaoIyb6nMRMbdVn2IQJ8GlapCBAacaj4qPMW7wkx2YiZoWMU+YEYAAAAASUVORK5CYII="> <img alt="step until return" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAT0lEQVR4XmPo7b39n5qYAUxQCRBtIDFqQIAoA+FeIQIQNBA9fNAxNvX0NRAEsGnGJgYTJ2ggCKCrodhAdECygTANhDA2ffQxkFxAOwOpiQEDSUrQvCAnZQAAAABJRU5ErkJggg=="> <img alt="run" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAU0lEQVR4Xr3NQQoAIAhE0e4PnrDDFNNCQlJHkD7YIvI1RObqnHGOpmhQf08qg9lbGkQMWgJRhrrgvRjNa+8P6BVhqARmGKJBBkNl0N7baJBNwc7Z5785GHi1AS4AAAAASUVORK5CYII="></p><p><span class="en"> A checkbox <img alt="stop at start" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAYUlEQVR4Xs2QUQrAIAxDvT94wh1mgqDUl8wfKyxQoal5hZZanzezSn+S9D8gs0fAeTN4ApQjGw2fcwukOI+9nTmTtQTwV/pdIHpc8rlQjCAGKM4EOMwI2kHpW+CJ7gEzqwGddy1IaxAdSgAAAABJRU5ErkJggg=="> has been added to <a href="feature.htm#corecontrolbuttons">core control buttons</a> to stop the core at the program execution start position. It is used when you want to set a breakpoint in a program before executing it. The <a href="feature.htm#disassemblelist">disassemble list</a> shows the name of the program and the offset from the beginning, so you can easily find the place to set a breakpoint by comparing it with the assembly list generated by <a href="http://retropc.net/x68000/software/develop/as/has060/" target="_blank">HAS060.X</a> and the disassembly list generated by <a href="http://retropc.net/x68000/software/develop/dis/diseririn/" target="_blank">dis.x</a>. This feature is only available when Human68k 3.02 is running. </span><span class="ja"> <a href="feature.htm#corecontrolbuttons">コア制御ボタン</a>にプログラムの実行開始位置でコアを停止させるチェックボックス <img alt="stop at start" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAAYUlEQVR4Xs2QUQrAIAxDvT94wh1mgqDUl8wfKyxQoal5hZZanzezSn+S9D8gs0fAeTN4ApQjGw2fcwukOI+9nTmTtQTwV/pdIHpc8rlQjCAGKM4EOMwI2kHpW+CJ7gEzqwGddy1IaxAdSgAAAABJRU5ErkJggg=="> を追加しました。 プログラムにブレークポイントを仕掛けてから実行したいときに使います。 <a href="feature.htm#disassemblelist">逆アセンブルリスト</a>にはプログラムの名前と先頭からのオフセットが表示されるので、<a href="http://retropc.net/x68000/software/develop/as/has060/" target="_blank">HAS060.X</a>が生成したアセンブルリストや<a href="http://retropc.net/x68000/software/develop/dis/diseririn/" target="_blank">dis.x</a>が生成した逆アセンブルリストと照合することで、ブレークポイントを仕掛ける場所を簡単に見つけられます。 この機能は Human68k 3.02 が動作しているときだけ有効です。 </span></p><h4><span class="en"> DMAC </span><span class="ja"> DMAC </span></h4><p><span class="en"> Fixed a bug that caused incorrect transfers when the device port size was 8 bits and the operand size was a word or longword. </span><span class="ja"> デバイスポートサイズが 8 ビットでオペランドサイズがワードまたはロングワードのとき正しく転送されないバグを修正しました。 </span></p><p><span class="en"> Fixed a bug that did not result in a configuration error when the device port size was 16 bits and the operand size was 8 bits without pack. </span><span class="ja"> デバイスポートサイズが 16 ビットでオペランドサイズがパックなし 8 ビットのときコンフィギュレーションエラーにならないバグを修正しました。 </span></p><p><span class="en"> Fixed a bug that prevented COC from being set when a channel stopped in error. </span><span class="ja"> チャンネルがエラーで停止したとき COC がセットされないバグを修正しました。 </span></p><p><span class="en"> The formula for burst time and interval at auto request limited speed has been corrected. </span><span class="ja"> オートリクエスト限定速度のときのバースト時間と間隔の計算式を修正しました。 </span></p><p><span class="en"> The number of cycles per operand has been corrected. The following table shows the number of cycles per operand for each setting on the actual X68030. You can see that the HD63450 operates with a minimum of 9 cycles, but the X68030 operates with 10 cycles with a wait cycle inserted. The X68000 also has many 10-cycle units, but some of the XVI and Compact units have 9 cycles. Furthermore, it appears that only the main memory is 9-cycle and the battery-backed SRAM is also 9-cycle. The PRO has 12 cycles, so DMA transfers are slower than other models. XEiJ uses 12 cycles for PRO, 9 cycles for Compact including Hybrid, and 10 cycles for the other models. </span><span class="ja"> オペランドあたりのサイクル数を修正しました。 以下の表は、X68030 実機の設定毎のオペランドあたりのサイクル数を示しています。HD63450 は最短 9 サイクルで動作しますが、X68030 ではウェイトサイクルが挿入されて 10 サイクルで動作していることが分かります。X68000 も 10 サイクルの個体が多いですが、XVI と Compact の一部に 9 サイクルの個体が存在します。 更に、メインメモリだけが 9 サイクルの個体と、バッテリバックアップ SRAM も 9 サイクルの個体があるようです。PRO は 12 サイクルなので、他の機種よりも DMA 転送が遅いです。XEiJ では、PRO を 12 サイクルに、Hybrid を含む Compact を 9 サイクルに、その他の機種を 10 サイクルにしています。 </span></p><p><span class="smallimg"><img alt="dmactime10.png" src="dmactime10.png"></span></p><h4><span class="en"> Dot clock oscillator </span><span class="ja"> ドットクロックオシレータ </span></h4><p><span class="en"> In the <a href="menu.htm#modification">modification menu</a> or <a href="parameter.htm#dotclock">parameter dotclock</a>, you can change the frequency of the three dot clock oscillators: one for low resolution, one for high resolution, and one for VGA. Changes made in the menu are reflected after a reset. See also: Oh!X June 1994, &#34;The Road to Mega Displays&#34; </span><span class="ja"> <a href="menu.htm#modification">改造メニュー</a>または<a href="parameter.htm#dotclock">パラメータ dotclock</a>で、低解像度用、高解像度用、VGA 用の 3 つのドットクロックオシレータの周波数を変更できます。 メニューでの変更はリセット後に反映されます。 関連 : Oh!X 1994 年 6 月号『メガディスプレイへの道』 </span></p><h4><span class="en"> Host file system </span><span class="ja"> ホストファイルシステム </span></h4><p><span class="en"> &#34;...&#34; or &#34;....&#34; etc. cannot be used as file names. </span><span class="ja"> &#34;...&#34; や &#34;....&#34; などをファイル名として使えないようにしました。 </span></p><p><span class="en"> The size of the read-ahead and delayed write buffer per file handle has been changed from 16KB to 64KB. </span><span class="ja"> ファイルハンドルあたりの先読み・遅延書き込みバッファのサイズを 16KB から 64KB に変更しました。 </span></p><p><span class="en"> When transferring data, address conversion is now performed one page at a time instead of one byte at a time. </span><span class="ja"> データを転送するときアドレス変換を 1 バイトずつ行っていたところを 1 ページずつ行うように変更しました。 </span></p><h4><span class="en"> Human68k patches </span><span class="ja"> Human68k のパッチ </span></h4><p><span class="en"> Fixed a problem in which &#34;PCM8A.X 1.02 is available&#34; was sometimes displayed after PCM8A.X was deactivated. </span><span class="ja"> PCM8A.X を解除した後に「PCM8A.X 1.02 があります」と表示されることがある不具合を修正しました。 </span></p><h4><span class="en"> IPLROM 1.6 </span><span class="ja"> IPLROM 1.6 </span></h4><p><span class="en"> The <a href="iplrom16.htm">IPLROM 1.6</a> startup screen used to display the DMAC transfer rate measured in battery-backed SRAM, but now it displays two times, once when measured in main memory and once when measured in battery-backed SRAM. When measured in main memory, the transfer rate is slightly lower due to the effect of DRAM refresh. It seems that some XVI and Compact models have different number of wait cycles between main memory and battery-backed SRAM. </span><span class="ja"> <a href="iplrom16.htm">IPLROM 1.6</a>の起動画面にバッテリバックアップ SRAM で計測した DMAC の転送速度を表示していましたが、メインメモリで計測したときとバッテリバックアップ SRAM で計測したときの 2 つ表示するようにしました。 メインメモリで計測すると DRAM リフレッシュの影響を受けて転送速度が若干低下します。XVI と Compact の一部にメインメモリとバッテリバックアップ SRAM でウェイトサイクルの数が異なる個体が存在するようです。 </span></p><p><span class="smallimg"><img alt="iplrom16boot.png" src="iplrom16boot.png"></span></p><h4><span class="en"> Key assignments </span><span class="ja"> キー割り当て </span></h4><p><span class="en"> On Linux, the key assignments for Windows were not useful and all keys had to be reassigned. saku39 provided us with the data of key assignments created on Linux. He said that it is incomplete as a whole because it was created on a laptop, but I think it will be of great help. Thank you, saku39. </span><span class="ja"> Linux では、Windows 用のキー割り当てが役に立たず、すべてのキーを割り当て直さなければなりませんでした。saku39 さんに Linux で作成されたキー割り当てのデータを提供していただきました。 ノート PC で作成されたため全体的に不完全とのことですが、大いに参考になると思います。saku39 さん、ありがとうございます。 </span></p><p><span class="en"> Added Save and Restore buttons to the <a href="feature.htm#keyassignments">Key assignments window</a>. Key assignments can be saved to a file in CSV format. Since XEiJ saves key assignments in a settings file, when XEiJ settings are initialized, the key assignments are also initialized together. By saving key assignments to a file, key assignments can be restored after XEiJ settings are initialized. </span><span class="ja"> <a href="feature.htm#keyassignments">キー割り当てウインドウ</a>に保存ボタンと復元ボタンを追加しました。 キー割り当てを CSV 形式でファイルに保存できます。XEiJ ではキー割り当てを設定ファイルに保存しているので、XEiJ の設定を初期化するとキー割り当ても一緒に初期化されてしまいます。 キー割り当てをファイルに保存しておくことで、XEiJ の設定を初期化した後にキー割り当てを復元できます。 </span></p><p><span class="en"> Added Undo and Redo buttons to the <a href="feature.htm#keyassignments">Key assignments window</a>. You can undo changes to key assignments. If a key assigned to another key is pressed by mistake when changing the key assignment, the two keys will be in the wrong state, but they can be undone together. Operations of the blank button, default button, and restore button can also be undone. You can undo up to 1000 previous changes until you exit XEiJ. To undo a key assignment change after exiting XEiJ, take the keymap= line from the XEiJ.ini.bak file, write it to a file named keymap.txt, and restore it. </span><span class="ja"> <a href="feature.htm#keyassignments">キー割り当てウインドウ</a>に取り消しボタンとやり直しボタンを追加しました。 キー割り当ての変更を取り消すことができます。 キー割り当てを変更するとき他のキーに割り当てられているキーを間違って押してしまうと、2 つのキーが間違った状態になってしまいますが、まとめて取り消せます。 白紙ボタン、初期値ボタン、復元ボタンの操作も取り消せます。XEiJ を終了するまで、1000 回前の変更まで取り消せます。XEiJ を終了した後にキー割り当ての変更を取り消すには、XEiJ.ini.bak ファイルから keymap= の行を取り出して keymap.txt というファイルに書き込み、それを復元してください。 </span></p><p><span class="smallimg"><img alt="keyassignments.png" src="keyassignments.png"></span></p><h4><span class="en"> Number of sprites per raster </span><span class="ja"> ラスタあたりのスプライトの枚数 </span></h4><p><span class="en"> The number of sprites per raster can be changed from 32 to any number in the <a href="menu.htm#modification">modification menu</a> or in the <a href="parameter.htm#sprras">parameter sprras</a>. Changes made in the menu will take effect immediately. </span><span class="ja"> <a href="menu.htm#modification">改造メニュー</a>または<a href="parameter.htm#sprras">パラメータ sprras</a>で、ラスタあたりのスプライトの枚数を 32 枚から任意の枚数に変更できます。 メニューでの変更は直ちに反映されます。 </span></p><h4><span class="en"> Scanline effect </span><span class="ja"> 走査線エフェクト </span></h4><p><span class="en"> In the <a href="menu.htm#scanlineeffect">Scanline effect menu</a> or <a href="parameter.htm#scanline">parameter scanline</a>, the <a href="feature.htm#scanlineeffect">scanline effect</a> in low-resolution mode can be selected from five options: none, weak, medium, strong, and black. The default value is medium. Previously, only strong was available. </span><span class="ja"> <a href="menu.htm#scanlineeffect">走査線エフェクトメニュー</a>または<a href="parameter.htm#scanline">パラメータ scanline</a>で、低解像度モードのときの<a href="feature.htm#scanlineeffect">走査線エフェクト</a>を、なし、弱、中、強、黒の 5 つから選択できるようにしました。 初期値は中です。 以前は強のみでした。 </span></p><p><span class="en"> If the vertical magnification of the screen is not an integer multiple and not large enough, the scanline effect will not look good. Use Fixed scale to set the screen&#39;s vertical magnification to an integer multiple. </span><span class="ja"> 画面の縦方向の倍率が整数倍でなくかつ十分に大きくないとき、走査線エフェクトは綺麗に見えません。 固定倍率を用いて画面の縦方向の倍率を整数倍にしてください。 </span></p><h4><span class="en"> 256 sprites </span><span class="ja"> スプライト 256 枚 </span></h4><p><span class="en"> The number of sprites can be doubled from 128 to 256 in the <a href="menu.htm#modification">modification menu</a> or <a href="parameter.htm#dblspr">parameter dblspr</a>. Changes made in the menu are reflected after a reset. </span><span class="ja"> <a href="menu.htm#modification">改造メニュー</a>または<a href="parameter.htm#dblspr">パラメータ dblspr</a>で、スプライトの枚数を 128 枚から 256 枚に倍増させることができます。 メニューでの変更はリセット後に反映されます。 </span></p><p><span class="en"> The X68000 has 128 sprite scroll registers at addresses $00EB0000 to $00EB03FF. Addresses $00EB00400 to $00EB07FF immediately after that are free, so they are used as sprite scroll registers for an additional 128 sprites. </span><span class="ja"> X68000 はアドレス $00EB0000～$00EB03FF に 128 枚分のスプライトスクロールレジスタがあります。 その直後のアドレス $00EB00400～$00EB07FF が空いているのでそこを追加の 128 枚分のスプライトスクロールレジスタとして使用します。 </span></p><p><span class="en"> Added program <a href="miscfiles.htm#spr256testx">misc/spr256test.x</a> to test the simultaneous display of 256 sprites. </span><span class="ja"> スプライト 256 枚同時表示をテストするプログラム<a href="miscfiles.htm#spr256testx">misc/spr256test.x</a>を追加しました。 </span></p><p><span class="smallimg"><img alt="spr256test.png" src="spr256test.png"></span></p><h4><span class="en"> 1024-dot non-interlaced </span><span class="ja"> 1024 ドットノンインターレース </span></h4><p><span class="en"> In the <a href="menu.htm#modification">modification menu</a> or <a href="parameter.htm#eleventhbit">parameter eleventhbit</a>, the width of R04/R05/R06/R07/R09 of CRTC can be extended from 10 bits to 11 bits. This modification enables 1024-dot vertical non-interlaced display. Changes made in the menu will be reflected after reset. </span><span class="ja"> <a href="menu.htm#modification">改造メニュー</a>または<a href="parameter.htm#eleventhbit">パラメータ eleventhbit</a>で、CRTC の R04/R05/R06/R07/R09 の幅を 10 ビットから 11 ビットに拡張できます。 この改造で縦 1024 ドットノンインターレース表示が可能になります。 メニューでの変更はリセット後に反映されます。 </span></p><h4><span class="en"> Wait cycles </span><span class="ja"> ウェイトサイクル </span></h4><p><span class="en"> Wait cycles are inserted for main memory and I/O port accesses. The number of wait cycles is not finely enough controlled and can be too many or too few. The wait cycles can be disabled in the <a href="menu.htm#mpu">MPU menu</a> or with the <a href="parameter.htm#waitcycles">parameter waitcycles</a>. Even if wait cycles are disabled, wait cycles are still inserted for battely-backed SRAM and ROM accesses as before. </span><span class="ja"> メインメモリと I/O ポートのアクセスにウェイトサイクルが挿入されます。 ウェイトサイクルの数は十分に細かく制御されておらず、多すぎたり少なすぎたりすることがあります。 ウェイトサイクルは<a href="menu.htm#mpu">MPU メニュー</a>または<a href="parameter.htm#waitcycles">パラメータ waitcycles</a>で無効にできます。 ウェイトサイクルを無効にしてもバッテリバックアップ SRAM と ROM のアクセスには従来どおりウェイトサイクルが挿入されます。 </span></p><p><span class="en"> When the cache is OFF on the X68030, wait cycles can be added to main memory and ROM accesses using system port $00E8E009. </span><span class="ja"> X68030 でキャッシュ OFF のとき、システムポート $00E8E009 を使ってメインメモリと ROM のアクセスにウェイトサイクルを追加できます。 </span></p><p><span class="en"> The XEiJ 68030 and 68060 do not have an instruction cache and data cache entity, and wait cycles are inserted into main memory and ROM accesses only when both caches are OFF. </span><span class="ja"> XEiJ の 68030 と 68060 には命令キャッシュとデータキャッシュの実体がなく、両方のキャッシュが OFF のときだけメインメモリと ROM のアクセスにウェイトサイクルが挿入される仕組みになっています。 </span></p><h4><span class="en"> Xellent30 </span><span class="ja"> Xellent30 </span></h4><p><span class="en"> Fixed a bug that caused main memory in the range $00BCxxxx-$00BFFFFFFF to become the supervisor area when it was returned to main memory from the Xellent30&#39;s onboard SRAM. </span><span class="ja"> $00BCxxxx～$00BFFFFF を Xellent30 のオンボード SRAM からメインメモリに戻したときその範囲のメインメモリがスーパーバイザ領域になってしまうバグを修正しました。 </span></p><p><span class="en"> You can select the Xellent30 I/O port address from $00EC0000/$00EC4000/$00EC8000/$00ECC000 in the <a href="menu.htm#xellent30">Xellent30 menu</a> or <a href="parameter.htm#xt3dipsw">parameter xt3dipsw</a>. The default value is $00ECC000. </span><span class="ja"> <a href="menu.htm#xellent30">Xellent30 メニュー</a>または<a href="parameter.htm#xt3dipsw">パラメータ xt3dipsw</a>で Xellent30 の I/O ポートのアドレスを $00EC0000/$00EC4000/$00EC8000/$00ECC000 から選べます。 初期値は $00ECC000 です。 </span></p><p><span class="en"> In the <a href="menu.htm#xellent30">Xellent30 menu</a> or <a href="parameter.htm#xt3memorykb">parameter xt3memorykb</a>, you can choose between 256KB and 1MB for the size of Xellent30&#39;s onboard SRAM. The default value is 256KB. If you choose 1MB, not only IPLROM but also CGROM will be replaced by onboard SRAM. Note that if you replace the onboard SRAM with an empty one, the text will be unreadable. </span><span class="ja"> <a href="menu.htm#xellent30">Xellent30 メニュー</a>または<a href="parameter.htm#xt3memorykb">パラメータ xt3memorykb</a>で Xellent30 のオンボード SRAM のサイズを 256KB と 1MB から選べます。 初期値は 256KB です。1MB にすると IPLROM だけでなく CGROM もオンボード SRAM に置き換わります。 オンボード SRAM が空のまま置き換えると文字が読めなくなってしまうので注意してください。 </span></p><p><span class="en"> In the <a href="menu.htm#xellent30">Xellent30 menu</a> or <a href="parameter.htm#xt3memorysave">parameter xt3memorysave</a>, you can choose whether to save the contents of the onboard SRAM of the Xellent30 at exit. The default value is off. The contents of the onboard SRAM are converted to text using gzip+base64 and saved in the <a href="parameter.htm#xt3memorydata">parameter xt3memorydata</a>. </span><span class="ja"> <a href="menu.htm#xellent30">Xellent30 メニュー</a>または<a href="parameter.htm#xt3memorysave">パラメータ xt3memorysave</a>で Xellent30 のオンボード SRAM の内容を終了時に保存するかどうか選べます。 初期値は off です。 オンボード SRAM の内容は gzip+base64 でテキストに変換されて<a href="parameter.htm#xt3memorydata">パラメータ xt3memorydata</a>に保存されます。 </span></p><h3><a href="#changes_0230121" id="changes_0230121">0.23.01.21</a></h3><h4><span class="en"> Execution environment </span><span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 19.0.2 2023-01-17. Older versions of JDK may not work. Please use the latest OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 19.0.2 2023-01-17 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4><span class="en"> MC68000 and MC68010 </span><span class="ja"> MC68000 と MC68010 </span></h4><p><span class="en"> The execution time of the following instructions has been corrected. </span><span class="ja"> 以下の命令の実行時間を修正しました。 </span></p><ul><li>ASR.L Dq,Dr</li><li>CHK.W &lt;ea&gt;,Dq</li><li>DIVS.W &lt;ea&gt;,Dq</li><li>DIVU.W &lt;ea&gt;,Dq</li><li>LSR.L Dq,Dr</li><li>MOVEM.L &lt;ea&gt;,&lt;list&gt;</li><li>ROR.L Dq,Dr</li><li>ROXR.L Dq,Dr</li><li>TAS.B &lt;mem&gt;</li></ul><h4><span class="en"> Video controller </span><span class="ja"> ビデオコントローラ </span></h4><p><span class="en"> The zero-priority case between the sprite screen and the text screen, where the text screen is in the foreground, was not handled correctly. One variable name was misspelled in <a href="miscfiles.htm#drawingmodepl">drawingmode.pl</a>, a program that automatically generates <a href="https://stdkmd.net/xeij/source/DrawingMode.htm">DrawingMode.java</a>, a program that overlays screens. </span><span class="ja"> スプライト画面とテキスト画面の間で発生するゼロプライオリティのうち、テキスト画面が手前にある場合が正しく処理されていませんでした。 画面の重ね合わせを行うプログラム <a href="https://stdkmd.net/xeij/source/DrawingMode.htm">DrawingMode.java</a> を自動生成するプログラム <a href="miscfiles.htm#drawingmodepl">drawingmode.pl</a> に 1 箇所変数名の書き間違いがありました。 </span></p><h3><a href="#changes_0230119" id="changes_0230119">0.23.01.19</a></h3><h4><span class="en"> MC68000 and MC68010 </span><span class="ja"> MC68000 と MC68010 </span></h4><p><span class="en"> The execution time of the following instructions has been corrected. </span><span class="ja"> 以下の命令の実行時間を修正しました。 </span></p><ul><li>ASR.L #&lt;data&gt;,Dr</li><li>DIVS.W #&lt;ea&gt;,Dq</li><li>DIVU.W #&lt;ea&gt;,Dq</li><li>ROL.B #8,Dr</li><li>ROR.B #8,Dr</li><li>LSR.L #&lt;data&gt;,Dr</li><li>MOVEM.L &lt;list&gt;,&lt;mem&gt;</li><li>ROXR.L #&lt;data&gt;,Dr</li><li>ROR.L #&lt;data&gt;,Dr</li></ul><h4><span class="en"> misc/* </span><span class="ja"> misc/* </span></h4><p><span class="en"> Added <a href="miscfiles.htm#optimes">optime.s</a>, <a href="miscfiles.htm#optimex">optime.x</a> and <a href="miscfiles.htm#optitestbat">optitest.bat</a>. </span><span class="ja"> <a href="miscfiles.htm#optimes">optime.s</a>、 <a href="miscfiles.htm#optimex">optime.x</a> および <a href="miscfiles.htm#optitestbat">optitest.bat</a> を追加しました。 </span></p><h3><a href="#changes_0230101" id="changes_0230101">0.23.01.01</a></h3><h4><span class="en"> Extended graphic screen </span><span class="ja"> 拡張グラフィック画面 </span></h4><p><span class="en"> Fixed a bug that caused IOCS _G_CLR_ON to fail to erase graphic screens even in standard screen mode when extended graphic screen was enabled; CRTC storage mode operation was causing memory map inconsistencies. </span><span class="ja"> 拡張グラフィック画面を有効にすると標準の画面モードでも IOCS _G_CLR_ON がグラフィック画面の消去に失敗するようになるバグを修正しました。CRTC のストレージモードの操作でメモリマップに不整合が生じていました。 </span></p><p><span class="en"> Supplement 1. IOCS _G_GLR_ON does not work as expected in memory mode 5,7. </span><span class="ja"> 補足 1。IOCS _G_GLR_ON はメモリモード 5,7 では期待通りに動作しません。 </span></p><p><span class="en"> Supplement 2. 512KB GVRAM in memory modes 0,1,3,4 and 2MB GVRAM in memory modes 5 and 7 are different entities. Clearing all 2MB of GVRAM in memory mode 7 does not clear the 512KB of GVRAM in memory mode 3. </span><span class="ja"> 補足 2。メモリモード 0,1,3,4 の 512KB の GVRAM とメモリモード 5,7 の 2MB の GVRAM は実体が異なります。メモリモード 7 で 2MB の GVRAM をすべてクリアしてもメモリモード 3 の 512KB の GVRAM はクリアされません。 </span></p><h4><span class="en"> File menu </span><span class="ja"> ファイルメニュー </span></h4><p><span class="en"> To make it easier to see long disk image file names, the file chooser does not open when a disk image file is already inserted, even if you click on the text field of the disk image file name. </span><span class="ja"> 長いディスクイメージファイル名を確認しやすくするために、ディスクイメージファイルが既に挿入されているときは、ディスクイメージファイル名のテキストフィールドをクリックしてもファイルチューザーが開かないようにしました。 </span></p><p><span class="en"> When replacing an inserted disk image file, click the <img alt="open" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAQklEQVR4XmNgQAK9vbf/E4uR9YE1ogjgABjqMARwALA6dCfgwxgakU3DBUY14gEUaUTGJGnEL4ADYKhDdwI+jKwPAAggv/VhB/lhAAAAAElFTkSuQmCC"> icon to the left of the disk image file name text field, not the disk image file name text field. </span><span class="ja"> 挿入されているディスクイメージファイルを交換するときは、ディスクイメージファイル名のテキストフィールドではなく、その左側にある <img alt="open" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAQklEQVR4XmNgQAK9vbf/E4uR9YE1ogjgABjqMARwALA6dCfgwxgakU3DBUY14gEUaUTGJGnEL4ADYKhDdwI+jKwPAAggv/VhB/lhAAAAAElFTkSuQmCC"> アイコンをクリックしてください。 </span></p><h4><span class="en"> IPLROM 1.6 </span><span class="ja"> IPLROM 1.6 </span></h4><p><span class="en"> We changed some of the <a href="iplrom16.htm#nameandcode">model codes</a> written at the end of IPLROM 1.6. Some of ACE/EXPERT(II)/PRO(II) models whose CZ name ends with -GY, the colors of those models were similar to those of the first generation, so we had set their color codes to 0 (office gray), the same as the first generation. Since we received a suggestion that the color code should match the catalog description, we have changed those color codes to 1 (gray), the same as Compact. </span><span class="ja"> IPLROM 1.6 の末尾に書き込まれる <a href="iplrom16.htm#nameandcode">機種コード</a> の一部を変更しました。ACE/EXPERT(II)/PRO(II) のうち CZ 名が -GY で終わる機種の色は初代に近いので、それらの色コードを初代と同じ 0(オフィスグレー) にしていました。色コードをカタログの表記に合わせるべきとのご意見をいただいたので、それらの色コードを Compact と同じ 1(グレー) に変更しました。 </span></p><h4><span class="en"> Key assignments </span><span class="ja"> キー割り当て </span></h4><p><span class="en"> The design of the <a href="feature.htm#keyassignments">key assignments window</a> has been changed. The input area, which was previously arranged in key code order, is now arranged in the shape of the X68000 keyboard, making it easier to understand the key correspondence. </span><span class="ja"> <a href="feature.htm#keyassignments">キー割り当てウインドウ</a> のデザインを変更しました。キーコード順に並べていた入力エリアを X68000 のキーボードの形に並べることで、キーの対応を分かりやすくしました。 </span></p><p><span class="en"> US layout can be selected when restoring key assignments to their default values; a <a href="parameter.htm#keymapus">parameter keymapus</a> has been added to select US layout. </span><span class="ja"> キー割り当てを初期値に戻すとき、US レイアウトを選択できます。US レイアウトを選択する <a href="parameter.htm#keymapus">パラメータ keymapus</a> を追加しました。 </span></p><p><span class="en"> The US layout for macOS was created by tantan. The following is a comment written by tantan. </span><span class="ja"> macOS の US レイアウトは tantan さんに作成していただきました。以下は tantan さんに書いていただいたコメントです。 </span></p><pre>
  KBD_DEFAULT_MAP_MAC_US
    macOS + USキーボード 用 XEiJ デフォルトキーマッピング

  macOS + USキーボード で XEiJ を使用する場合、KBD_DEFAULT_MAP_MAC のマッピングでは
  主要記号を含む一部の文字が入力できません。これは一部のキーが KeyEvent#getExtendedKeyCode() で
  JISキーボードとは異なる値を返すためです。

  このマッピングを使うことでUSキーボードでもすべての記号文字が入力可能となります。
  逆にこのマッピングを使うとJISキーボードでは正しく入力できなくなるので注意してください。

  また、M.Kamadaさん作 <a href="http://retropc.net/x68000/software/system/key/keywitch/" target="_blank">KeyWitch.X</a> を使用して Human68K 側をUS(ASCII)配列にすると、
  SHIFTキーと組み合わせた記号入力も含め、XEiJ上で完全なUS配列となります。(推奨)

  KeyWitch.X を組み込まない場合は、XEiJ上でほぼJISキーボードの配列になります。

  KeyWitch.Xと68エミュレータについては以下を参考にさせて頂きました。
  <a href="https://yatte-mita.hateblo.jp/entry/2019/06/15/130053" target="_blank">https://yatte-mita.hateblo.jp/entry/2019/06/15/130053</a>

  KeyWitch.X は CONFIG.SYS に以下のように追加してください。
  DEVICE=\path\to\KeyWitch.x -e \path\to\ascii.env
</pre><p><span class="en"> Fixed a bug that the keycode with the largest keycode disappears every time XEiJ is started up when key assignments are changed. </span><span class="ja"> キー割り当てを変更したとき、XEiJ を起動する度にキーコードが一番大きいキー割り当てが消えてゆくバグを修正しました。 </span></p><p><span class="en"> Fixed a bug that 8 on the numeric keypad could not be input when NumLock was ON in Windows. </span><span class="ja"> Windows で NumLock ON のとき、テンキーの 8 が入力できないバグを修正しました。 </span></p><h4><span class="en"> PPI </span><span class="ja"> PPI </span></h4><p><span class="en"> Fixed a bug that caused the output to be sent to joystick port 2 instead of joystick port 1 when writing $0C to $0F to $00E9A007. No actual harm was done since no device using this feature was connected. </span><span class="ja"> $00E9A007 に $0C～$0F を書き込んだとき、ジョイスティックポート 1 ではなくジョイスティックボート 2 に出力されていたバグを修正しました。この機能を使うデバイスが接続されていないので実害はありませんでした。 </span></p><h4><span class="en"> SRAM </span><span class="ja"> SRAM </span></h4><p><span class="en"> When the model is changed, adjust the ROM boot handle so that errors do not occur due to a change in the presence or absence of SCSI or a change in the presence or absence of HFS. </span><span class="ja"> 機種を変更したとき、SCSI の有無の変化または HFS の有無の変化でエラーが発生しないように、ROM 起動ハンドルを調整します。 </span></p><p><span class="en"> When the ROM boot handle points to internal SCSI but there is no internal SCSI, the ROM boot handle is changed to extended SCSI if there is extended SCSI, otherwise the ROM boot handle is erased and changed to STD boot. </span><span class="ja"> ROM 起動ハンドルが内蔵 SCSI を指しているのに内蔵 SCSI がないときは、拡張 SCSI があれば ROM 起動ハンドルを拡張 SCSI に変更し、なければ ROM 起動ハンドルが消去して STD 起動に変更します。 </span></p><p><span class="en"> When the ROM boot handle points to extended SCSI but there is no extended SCSI, the ROM boot handle is changed to internal SCSI if there is internal SCSI, otherwise the ROM boot handle is erased and changed to STD boot. </span><span class="ja"> ROM 起動ハンドルが拡張 SCSI を指しているのに拡張 SCSI がないときは、内蔵 SCSI があれば ROM 起動ハンドルを内蔵 SCSI に変更し、なければ ROM 起動ハンドルを消去して STD 起動に変更します。 </span></p><p><span class="en"> If the ROM boot handle points to HFS but the HFS directory is not set, erase the ROM boot handle and change to STD boot. </span><span class="ja"> ROM 起動ハンドルが HFS を指しているのに HFS のディレクトリが設定されていないときは、ROM 起動ハンドルを消去して STD 起動に変更します。 </span></p><h3><a href="#changes_0221018" id="changes_0221018">0.22.10.18</a></h3><h4><span class="en">Execution Environment</span><span class="ja">実行環境</span></h4><p><span class="en"> As of this writing, the latest <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> is 19 2022-09-20. Older versions of JDK may not work. Use the latest version of OpenJDK if possible. </span><span class="ja"> これを書いている時点で最新の <a href="https://jdk.java.net/" target="_blank">OpenJDK</a> は 19 2022-09-20 です。 これより古いバージョンの JDK では動作しないかも知れません。 可能な限り最新の OpenJDK を使用してください。 </span></p><h4><span class="en">File menu</span><span class="ja">ファイルメニュー</span></h4><p><span class="en"> In the <a href="menu.htm#file">File menu</a>, when the path name of a disk image is long, the hidden part is displayed by tracing the letter. </span><span class="ja"> <a href="menu.htm#file">ファイルメニュー</a> で、ディスクイメージのパス名が長いとき、文字をなぞると隠れている部分が表示されるようにしました。 </span></p><h4><span class="en">Host File System</span><span class="ja">ホストファイルシステム</span></h4><p><span class="en"> When setting the host directory name as the volume name of a drive in the <a href="feature.htm#hostfilesystem">host file system</a>, if it does not fit in 21 bytes, assign a string consisting of the first 5 bytes and the last 15 bytes joined by &#34;_&#34;. </span><span class="ja"> <a href="feature.htm#hostfilesystem">ホストファイルシステム</a> のドライブのボリューム名としてホストのディレクトリ名を設定するとき、21 バイトに収まらなければ、先頭 5 バイトと末尾 15 バイトを「_」で繋いだ文字列を割り当てます。 </span></p><p><span class="en"> When <a href="menu.htm#utf8warning">UTF-8 warning</a> in the <a href="menu.htm#hfs">HFS menu</a> or the parameter <a href="parameter.htm#utf8warning">utf8warning</a> is on, it is reported that the character encoding of the file you try to open in the host file system is UTF-8. </span><span class="ja"> <a href="menu.htm#hfs">HFS メニュー</a> の <a href="menu.htm#utf8warning">UTF-8 警告</a> またはパラメータ <a href="parameter.htm#utf8warning">utf8warning</a> が on のとき、ホストファイルシステムで開こうとしたファイルの文字コードが UTF-8 であることが報告されます。 </span></p><h4>IPLROM 1.6</h4><p><span class="en"> When the MPU is a 68040 or 68060, <a href="feature.htm#iplrom16">IPLROM 1.6</a> does not turn on the data cache even if it is configured to boot with the data cache ON. 060turbo.sys turns on the data cache after the MMU is enabled. Note that as of this writing, there is no way to enable the MMU with the combination of 040turbo and IPLROM 1.6, so the combination of 040turbo and IPLROM 1.6 is not recommended. </span><span class="ja"> MPU が 68040 または 68060 のとき、データキャッシュ ON で起動するように設定されていても、IPLROM 1.6 はデータキャッシュを ON にしません。060turbo.sys が、MMU を有効にした後にデータキャッシュを ON にします。 なお、これを書いている時点で 040turbo と IPLROM 1.6 の組み合わせで MMU を有効にする手立てがありませんので、040turbo と IPLROM 1.6 の組み合わせは推奨できません。 </span></p><h4><span class="en">Paste</span><span class="ja">貼り付け</span></h4><p><span class="en"> If you <a href="feature.htm#paste">paste</a> a large amount of text by mistake, you can stop pasting by clicking the <a href="menu.htm#stoppaste">Stop paste button</a> in the <a href="menu.htm#pastesettings">Paste settings menu</a>. </span><span class="ja"> 間違って大量のテキストを <a href="feature.htm#paste">貼り付け</a> てしまったとき、<a href="menu.htm#pastesettings">貼り付け設定メニュー</a> の <a href="menu.htm#stoppaste">貼り付け中止ボタン</a> で貼り付けを中止できます。 </span></p><p><span class="en"> On Windows, when the <a href="menu.htm#pastepipe">Paste pipe checkbox</a> in the <a href="menu.htm#pastesettings">Paste settings menu</a> or the parameter <a href="parameter.htm#pastepipe">pastepipe</a> is on, you can paste text from other processes via the <a href="feature.htm#pastepipe">Paste pipe</a> &#34;\\.\pipe\XEiJPaste&#34;. Put xeijwin.dll in the current directory or in a directory in your path. </span><span class="ja"> Windows で、<a href="menu.htm#pastesettings">貼り付け設定メニュー</a> の <a href="menu.htm#pastepipe">貼り付けパイプチェックボックス</a> またはパラメータ <a href="parameter.htm#pastepipe">pastepipe</a> が on のとき、<a href="feature.htm#pastepipe">貼り付けパイプ</a> 「\\.\pipe\XEiJPaste」を介して他のプロセスからテキストを貼り付けられます。xeijwin.dll をカレントディレクトリまたはパスの通っているディレクトリに置いてください。 </span></p><pre>echo memfree &gt; \\.\pipe\XEiJPaste</pre><h4><span class="en">Printer</span><span class="ja">プリンタ</span></h4><p><span class="en"> You can choose between Mincho and Gothic typefaces for the <a href="feature.htm#printer">printer</a>. The typeface selection at reset is stored in the parameter <a href="parameter.htm#prndipsw">prndipsw</a>. </span><span class="ja"> <a href="feature.htm#printer">プリンタ</a> の書体を明朝体とゴシック体から選択できます。 リセット時の書体の選択はパラメータ <a href="parameter.htm#prndipsw">prndipsw</a> に保存されます。 </span></p><p><span class="en"> The paper size is stored in the parameter <a href="parameter.htm#prnsize">prnsize</a> and the paper orientation in the parameter <a href="parameter.htm#prnorientation">prnorientation</a>. </span><span class="ja"> 用紙のサイズはパラメータ <a href="parameter.htm#prnsize">prnsize</a> に、用紙の方向はパラメータ <a href="parameter.htm#prnorientation">prnorientation</a> に保存されます。 </span></p><p><span class="en"> The paper margins are stored in the parameters <a href="parameter.htm#prntopmargin">prntopmargin</a>, <a href="parameter.htm#prnleftmargin">prnleftmargin</a>, <a href="parameter.htm#prnrightmargin">prnrightmargin</a> and <a href="parameter.htm#prnbottommargin">prnbottommargin</a>. </span><span class="ja"> 用紙の余白はパラメータ <a href="parameter.htm#prntopmargin">prntopmargin</a>、<a href="parameter.htm#prnleftmargin">prnleftmargin</a>、<a href="parameter.htm#prnrightmargin">prnrightmargin</a> および <a href="parameter.htm#prnbottommargin">prnbottommargin</a> に保存されます。 </span></p><p><span class="en"> The paper can be rotated in 90°increments. Vertical writing mode should be rotated to the right, and SX-Window hardcopy should be rotated to the left for better viewing. The paper rotation is stored in the parameter <a href="parameter.htm#prnrotation">prnrotation</a>. </span><span class="ja"> 用紙を 90°単位で回転させることができます。 縦書きモードは右に、また、SX-Window のハードコピーは左に回転させると見やすいでしょう。 用紙の回転はパラメータ <a href="parameter.htm#prnrotation">prnrotation</a> に保存されます。 </span></p><p><span class="en"> Dark mode can be selected. When dark mode is selected, black and white are switched. The other colors remain unchanged. The dark mode is stored in the parameter <a href="parameter.htm#prndarkmode">prndarkmode</a>. </span><span class="ja"> ダークモードを選択できます。 ダークモードを選択すると白と黒が入れ替わります。 他の色は変わりません。 ダークモードはパラメータ <a href="parameter.htm#prndarkmode">prndarkmode</a> に保存されます。 </span></p><p><span class="en"> The printer can be taken offline. The choice between offline and online is stored in the parameter <a href="parameter.htm#prnonline">prnonline</a>. </span><span class="ja"> プリンタをオフラインにできます。 オフラインとオンラインの選択はパラメータ <a href="parameter.htm#prnonline">prnonline</a> に保存されます。 </span></p><p><span class="en"> The color of the single-color ink ribbon is stored in the parameter <a href="parameter.htm#prnsinglecolor">prnsinglecolor</a>. </span><span class="ja"> 単色インクリボンの色はパラメータ <a href="parameter.htm#prnsinglecolor">prnsinglecolor</a> に保存されます。 </span></p><p><span class="en"> The display scale factor is stored in the parameter <a href="parameter.htm#prnscalefactor">prnscalefactor</a>. </span><span class="ja"> 表示倍率はパラメータ <a href="parameter.htm#prnscalefactor">prnscalefactor</a> に保存されます。 </span></p><p><span class="en"> Adjusted the position and orientation of punctuation, long vowels and wave dashes, and small hiragana and katakana in vertical writing mode. </span><span class="ja"> 縦書きモードのときの句読点、長音と波ダッシュ、小さいひらがな・カタカナの位置と向きを調整しました。 </span></p><p><span class="en"> If SJIS code is used in Kanji mode, it is converted to JIS code and printed. Kanji mode ON and Kanji mode OFF are necessary even when SJIS code is used. </span><span class="ja"> 漢字モードのとき SJIS コードが使用されたら JIS コードに変換して印字します。SJIS コードを使用する場合も漢字モード ON と漢字モード OFF は必要です。 </span></p><h3><a href="#changes_0220901" id="changes_0220901">0.22.09.01</a></h3><h4><span class="en">Display</span> <span class="ja">画面</span></h4><p><span class="en"> The 384x256 dot and its left and right sides shaved 256x256 dot screens with square pixels have been changed to 8:9 portrait pixels by default. You can select conventional square pixels in the menu and parameters. Added <!--a href="menu.htm#hrlsquare"-->HRL square pixels<!--/a-->to the <a href="menu.htm#display">display menu</a>. Added <!--a href="parameter.htm#hrlsquare"-->parameter hrlsquare<!--/a-->. </span> <span class="ja"> 384x256 ドットおよびその左右を削った 256x256 ドットの画面を正方形ピクセルにしていましたが、デフォルトを 8:9 の縦長ピクセルに変更しました。 メニューとパラメータで従来の正方形ピクセルを選択できます。 <a href="menu.htm#display">画面メニュー</a> に <!--a href="menu.htm#hrlsquare"-->HRL 正方形ピクセル<!--/a-->を追加しました。 <!--a href="parameter.htm#hrlsquare"-->パラメータ hrlsquare<!--/a-->を追加しました。 </span></p><h4><span class="en">Host File System</span> <span class="ja">ホストファイルシステム</span></h4><p><span class="en"> Fixed a bug that caused the volume name length limit to be 22 characters instead of 21 when setting the host directory name as the volume name for a drive in the host file system. </span> <span class="ja"> ホストファイルシステムのドライブのボリューム名としてホストのディレクトリ名を設定するときのボリューム名の長さの上限が 21 文字ではなく 22 文字になっていたバグを修正しました。 </span></p><h3><a href="#changes_0220825" id="changes_0220825">0.22.08.25</a></h3><h4><span class="en"> Configuration File </span> <span class="ja"> 設定ファイル </span></h4><p><span class="en"> When creating a configuration file, the use of StringBuilder, which has a capacity limitation, could cause the creation of the configuration file to fail if the contents of local memory were saved. </span> <span class="ja"> 設定ファイルを作成するとき容量制限のある StringBuilder を使用していたため、ローカルメモリの内容を保存すると設定ファイルを作成に失敗することがありました。 </span></p><p><span class="en"> The method has been changed to one that does not use StringBuilder. </span> <span class="ja"> StringBuilder を使用しない方法に変更しました。 </span></p><h4><span class="en"> Copyright </span> <span class="ja"> 著作権 </span></h4><p><span class="en"> The copyright notice has been changed since YM2151 was moved to the YMFM-derived code. </span> <span class="ja"> YM2151 を ymfm 由来のコードへ移行したので著作権の表示を変更しました。 </span></p><p><span class="en"> The license terms have not changed. </span> <span class="ja"> 使用許諾条件は変わっていません。 </span></p><h4><span class="en"> Creating ROM Files </span> <span class="ja"> ROM ファイルの作成 </span></h4><p><span class="en"> Added Create EVENPRO.BIN and Create ODDPRO.BIN to the Create ROM File menu. </span> <span class="ja"> ROM ファイルの作成メニューに EVENPRO.BIN の作成と ODDPRO.BIN の作成を追加しました。 </span></p><p><span class="en"> Address range and file size were written in the menu for creating ROM files. </span> <span class="ja"> ROM ファイルの作成メニューにアドレスの範囲とファイルサイズを書きました。 </span></p><h4><span class="en"> DMAC </span> <span class="ja"> DMAC </span></h4><p><span class="en"> If an address of $01000000 or more is written to MAR/DAR/BAR of DMAC at 68030 or more, this is reported. </span> <span class="ja"> 68030 以上のとき DMAC の MAR/DAR/BAR に $01000000 以上のアドレスが書き込まれたらそのことを報告します。 </span></p><h4><span class="en"> Execution Environment </span> <span class="ja"> 実行環境 </span></h4><p><span class="en"> As of this writing, the latest OpenJDK is 18.0.2.1 2022-08-18. </span> <span class="ja"> これを書いている時点で最新の OpenJDK は 18.0.2.1 2022-08-18 です。 </span></p><p><span class="en"> Older versions of JDK may not work. </span> <span class="ja"> これより古いバージョンの JDK では動作しないかも知れません。 </span></p><p><span class="en"> Use the latest version of OpenJDK if possible. </span> <span class="ja"> 可能な限り最新の OpenJDK を使用してください。 </span></p><h4><span class="en"> Host File System </span> <span class="ja"> ホストファイルシステム </span></h4><p><span class="en"> The readonly attribute can now be set for files in the host file system. </span> <span class="ja"> ホストファイルシステムにあるファイルに readonly 属性を設定できるようにしました。 </span></p><h4><span class="en"> Indicator </span> <span class="ja"> インジケータ </span></h4><p><span class="en"> The model name display has been moved from the indicator to the title bar. </span> <span class="ja"> 機種名の表示をインジケータからタイトルバーへ移しました。 </span></p><p><span class="en"> Indicator text has been enlarged. </span> <span class="ja"> インジケータの文字を大きくしました。 </span></p><h4><span class="en"> IPLROM 1.6 </span> <span class="ja"> IPLROM 1.6 </span></h4><p><span class="en"> Fixed a bug that caused the startup screen to display 2MB when the size of main memory was 1MB on the X68000 Shodai/ACE/PRO/PROII. </span> <span class="ja"> X68000 初代 /ACE/PRO/PROII でメインメモリのサイズが 1MB のとき起動画面に 2MB と表示されるバグを修正しました。 </span></p><p><span class="en"> Added a workaround for the problem that IOCS _B_VERIFY in IPLROM 1.2-derived SASI BIOS does not work correctly when the supervisor stack is in an area where DMA transfer is not possible. </span> <span class="ja"> IPLROM 1.2 由来の SASI BIOS の IOCS _B_VERIFY がスーパーバイザスタックが DMA 転送できない領域にあると正常に動作しない問題の対策を追加しました。 </span></p><p><span class="en"> The <a href="iplrom16.htm#nameandcode">model name and model code</a> are placed at the end of IPLROM 1.6. </span> <span class="ja"> IPLROM 1.6 の末尾に <a href="iplrom16.htm#nameandcode">機種名と機種コード</a> が入ります。 </span></p><p><span class="en"> The model name is displayed on the startup screen. The model name displayed is not the model name determined at startup, but the model name written when XEiJ created the ROM data. </span> <span class="ja"> 起動画面に機種名を表示します。表示されるのは起動時に判別された機種名ではなく XEiJ が ROM のデータを作成したときに書き込まれた機種名です。 </span></p><p><span class="en"> The judgment of the machine with built-in SASI is now compatible with X68000_MiSTer. </span> <span class="ja"> SASI 内蔵機の判定を X68000_MiSTer に対応しました。 </span></p><p><span class="en"> The screen mode when starting up with the T key held down has been changed to CRT screen mode 3 (256x240 non-interlaced). </span> <span class="ja"> T キーを押しながら起動したときの画面モードを CRT 向け画面モード 3(256x240 ノンインターレース) に変更しました。 </span></p><p><span class="en"> I wrote <a href="iplrom16.htm#burn">How to use IPLROM 1.6 on real machines</a>. </span> <span class="ja"> <a href="iplrom16.htm#burn">実機で IPLROM 1.6 を使う方法</a> を書きました。 </span></p><p><span class="en"> Updated ROM Debugger 3.60. Fixed several bugs in DB.X 3.00. </span> <span class="ja"> ROM Debugger 3.60 を更新しました。DB.X 3.00 の不具合を幾つか修正しました。 </span></p><h4><span class="en"> Joystick Port </span> <span class="ja"> ジョイスティックポート </span></h4><p><span class="en"> When XEiJ was started, the joystick port setting screen always showed port 1. </span> <span class="ja"> XEiJ を起動したときジョイスティックポートの設定画面にはいつもポート 1 が表示されていました。 </span></p><p><span class="en"> Now it shows port 2 when only port 2 is connected or only port 2 has a Shiromadokun. </span> <span class="ja"> ポート 2 だけ接続されているまたはポート 2 だけ白窓君のときはポート 2 を表示するように変更しました。 </span></p><h4><span class="en"> Main Memory </span> <span class="ja"> メインメモリ </span></h4><p><span class="en"> When the size of main memory is 1MB on X68000 Shodai/ACE/PRO/PROII, access to $00100000-$001FFFFF does not cause bus error. </span> <span class="ja"> X68000 初代 /ACE/PRO/PROII でメインメモリのサイズが 1MB のとき $00100000-$001FFFFF へのアクセスでバスエラーが発生しないようにしました。 </span></p><h4><span class="en"> Model </span> <span class="ja"> 機種 </span></h4><p><span class="en"> The accelerator name 060turboPRO can be specified. 060turboPRO is a fictitious model combining X68000 PRO and MC68060. </span> <span class="ja"> アクセラレータ名 060turboPRO を指定できます。060turboPRO は X68000 PRO と MC68060 を組み合わせた架空の機種です。 </span></p><p><span class="en"> You can specify the CZ name in addition to the common name and the accelerator name in the <a href="parameter.htm#model">parameter model</a>. </span> <span class="ja"> <a href="parameter.htm#model">パラメータ model</a> に通称とアクレラレータ名に加えて CZ 名を指定できます。 </span></p><h4><span class="en"> OPM Log </span> <span class="ja"> OPM ログ </span></h4><p><span class="en"> <a href="feature.htm#opmlog">OPM log</a> has been added. </span> <span class="ja"> <a href="feature.htm#opmlog">OPM ログ</a> を追加しました。 </span></p><p><span class="en"> Writes to YM2151 registers during operation can be recorded with the elapsed time in units of 1 μ s and the performance can be replayed. </span> <span class="ja"> 動作中の YM2151 のレジスタへの書き込みを 1 μ s 単位の経過時間とともに記録して演奏を再生できます。 </span></p><p><span class="en"> You can check the emulation of YM2151 and the operation of the sound source driver. </span> <span class="ja"> YM2151 のエミュレーションや音源ドライバの動作を確認できます。 </span></p><h4><span class="en"> Shiromadokun </span> <span class="ja"> 白窓君 </span></h4><p><span class="en"> Fixed a bug in which the Clear Display command of Shiromadokun was filling the screen with 0x00 when it should have been filled with 0x20. </span> <span class="ja"> 白窓君の Clear Display コマンドは画面を 0x20 で埋めなければならないのに 0x00 で埋めていたバグを修正しました。 </span></p><h4><span class="en"> YM2151 </span> <span class="ja"> YM2151 </span></h4><p><span class="en"> YM2151 has been migrated from the old MAME-derived code to the new YMFM-derived code. </span> <span class="ja"> YM2151 を旧 MAME 由来のコードから新しい ymfm 由来のコードへ移行しました。 </span></p><p><span class="en"> The code for the other parts of XEiJ except for YM2151 was originally developed by me, Makoto Kamada, and does not use any other emulator&#39;s code. </span> <span class="ja"> なお、XEiJ の YM2151 以外の部分のコードは私 Makoto Kamada が独自に開発したものであり、他のエミュレータのコードは使用していません。 </span></p><h3><a href="#changes_0220608" id="changes_0220608">0.22.06.08</a></h3><h4><span class="en"> Stereoscopic viewing </span> <span class="ja"> 立体視 </span></h4><p><span class="en"> <a href="feature.htm#stereoscopic">Stereoscopic viewing</a> using the STEREOSCOPIC connector on the back of the X68000 is now supported. </span> <span class="ja"> X68000 の背面にある STEREOSCOPIC コネクタを用いる <a href="feature.htm#stereoscopic">立体視</a> に対応しました。 </span></p><p><span class="en"> The stereoscopic viewing method can be selected from naked-eye crossing, naked-eye parallel, side-by-side, and top-and-bottom. Side-by-side and top-and-bottom are intended to be projected on a 3D monitor, but the operation has not been actually connected and confirmed. </span> <span class="ja"> 立体視の方法を、裸眼交差法、裸眼平行法、サイドバイサイド、トップアンドボトムから選択できます。 サイドバイサイドとトップアンドボトムは 3D モニタに映すことを想定していますが、実際に接続して動作を確認していません。 </span></p><p><span class="en"> The menu bar and keyboard will not be displayed when side-by-side or top-and-bottom is selected in full-screen mode and stereoscopic view is selected. You can exit full-screen mode with the F11 key. The Alt+Shift+T keys can be used to start or end stereoscopic viewing. </span> <span class="ja"> 全画面表示かつ立体視のとき、サイドバイサイドまたはトップアンドボトムを選択すると、メニューバーとキーボードが表示されなくなります。F11 キーで全画面表示を終了できます。Alt+Shift+T キーで立体視を開始または終了できます。 </span></p><p><span class="en"> The <a href="menu.htm#stereoscopic">stereoscopic viewing item</a> has been added to the <a href="menu.htm#display">display menu</a>. </span> <span class="ja"> <a href="menu.htm#display">画面メニュー</a> に <a href="menu.htm#stereoscopic">立体視の項目</a> を追加しました。 </span></p><p><span class="en"> Added parameters <a href="parameter.htm#stereoscopic">stereoscopic</a> and <a href="parameter.htm#stereoscopicmethod">stereoscopicmethod</a>. </span> <span class="ja"> パラメータ <a href="parameter.htm#stereoscopic">stereoscopic</a> および <a href="parameter.htm#stereoscopicmethod">stereoscopicmethod</a> を追加しました。 </span></p><h4><span class="en"> GIF animation recording </span> <span class="ja"> GIF アニメーション録画 </span></h4><p><span class="en"> Added <a href="feature.htm#gifanimationrecording">GIF animation recording feature</a>. The X68000 screen can be captured frame by frame and saved as a GIF animation. </span> <span class="ja"> <a href="feature.htm#gifanimationrecording">GIF アニメーション録画機能</a> を追加しました。X68000 の画面をフレーム毎に取り込んで GIF アニメーションとして保存できます。 </span></p><p><span class="en"> You can select the waiting time, recording time, magnification factor, and interpolation algorithm in the <a href="menu.htm#gifanimationrecordingsettings">GIF animation recording settings menu</a> in the <a href="menu.htm#display">display menu</a>. The waiting time is the number of seconds between when you press start recording button and when the recording starts, from 0 to 10 seconds. If you want to record a shooter&#39;s battlefield and you are reaching for the start recording button, you might get hit. By setting a wait time, you can pause the game and press the start recording button before entering the fight. The recording time is the number of seconds between the start and end of the recording, from 1 to 30 seconds. Recording for 30 seconds may not be possible in some environments because it consumes a lot of memory. Magnification is the magnification of the screen, from 10% to 200% with 100% being 1x. Interpolation algorithm is the algorithm used to scale the screen. You can choose between nearest neighbor interpolation, linear interpolation, and bicubic interpolation. </span> <span class="ja"> <a href="menu.htm#display">画面メニュー</a> の中の <a href="menu.htm#gifanimationrecordingsettings">GIF アニメーション録画設定メニュー</a> で待ち時間、録画時間、倍率および補間アルゴリズムを選択できます。 待ち時間は録画開始ボタンを押してから録画が始まるまでの秒数です。0 秒から 10 秒まで指定できます。シューティングゲームの修羅場を録画したいときに録画開始ボタンに手を伸ばしていたらやられてしまうかも知れません。待ち時間を設定すれば修羅場に入る前にゲームを一時停止させて録画開始ボタンを押しておけます。 録画時間は録画が始まってから終わるまでの秒数です。1 秒から 30 秒まで指定できます。大量のメモリを消費するので環境によっては 30 秒間録画することはできないかも知れません。 倍率は画面の拡大率です。100% が 1 倍で 10% から 200% まで指定できます。 補間アルゴリズムは画面を拡大縮小するときのアルゴリズムです。最近傍補間、線形補間および三次補間から選択できます。 </span></p><p><span class="en"> Start recording with the start recording button in the <a href="menu.htm#display">display menu</a>. If you select GIF animation recording in the <a href="menu.htm#f11key">F11 key menu</a> in the <a href="menu.htm#input">input menu</a>, you can start recording with the F11 key. Recording will automatically end at the specified time. Recording cannot be stopped. Do not change the screen mode or exit the emulator while recording. </span> <span class="ja"> <a href="menu.htm#display">画面メニュー</a> の中の録画開始ボタンで録画を開始します。 <a href="menu.htm#input">入力メニュー</a> の中の <a href="menu.htm#f11key">F11 キーメニュー</a> で GIF アニメーション録画を選択すると F11 キーで録画を開始できます。 録画は指定された時間で自動的に終了します。 録画を中止することはできません。録画中に画面モードを変更したりエミュレータを終了させたりしないでください。 </span></p><p><span class="en"> GIF files are saved in the same capture directory as screenshots. </span> <span class="ja"> GIF ファイルはスクリーンショットと同じ capture ディレクトリに保存されます。 </span></p><p><span class="en"> Added parameters <a href="parameter.htm#gifwaitingtime">gifwaitingtime</a>, <a href="parameter.htm#gifrecordingtime">gifrecordingtime</a>, <a href="parameter.htm#gifmagnification">gifmagnification</a> and <a href="parameter.htm#gifinterpolation">gifinterpolation</a>. </span> <span class="ja"> パラメータ <a href="parameter.htm#gifwaitingtime">gifwaitingtime</a>、<a href="parameter.htm#gifrecordingtime">gifrecordingtime</a>、<a href="parameter.htm#gifmagnification">gifmagnification</a> および <a href="parameter.htm#gifinterpolation">gifinterpolation</a> を追加しました。 </span></p><h4><span class="en"> Model name </span> <span class="ja"> 機種名 </span></h4><p><span class="en"> Shodai, ACE, PRO and 030Compact can be specified as model names. The model name is written at the end of IPLROM 1.6 ($00FFFFE4-). </span> <span class="ja"> 機種名に Shodai、ACE、PRO および 030Compact を指定できます。 機種名は IPLROM 1.6 の末尾 ($00FFFFE4-) に書き込まれます。 </span></p><h4>DMAC</h4><p><span class="en"> HLT is now supported. a_stop and a_cont will work. </span> <span class="ja"> HLT に対応しました。a_stop と a_cont が機能します。 </span></p><p><span class="en"> The number of cycles required for DMAC to transfer one word from SRAM to SRAM is 12 for PRO, 9 for Compact, and 10 for others. </span> <span class="ja"> DMAC が SRAM から SRAM へ 1 ワード転送するときの所要サイクル数が、PRO は 12、Compact は 9、その他は 10 になります。 </span></p><h4>MC68000</h4><p><span class="en"> When ABCD/NBCD/SBCD was executed, the undefined V flag was cleared. This was changed so that the V flag is set when overflow occurs due to addition or subtraction of correction values, otherwise the V flag is cleared. (Reference: <a href="https://x.com/KiC6280/status/1350707073412071425" target="_blank">K.i&#39;s tweet</a>) </span> <span class="ja"> ABCD/NBCD/SBCD が実行されたとき、未定義の V フラグをクリアしていました。 これを、補正値の加算または減算でオーバーフローしたとき V フラグをセット、さもなくば V フラグをクリアするように変更しました。(参考 : <a href="https://x.com/KiC6280/status/1350707073412071425" target="_blank">K.i さんのツイート</a>) </span></p><h4>MC68010</h4><p><span class="en"> The undefined V flag change for ABCD/NBCD/SBCD are now the same as in MC68000. </span> <span class="ja"> ABCD/NBCD/SBCD の未定義の V フラグの変化を MC68000 と同じにしました。 </span></p><p><span class="en"> The number of MULU/MULS cycles is now the same as on the MC68000. </span> <span class="ja"> MULU/MULS のサイクル数を MC68000 と同じにしました。 </span></p><h4>MC68060</h4><p><span class="en"> When MOVE16 (Ar)+,(Ar)+ was executed, Ar was increased by 32. This has been corrected to increase Ar by 16. </span> <span class="ja"> MOVE16 (Ar)+,(Ar)+ が実行されたとき、Ar を 32 増やしていました。 これを、Ar を 16 増やすように修正しました。 </span></p><h4><span class="en"> Screen mode test </span> <span class="ja"> 表示モードテスト </span></h4><p><span class="en"> Fixed a bug that prevented the screen from updating correctly when operating the screen mode test with the MPU stopped in low-resolution mode. </span> <span class="ja"> 低解像度モードのとき MPU を停止させて表示モードテストを操作すると画面が正しく更新されないバグを修正しました。 </span></p><h4>IPLROM 1.6</h4><p><span class="en"> Added startup device as a display item on the startup screen. </span> <span class="ja"> 起動画面の表示項目に起動デバイスを追加しました。 </span></p><p><span class="en"> The display position of the startup screen is no longer shifted to the right when starting up in VGA mode. </span> <span class="ja"> VGA モードで起動したとき起動画面の表示位置が右にずれないようにしました。 </span></p><p><span class="en"> When the T key is held down during startup, the startup screen mode is set to CRTMOD(1), i.e., 512x480 dots, 15.980 kHz horizontal, 61.463 Hz vertical (interlaced). When a CRT capable of displaying only 15 kHz is connected, you can perform the necessary operations to start up a game that supports 15 kHz, such as moving the current directory. </span> <span class="ja"> T キーを押しながら起動すると、起動時の画面モードが CRTMOD(1)、すなわち、512x480 ドット、水平 15.980kHz、垂直 61.463Hz（インターレース）に設定されます。15kHz だけ表示できる CRT が接続されているとき、カレントディレクトリを移動することなどの、15kHz に対応しているゲームを起動するために必要な操作ができます。 </span></p><p><span class="en"> IPLROM 1.6 has a function to automatically modify HD_MAX in SRAM to allow booting from both SASI- and SCSI-embedded machines. This has been changed to be done only when initializing SRAM. As with IPLROM 1.0, HD_MAX is set to 1 when SRAM is initialized on a machine with built-in SASI. If ID0 is SxSI, boot from a floppy disk or other device and use <code><kbd>SWITCH HD_MAX=0</kbd></code> to reset HD_MAX to 0. </span> <span class="ja"> IPLROM 1.6 には SASI 内蔵機と SCSI 内蔵機のどちらでも起動できるようにするために SRAM にある HD_MAX を自動修正する機能があります。 これを SRAM を初期化するときにだけ行うように変更しました。IPLROM 1.0 と同様に SASI 内蔵機で SRAM を初期化すると HD_MAX が 1 になります。ID0 が SxSI の場合はフロッピーディスクなどから起動して <code><kbd>SWITCH HD_MAX=0</kbd></code> で HD_MAX を 0 に戻してください。 </span></p><h4>misc/crtmodtest.x</h4><p><span class="en"> Displays help messages separated by pages. However, when condrv.sys is present, it is displayed normally. </span> <span class="ja"> ヘルプメッセージをページ毎に区切って表示します。 ただし、condrv.sys があるときは普通に表示します。 </span></p><h4>misc/ppcon.x</h4><p><span class="en"> Added <a href="miscfiles.htm#ppconx">misc/ppcon.x</a>. A character display routine that supports proportional-pitch and right-justification used in the IPLROM 1.6 startup screen can be incorporated as a device driver or resident program. </span> <span class="ja"> <a href="miscfiles.htm#ppconx">misc/ppcon.x</a> を追加しました。IPLROM 1.6 の起動画面で使われているプロポーショナルピッチや右寄せに対応した文字表示ルーチンをデバイスドライバまたは常駐プログラムとして組み込めるようにしたものです。 </span></p><h3><a href="#changes_0220221" id="changes_0220221">0.22.02.21</a></h3><h4><span class="en">Mouse</span> <span class="ja">マウス</span></h4><p><span class="en"> No longer switches to <a href="feature.htm#seamlessmouse">seamless mouse mode</a> when losing focus in <a href="feature.htm#exclusivemouse">exclusive mouse mode</a>. When in exclusive mouse mode, clicking the wheel (or right-clicking while holding down the Alt key on a two-button mouse) or pressing the F12 key will switch to seamless mouse mode. </span> <span class="ja"> <a href="feature.htm#exclusivemouse">エクスクルーシブマウスモード</a> でフォーカスを失ったとき、<a href="feature.htm#seamlessmouse">シームレスマウスモード</a> に切り替わらないようにしました。 エクスクルーシブマウスモードのとき、ホイールをクリックする (2 ボタンマウスのときは Alt キーを押しながら右クリックする) か F12 キーを押すとシームレスマウスモードに切り替わります。 </span></p><h4><span class="en">Printer</span> <span class="ja">プリンタ</span></h4><p><span class="en"> Fixed the generation of pica, elite, small, and script fonts for use with <a href="feature.htm#printer">printer</a>. </span> <span class="ja"> <a href="feature.htm#printer">プリンタ</a> で使うパイカ、エリート、縮小、スクリプトのフォントの生成を修正しました。 </span></p><h4>MFP</h4><p><span class="en"> Timer-B can now be controlled. You can use the keyboard only when TBCR is $01 and TBDR is $0D. </span> <span class="ja"> Timer-B を操作できるようにしました。TBCR が $01 かつ TBDR が $0D のときだけキーボードが使えます。 </span></p><h4>IPLROM 1.6</h4><p><span class="en"> When a machine with built-in SCSI also has an expansion SCSI, the internal SCSI is not initialized before branching to the boot device process. When there is an expansion SCSI, the SCSI bus reset for the internal SCSI is not performed, so the time the startup message is displayed is shortened. If you want to check the boot message, press the reset button while holding down the L, N, or V key. </span> <span class="ja"> SCSI 内蔵機で拡張 SCSI もあるとき、起動デバイスの処理に分岐する前に内蔵 SCSI を初期化しないようにしました。 拡張 SCSI があるとき、内蔵 SCSI の SCSI バスリセットが行われないため、起動メッセージが表示されている時間が短くなります。 起動メッセージを確認したいときは、L キー、N キー、V キーのいずれかを押しながらリセットボタンを押してください。 </span></p><p><span class="en"> When the startup message is finished, if any of the L, N, or V keys is pressed, wait until those keys are released, empty the key buffer, and then wait until a key is pressed. The L key is for switching to LCD mode, the N key is for switching to CRT mode, and the V key is for switching to VGA mode. The screen mode switching is over before the startup message is displayed. </span> <span class="ja"> 起動メッセージの表示が終わったとき、L キー、N キー、V キーのいずれかが押されていたら、それらのキーが離されるまで待って、キーバッファを空にしてから、キーが押されるまで待ちます。L キーは LCD モード、N キーは CRT モード、V キーは VGA モードに切り替えるキーです。 起動メッセージが表示される前に画面モードの切り替えは終わっています。 </span></p><p><span class="en"> The display of the DMAC operating frequency at startup has been changed to show the performance when the performance of the X68000 is 100%. X68030 and PRO will be displayed as 125% and 83%, respectively. </span> <span class="ja"> 起動時の DMAC の動作周波数の表示を X68000 の性能を 100% としたときの性能の表示に変更しました。X68030 は 125%、PRO は 83% と表示されます。 </span></p><p><span class="en"> Changed the height of CRTMOD modes 1, 5, 9, and 13 for LCD from 512 dots to 480 dots, and the height of modes 3, 7, 11, and 15 from 256 dots to 240 dots. </span> <span class="ja"> CRTMOD の LCD 向けのモード 1、5、9、13 の縦を 512 ドットから 480 ドットに、モード 3、7、11、15 の縦を 256 ドットから 240 ドットに変更しました。 </span></p><p><span class="en"> When an undefined screen mode is specified in CRTMOD, it only returns the current screen mode instead of switching to the screen mode at startup. However, when $43xx or $4Cxx is specified, it will set the switch for CRT and LCD. </span> <span class="ja"> CRTMOD で未定義の画面モードが指定されたとき、起動時の画面モードに切り替えるのではなく、現在の画面モードを返すだけにしました。 ただし、$43xx または $4Cxx が指定されたときは、CRT 向けと LCD 向けのスイッチを設定します。 </span></p><h4><span class="en"> SCSIINROM 16 and SCSIEXROM 16 </span> <span class="ja"> SCSIINROM 16 と SCSIEXROM 16 </span></h4><p><span class="en"> Changed the condition for initialization from when the vector of _SCSIDRV did not point to itself to when the vector of _SCSIDRV did not point to itself or the SCSI initialized flag was not set. </span> <span class="ja"> 初期化を行う条件を、_SCSIDRV のベクタが自分を指していなかったときから、_SCSIDRV のベクタが自分を指していなかったまたは SCSI 初期化済みフラグがセットされていないときに変更しました。 </span></p><p><span class="en"> Fixed processing when Service Required interrupt occurs in _S_DATAINI. </span> <span class="ja"> _S_DATAINI で Service Required 割り込みが発生したときの処理を修正しました。 </span></p><h4>misc/*</h4><p><span class="en"> Added <a href="miscfiles.htm#crtmod16x">crtmod16.x</a> and <a href="miscfiles.htm#crtmodtestx">crtmodtest.x</a> to misc/*. </span> <span class="ja"> misc/* に <a href="miscfiles.htm#crtmod16x">crtmod16.x</a> と <a href="miscfiles.htm#crtmodtestx">crtmodtest.x</a> を追加しました。 </span></p><h3><a href="#changes_0220210" id="changes_0220210">0.22.02.10</a></h3><h4>CGROM</h4><p><span class="en">Fixed a bug that caused an out of bounds error when the parameter -cgrom specified CGROM.DAT without ANK 6x12.</span> <span class="ja">パラメータ -cgrom で ANK 6x12 が入っていない CGROM.DAT を指定したとき out of bounds エラーが発生するバグを修正しました。</span></p><h3><a href="#changes_0220206" id="changes_0220206">0.22.02.06</a></h3><h4>IPLROM 1.6</h4><p><span class="en">Fixed the operating frequency of the X68000 DMAC displayed at startup.</span> <span class="ja">起動時に表示される X68000 の DMAC の動作周波数を修正しました。</span></p><h4>SRAM</h4><p><span class="en">The number of wait cycles when accessing SRAM has been adjusted.</span> <span class="ja">SRAM にアクセスするときのウェイトサイクル数を調整しました。</span></p><h4>DMAC</h4><p><span class="en">The number of cycles required for access by DMAC has been adjusted.</span> <span class="ja">DMAC によるアクセスの所要サイクル数を調整しました。</span></p><h4><span class="en">System port</span> <span class="ja">システムポート</span></h4><p><span class="en">Fixed a bug that when writing a word-size value with a lower byte of $31 to $00E8E00C, writing to SRAM was not allowed unless the upper byte of the value was $00.</span> <span class="ja">$00E8E00C に下位バイトが $31 の値をワードサイズで書き込んだとき、その上位バイトが $00 でなければ SRAM への書き込みが許可されないバグを修正しました。</span></p><h3><a href="#changes_0220203" id="changes_0220203">0.22.02.03</a></h3><h4><span class="en">Keyboard</span> <span class="ja">キーボード</span></h4><p><span class="en"> The key assignment of the numeric keypad when NumLock is enabled was missing. Also, the assignment of the ROLL UP key and the ROLL DOWN key was reversed. The key assignments are saved, so even if you upgrade XEiJ, the old assignments will be inherited. Open the key assignments window by clicking <a href="menu.htm#keyassignments">Key assignments</a> in the <a href="menu.htm#input">Input menu</a>, and click &#34;Reset to default&#34; to apply the default values of the new version. </span> <span class="ja"> NumLock されているときのテンキーの数字のキー割り当てが欠落していました。 また、ROLL UP キーと ROLL DOWN キーの割り当てが逆でした。 キー割り当ては保存されているので、XEiJ をバージョンアップしても古い割り当てが引き継がれます。 <a href="menu.htm#input">入力メニュー</a> の <a href="menu.htm#keyassignments">キー割り当て</a> でキー割り当てウインドウを開き、「初期値に戻す」をクリックすると、新しいバージョンの初期値が適用されます。 </span></p><h4>SRAM</h4><p><span class="en"> You can select whether to ignore or make a bus error when writing to SRAM in a write-protected state. Added the parameter -srambuserror. Added &#34;Bus error when writing to SRAM&#34; to the <a href="menu.htm#sram">SRAM menu</a>. </span> <span class="ja"> 書き込みが禁止されている状態の SRAM への書き込みを無視するかバスエラーにするか選択できます。 パラメータ <a href="parameter.htm#srambuserror">-srambuserror</a> を追加しました。 <a href="menu.htm#sram">SRAM メニュー</a> に「SRAM への書き込み時のバスエラー」を追加しました。 </span></p><h3><a href="#changes_0220201" id="changes_0220201">0.22.02.01</a></h3><h4>IPLROM 1.6</h4><p><span class="en"> At boot time, when the SRAM is initialized and the memory size setting in the SRAM does not match the actual memory size, IPLROM 1.6 asks if the setting should be corrected. There was a problem with this process and it sometimes failed to boot. On XEiJ, the emulator corrects the memory size setting in the SRAM, so this problem did not occur. </span> <span class="ja"> 起動時、SRAM が初期化されていて SRAM にあるメモリサイズの設定値が実際のメモリサイズと合っていないとき、IPLROM 1.6 は設定値を修正するか問い合わせます。 この処理に不具合があって起動できないことがありました。XEiJ 上ではエミュレータが SRAM にあるメモリサイズの設定値を修正してしまうのでこの不具合は発生しませんでした。 </span></p><p><span class="en"> At startup, IPLROM 1.6 displays an error message and stops if there is a SCSIINROM for a machine with SASI, or if there is no SCSIINROM 16 for a machine with SCSI. There was a problem with this process and it sometimes failed to boot. This problem did not occur on XEiJ because the wrong combination never occurs. </span> <span class="ja"> 起動時、SASI 内蔵機なのに SCSIINROM があるときまたは SCSI 内蔵機なのに SCSIINROM 16 がないとき、IPLROM 1.6 はエラーメッセージを表示して停止します。 この処理に不具合があって起動できないことがありました。XEiJ 上では間違った組み合わせになることはないのでこの不具合は発生しませんでした。 </span></p><h4><span class="en">Memory size</span> <span class="ja">メモリサイズ</span></h4><p><span class="en"> When resetting, if the memory size setting in the SRAM is different from the actual memory size, you can now choose whether to correct the setting or not. Added parameter <a href="parameter.htm#modifymemorysize">-modifymemorysize</a>. Added &#34;Modify the memory size in SRAM&#34; to the <a href="menu.htm#mainmemory">main memory menu</a>. </span> <span class="ja"> リセットするとき、SRAM にあるメモリサイズの設定値が実際のメモリサイズと違っていたら、設定値を修正するかどうか選択できるようにしました。 パラメータ <a href="parameter.htm#modifymemorysize">-modifymemorysize</a> を追加しました。 <a href="menu.htm#mainmemory">メインメモリメニュー</a> に「SRAM にあるメモリサイズを修正する」を追加しました。 </span></p><h4><span class="en">ROM debugger startup flag</span> <span class="ja">ROM デバッガ起動フラグ</span></h4><p><span class="en"> On X68030, when IPLROM 1.6 is not used and ROM30.DAT is not specified, i.e., when there is only the second half of IPLROM 1.3 but no ROM debugger that should be in the first half, the ROM debugger startup flag in SRAM is not turned on. </span> <span class="ja"> X68030 で IPLROM 1.6 を使わず ROM30.DAT も指定しなかったとき、すなわち、IPLROM 1.3 の後半だけあって前半にあるはずの ROM デバッガがないとき、SRAM にある ROM デバッガ起動フラグを ON にしないようにしました。 </span></p><h4><span class="en">IBM Super Floppy format</span> <span class="ja">IBM スーパーフロッピー形式</span></h4><p><span class="en"> An image file in IBM Super Floppy format is considered a SCSI MO. It is not a boot disk, but you can use susie.x to access the files. It can be formatted with fim.x. </span> <span class="ja"> IBM スーパーフロッピー形式のイメージファイルを SCSI MO とみなします。 起動ディスクにはなりませんが、susie.x を使ってファイルにアクセスできます。fim.x でフォーマットできます。 </span></p><h3><a href="#changes_0220130" id="changes_0220130">0.22.01.30</a></h3><h4>IPLROM 1.6</h4><p><span class="en"> IPLROM 1.5 is obsolete and has been replaced by <a href="feature.htm#iplrom16">IPLROM 1.6</a>. IPLROM modifications are now integrated into IPLROM 1.6, and no patch is applied when using IPLROM 1.0-1.3. Added parameter <a href="parameter.htm#iplrom16">-iplrom16</a> to enable IPLROM 1.6 except for Hybrid and 060turbo, and parameter <a href="parameter.htm#iplrom256k">-iplrom256k</a> to change the configuration of IPLROM 1.6. </span> <span class="ja"> IPLROM 1.5 を廃止し、<a href="feature.htm#iplrom16">IPLROM 1.6</a> に移行しました。IPLROM の改造を IPLROM 1.6 に集約し、IPLROM 1.0～1.3 を使用する場合はパッチを当てないことにしました。Hybrid と 060turbo 以外で IPLROM 1.6 を有効にするパラメータ <a href="parameter.htm#iplrom16">-iplrom16</a> と、IPLROM 1.6 の構成を変更するパラメータ <a href="parameter.htm#iplrom256k">-iplrom256k</a> を追加しました。 </span></p><h4><span class="en">Create ROM file</span> <span class="ja">ROM ファイルの作成</span></h4><p><span class="en"> Added &#34;Create XEIJROM30.DAT&#34;, &#34;Create XEIJIPLROM30.DAT&#34;, &#34;Create XEIJSCSIINROM.DAT&#34; and &#34;Create XEIJSCSIEXROM.DAT&#34; to the menu <a href="menu.htm#romfile">Create ROM File</a>. You may be able to use IPLROM 1.6 with other emulators. </span> <span class="ja"> メニュー <a href="menu.htm#romfile">ROM ファイルの作成</a> に「XEIJROM30.DAT の作成」、「XEIJIPLROM30.DAT の作成」、「XEIJSCSIINROM.DAT の作成」および「XEIJSCSIEXROM.DAT の作成」を追加しました。IPLROM 1.6 を他のエミュレータで使えるかも知れません。 </span></p><h4><span class="en">Keyboard</span> <span class="ja">キーボード</span></h4><p><span class="en">The initial value of the key assignment and the method of key identification are divided between Mac and Windows. (Thanks yuduki)</span> <span class="ja">キー割り当ての初期値とキーの判別方法を Mac のときと Windows のときで分けました。(Thanks yuduki)</span></p><p><span class="en">The parameter <a href="parameter.htm#keymap">keymap</a> has been changed to reflect the change in the key identification method.</span> <span class="ja">キーの判別方法の変更に伴い、パラメータ <a href="parameter.htm#keymap">keymap</a> の内容が変更されました。</span></p><p><span class="en">In Windows, NumLock becomes the CLR key, and although NumLock is switched when the CLR key is pressed, numbers on the numeric keypad can be input as numbers even if NumLock is off.</span> <span class="ja">Windows のとき NumLock が CLR キーになります。CLR キーを押すと NumLock が切り替わってしまいますが、NumLock が OFF でもテンキーの数字は数字のまま入力できます。</span></p><p><span class="en">The F11 and F12 keys can be assigned. These key assignments take precedence over full screen display and exclusive mode switching.</span> <span class="ja">F11 キーと F12 キーを割り当てることができます。これらのキー割り当ては全画面表示やエクスクルーシブモードの切り替えよりも優先します。</span></p><p><span class="en">Added &#34;blank&#34; and &#34;reset to default&#34; buttons to the key assignment window.</span> <span class="ja">キー割り当てウインドウに「白紙にする」ボタンと「初期値に戻す」ボタンを追加しました。</span></p><p><span class="en">The parameter accessrawcode has been removed.</span> <span class="ja">パラメータ accessrawcode を廃止しました。</span></p><p><span class="en">When the keyboard is disconnected, the key jack status in bit 3 of system port $00E8E007 will be set to 0.</span> <span class="ja">キーボードを切り離すとシステムポート $00E8E007 の ビット 3 のキージャックステータスが 0 になります。</span></p><h4><span class="en">Xellent30 mode</span> <span class="ja">Xellent30 モード</span></h4><p><span class="en">Added Xellent30 mode.</span> <span class="ja">Xellent30 モードを追加しました。</span></p><h4><span class="en">CRTMOD</span> <span class="ja">CRTMOD</span></h4><p><span class="en">Added 384x256, 512x512 (square), and 256x256 (square) modes to CRTMOD in IPLROM 1.6. This feature may be substantially changed or eliminated in a future release.</span> <span class="ja">IPLROM 1.6 の CRTMOD に 384x256、512x512 (正方形)、256x256 (正方形) モードを加えました。この機能は今後のリリースで大幅に変更されるか廃止される可能性があります。</span></p><table><thead><tr><th><span class="en">screen mode</span><span class="ja">画面モード</span></th><th><span class="en">screen size</span><span class="ja">画面サイズ</span></th><th><span class="en">real screen size</span><span class="ja">実画面サイズ</span></th><th><span class="en">number of colors</span><span class="ja">色数</span></th><th><span class="en">number of pages</span><span class="ja">ページ数</span></th></tr></thead><tbody><tr><td>28</td><td rowspan="4">384x256</td><td>1024x1024</td><td rowspan="2">16</td><td>1</td></tr><tr><td>29</td><td rowspan="3">512x512</td><td>4</td></tr><tr><td>30</td><td>256</td><td>2</td></tr><tr><td>31</td><td>65536</td><td>1</td></tr><tr><td>32</td><td rowspan="4">512x512 (<span class="en">square</span><span class="ja">正方形</span>)</td><td>1024x1024</td><td rowspan="2">16</td><td>1</td></tr><tr><td>33</td><td rowspan="3">512x512</td><td>4</td></tr><tr><td>34</td><td>256</td><td>2</td></tr><tr><td>35</td><td>65536</td><td>1</td></tr><tr><td>36</td><td rowspan="4">256x256 (<span class="en">square</span><span class="ja">正方形</span>)</td><td>1024x1024</td><td rowspan="2">16</td><td>1</td></tr><tr><td>37</td><td rowspan="3">512x512</td><td>4</td></tr><tr><td>38</td><td>256</td><td>2</td></tr><tr><td>39</td><td>65536</td><td>1</td></tr></tbody></table><h4><span class="en">Clipboard</span> <span class="ja">クリップボード</span></h4><p><span class="en">Added IllegalStateException workaround to the clipboard flavor listener. Reference : <a href="https://x.com/kata68k/status/1348608610843074563" target="_blank">Tweet by kata68k</a></span> <span class="ja">クリップボードのフレーバーリスナーに IllegalStateException のワークアラウンドを加えました。参考 : <a href="https://x.com/kata68k/status/1348608610843074563" target="_blank">カタさんのツイート</a></span></p><h4><span class="en">CON device control</span> <span class="en">CON デバイス制御</span></h4><p><span class="en">You can paste an escape sequence into the console.</span> <span class="ja">コンソールにエスケープシーケンスを貼り付けることができます。</span></p><h4><span class="en">DMAC</span> <span class="ja">DMAC</span></h4><p><span class="en">The MPU will not execute instructions while the DMAC is transferring at the auto-request maximum rate.</span> <span class="ja">DMAC がオートリクエスト最大速度で転送している間 MPU が命令を実行しないようにしました。</span></p><h4><span class="en">FPCP and FPU</span> <span class="ja">FPCP と FPU</span></h4><p><span class="en">When $FFFFFFFF is written to FPCR and FPSR and then read immediately, $0000FFF0 and $0FFFFFF8 are now read out.</span> <span class="ja">FPCR と FPSR に $FFFFFFFF を書き込んでそれをすぐに読み出したとき、$0000FFF0 と $0FFFFFF8 が読み出されるようにしました。</span></p><p><span class="en">The condition code byte of FPSR is no longer cleared by FMOVE.* FPn,&lt;ea&gt;.</span> <span class="ja">FMOVE.* FPn,&lt;ea&gt; で FPSR のコンディションコードバイトがクリアされないようにしました。</span></p><h4><span class="en">Human68k patch</span> <span class="ja">Human68k のパッチ</span></h4><p><span class="en">Added Human68k patch for MC68010. When executing the MOVE from SR instruction in user mode, it works fine on the MC68000, but causes a privilege violation exception on the MC68EC030. This difference is one of the reasons why programs made for the X68000 do not work on the X68030. Therefore, the Human68k has a mechanism to rewrite the MOVE from SR instruction to MOVE from CCR instruction, clear the instruction cache, and re-execute the program when a privilege violation exception occurs. Since the instruction cache is cleared by directly manipulating CACR, there is a problem that it does not work as expected except for MC68EC030. In MC68010, there is no CACR, so an illegal instruction exception occurs. It is patched to use IOCS _SYS_STAT instead of directly manipulating CACR.</span> <span class="ja">MC68010 のための Human68k のパッチを追加しました。MOVE from SR 命令をユーザモードで実行したとき MC68000 では問題なく動きますが MC68EC030 では特権違反例外が発生します。この違いは X68000 用に作られたプログラムが X68030 で動かない原因のひとつになります。そのため Human68k には特権違反例外が発生したとき MOVE from SR 命令を MOVE from CCR 命令に書き換えて命令キャッシュをクリアして再実行する仕組みがあります。CACR を直接操作して命令キャッシュをクリアしているので MC68EC030 以外で期待通りに動作しないという問題があります。MC68010 では CACR がないので不当命令例外が発生してしまいます。CACR を直接操作せず IOCS _SYS_STAT を使うようにパッチが当たります。</span></p><h4><span class="en">SRAM</span> <span class="ja">SRAM</span></h4><p><span class="en">When accessing SRAM on the X68000, a wait of one cycle is applied.</span> <span class="ja">X68000 で SRAM にアクセスするときウェイトが 1 サイクル入ります。</span></p><h4><span class="en">Text storage and graphic storage</span> <span class="ja">テキストストレージとグラフィックストレージ</span></h4><p><span class="en">The CRTC&#39;s text storage and graphic storage (bits 12 and 11 of R20) can now be manipulated. This mode uses VRAM as storage when screen display is not needed. When text storage is turned on, nothing changes. When graphic storage is turned on, the memory mode is fixed to 3 (7 when the extended graphic screen is enabled). The display on the emulator does not change, but on the actual device, the screen will be distorted. It is recommended to turn off the screen display by operating the video controller before turning on the storage.</span> <span class="ja">CRTC のテキストストレージとグラフィックストレージ (R20 のビット 12 と 11) を操作できるようにしました。画面表示が不要なとき、VRAM をストレージとして用いるモードです。テキストストレージを ON にしても何も変わりません。グラフィックストレージを ON にするとメモリモードが 3 (拡張グラフィック画面が有効なときは 7) に固定されます。エミュレータの表示は変わりませんが、実機では画面が乱れます。ビデオコントローラを操作して画面表示を OFF にしてからストレージを ON にした方がよいでしょう。</span></p><h4><span class="en">Obsolete features</span> <span class="ja">廃止された機能</span></h4><p><span class="en">Font editor and profiling have been discontinued.</span> <span class="ja">フォントエディタとプロファイリングを廃止しました。</span></p><h3><a href="#changes_0210111" id="changes_0210111">0.21.01.11</a></h3><h4>SCSIINROM / SCSIEXROM</h4><p><span class="en">SCSI _S_DATAINI in ROM 1.5 was not being relocated correctly when automatically generating SCSIINROM and SCSIEXROM.</span> <span class="ja">SCSIINROM と SCSIEXROM を自動生成するとき ROM 1.5 の SCSI _S_DATAINI が正しくリロケートされていませんでした。</span></p><h4>ROM 1.5 : IOCS _CRTMOD</h4><p><span class="en">When D1.W=$43xx is given, the sync frequency for CRT is selected, and when D1.W=$4Cxx is given, the sync frequency for LCD is selected.</span> <span class="ja">D1.W=$43xx を与えると CRT 向けの同期周波数が選択され、D1.W=$4Cxx を与えると LCD 向けの同期周波数が選択されます。</span></p><p><span class="en">The screen sizes for screen modes 17/21/25 and 18/22/26 are as follows.</span> <span class="ja">画面モード 17/21/25 と 18/22/26 の画面サイズは以下の通りです。</span></p><table><thead><tr><th><span class="en">screen mode</span><span class="ja">画面モード</span></th><th><span class="en">for CRT</span><span class="ja">CRT 向け</span></th><th><span class="en">for LCD</span><span class="ja">LCD 向け</span></th><th><span class="en">note</span><span class="ja">備考</span></th></tr></thead><tbody><tr><td>17/21/25</td><td>1024x424</td><td>768x600</td><td></td></tr><tr><td>18/22/26</td><td>1024x848</td><td>768x1024</td><td><span class="en">interlace</span><span class="ja">インターレース</span></td></tr></tbody></table><h3><a href="#changes_0210103" id="changes_0210103">0.21.01.03</a></h3><h4>ROM 1.5 : IOCS _SP_INIT</h4><p><span class="en">When I switched the order of the code, I forgot to move the labels, so the sprites could not be displayed.</span> <span class="ja">コードの順序を入れ替えたときラベルを動かすのを忘れたためスプライトが表示できなくなっていました。</span></p><h4>CRTC</h4><p><span class="en">Fixed a bug that fast clearing did not start when writing to the operating port with word size or long word size.</span> <span class="ja">動作ポートにワードサイズまたはロングワードサイズで書き込むと高速クリアが始まらなかったバグを修正しました。</span></p><p><span class="en">Fixed a bug that allowed the scrolling position in the Y direction of the text and graphic screens to be changed anywhere on the screen.</span> <span class="ja">テキスト画面とグラフィック画面の Y 方向のスクロール位置を画面のどこでも変更できたバグを修正しました。</span></p><h4><span class="en">Sprite screen</span> <span class="ja">スプライト画面</span></h4><p><span class="en">When writing to the Sprite Scroll Register, Sprite PCG, and Text Area in byte size, the same value is now written to the upper and lower bytes in word size.</span> <span class="ja">スプライトスクロールレジスタとスプライト PCG およびテキストエリアにバイトサイズで書き込んだとき、ワードサイズで上位バイトと下位バイトに同じ値が書き込まれるようにしました。</span></p><h3><a href="#changes_0201231" id="changes_0201231">0.20.12.31</a></h3><h4><span class="en">ROM 1.5 : Initialize the area set port</span> <span class="ja">ROM 1.5 : エリアセットポートの初期化</span></h4><p><span class="en"> The IPLROM 1.3 of X68030 initializes the area set port with the CLR instruction. If you try to use this on the X68000 as is, you will get a bus error. This is because the area set port is write-only, and the MC68000&#39;s CLR instruction reads the effective address. This bug has been fixed. Reference : <a href="https://x.com/futtyt/status/1332591514963197953" target="_blank">futtyt&#39;s series of thoughts</a> </span> <span class="ja"> X68030 の IPLROM 1.3 はエリアセットポートの初期化を CLR 命令で行います。 これをそのまま X68000 で使おうとするとバスエラーが発生してしまいます。 なぜなら、エリアセットポートはライトオンリーで、MC68000 の CLR 命令は実効アドレスをリードするからです。 このバグを修正しました。 参考 : <a href="https://x.com/futtyt/status/1332591514963197953" target="_blank">ふってぃさんの一連の考察</a> </span></p><ul><li><span class="en"><a href="https://stdkmd.net/bugsx68k/#rom_clrreads">IPL tries to read from a write-only port (ROM 1.3)</a></span> <span class="ja"><a href="https://stdkmd.net/bugsx68k/#rom_clrreads">ライトオンリーのポートをリードしようとする (ROM 1.3)</a></span></li></ul><h4>ROM 1.5 : IOCS _SCSIDRV</h4><p><span class="en"> If you try to operate a non-existent internal SPC on a machine with built-in SASI, it will dump meaningless data to the SASI port. For machines with built-in SASI, IOCS _SCSIDRV does nothing and returns the error code -1. </span> <span class="ja"> SASI 内蔵機で存在しない内蔵 SPC を操作しようとすると SASI ポートに無意味なデータを垂れ流すことになります。SASI 内蔵機のとき IOCS _SCSIDRV は何もせずエラーコード -1 を返すようにしました。 </span></p><h4>ROM 1.5 : SCSI _S_DATAINI</h4><p><span class="en"> SCSI _S_DATAINI writes data to memory in longword size when receiving more than 8 bytes, so when used with MC68000, an address error occurs when the address is an odd number. It has been modified to write data to memory in byte size when used with the MC68000. The same transfer routines are used in the following SCSI calls : _S_INQUIRY _S_MODESENSE _S_READ _S_READEXT _S_READCAP _S_REQUEST </span> <span class="ja"> SCSI _S_DATAINI は 8 バイト以上受信するときデータをロングワードサイズでメモリに書き込むので、MC68000 で使うとアドレスが奇数のときにアドレスエラーが発生してしまいます。MC68000 のときはデータをバイトサイズでメモリに書き込むように、修正しました。 同じ転送ルーチンが以下の SCSI コールでも使われています : _S_INQUIRY _S_MODESENSE _S_READ _S_READEXT _S_READCAP _S_REQUEST </span></p><p><span class="en"> It seems that some hard disks do not wait for the ACK to become False when transitioning from the data-in phase to the status phase. If such a hard disk is connected, a Service Required interrupt may occur due to a phase mismatch. If a Service Required interrupt occurs in SCSI _S_DATAINI, the transfer will be interrupted and the data remaining in the FIFO will not be received. As a countermeasure, even if a Service Required interrupt occurs during transfer, the transfer will be continued if the FIFO is not empty. In addition, even if a Service Required interrupt occurs when the transfer is completed, it is not considered an error. Reference : <a href="https://x.com/52429/status/1185350392327983104" target="_blank">Tweet by 52429</a> </span> <span class="ja"> データインフェーズからステータスフェーズに移行するとき ACK が False になるのを待たないハードディスクがあるようです。 そのようなハードディスクを接続するとフェーズの不一致のために Service Required 割り込みが発生する可能性があります。SCSI _S_DATAINI で Service Required 割り込みが発生すると転送が中断して FIFO に残っていたデータを受け取り損ねてしまいます。 対策として、転送中に Service Required 割り込みが発生しても FIFO が空でなければ転送を継続するように変更しました。 また、転送が終了したときに Service Required 割り込みが発生していてもエラーとみなさないようにしました。 参考 : <a href="https://x.com/52429/status/1185350392327983104" target="_blank">52429 さんのツイート</a> </span></p><h4>ROM 1.5 : IOCS _CRTMOD</h4><p><span class="en"> The X68030 screen is normally output at the CRT sync frequency, but the LCD sync frequency can also be selected. When bit 0 of $00ED0095 in SRAM is set to 0, the output is for CRT, and when it is set to 1, the output is for LCD. This bit is set when the L or V key is pressed while booting, and cleared when the N key is pressed while booting. By using the ROM with this patch applied on the actual device, you may be able to avoid the sad situation where the boot screen is stretched vertically and the bottom edge protrudes when the X68030 is connected to an ordinary LCD monitor. When you select the sync frequency for LCD, games that use sync signals may not run or may run at a speed different from the original speed. </span> <span class="ja"> X68030 の画面は通常は CRT 向けの同期周波数で出力されますが、LCD 向けの同期周波数も選べるようにしました。SRAM の $00ED0095 のビット 0 が 0 のときは CRT 向け、1 のときは LCD 向けになります。 このビットは L または V キーを押しながら起動するとセットされ、N キーを押しながら起動するとクリアされます。 このパッチを当てた ROM を実機で使用することで、X68030 を一般的な液晶モニタに接続したときに起動画面が縦に伸びて下端がはみ出すという悲しい状況を回避できるかも知れません。LCD 向けの同期周波数を選んだとき、同期信号を使うゲームが動作しなかったり、本来の速度と異なる速度で動作する可能性があります。 </span></p><table><thead><tr><th colspan="2" rowspan="2"><span class="en">screen mode</span><span class="ja">画面モード</span></th><th colspan="2"><span class="en">for CRT</span><span class="ja">CRT 向け</span></th><th colspan="2"><span class="en">for LCD</span><span class="ja">LCD 向け</span></th></tr><tr><th><span class="en">horizontal sync frequency</span><span class="ja">水平同期周波数</span></th><th><span class="en">vertical sync frequency</span><span class="ja">垂直同期周波数</span></th><th><span class="en">horizontal sync frequency</span><span class="ja">水平同期周波数</span></th><th><span class="en">vertical sync frequency</span><span class="ja">垂直同期周波数</span></th></tr></thead><tbody><tr><td>768x512</td><td><span class="en">high resolution</span><span class="ja">高解像度</span></td><td>31.500kHz</td><td>55.458Hz</td><td>35.056kHz</td><td>56.090Hz</td></tr><tr><td rowspan="2">512x512</td><td><span class="en">high resolution</span><span class="ja">高解像度</span></td><td>31.500kHz</td><td>55.458Hz</td><td rowspan="2">35.341kHz</td><td rowspan="2">56.546Hz</td></tr><tr><td><span class="en">low resolution</span><span class="ja">低解像度</span></td><td>15.980kHz</td><td>61.462Hz</td></tr><tr><td rowspan="2">256x256</td><td><span class="en">high resolution</span><span class="ja">高解像度</span></td><td>31.500kHz</td><td>55.458Hz</td><td>34.500kHz</td><td>55.200Hz</td></tr><tr><td><span class="en">low resolution</span><span class="ja">低解像度</span></td><td>15.980kHz</td><td>61.462Hz</td><td>47.250kHz</td><td>75.600Hz</td></tr><tr><td colspan="4" rowspan="2">SVGA 800x600 <span class="en">for reference</span><span class="ja">参考値</span></td><td>35.156kHz</td><td>56.250Hz</td></tr><tr><td>46.875kHz</td><td>75.000Hz</td></tr></tbody></table><h4>ROM 1.5 : IOCS _SP_INIT</h4><p><span class="en"> In screen mode 16 (768x512), the sprite cannot be displayed, so IOCS _SP_INIT returns the error code -1. In screen mode 19 (640x480), the sprite cannot be displayed either, but IOCS _SP_INIT stops with a bus error. This is because IOCS _SP_INIT does not correctly identify the screen mode in which the sprite can be displayed. This bug has been fixed. The same identification routine is used in the following IOCS calls : _SP_ON _SP_CGCLR _SP_DEFCG _SP_GTPCG _SP_REGST _SP_REGGT _BGSCRLST _BGSCRLGT _BGCTRLST _BGCTRLGT _BGTEXTCL _ BGTEXTST _BGTEXTGT </span> <span class="ja"> 画面モード 16 (768x512) のときはスプライトを表示できないので IOCS _SP_INIT はエラーコード -1 を返します。 画面モード 19 (640x480) のときもスプライトを表示できませんが IOCS _SP_INIT はバスエラーで止まってしまいます。 これは IOCS _SP_INIT がスプライトを表示できる画面モードを正しく判別していないためです。 このバグを修正しました。 同じ判別ルーチンが 以下の IOCS コールでも使われています : _SP_ON _SP_CGCLR _SP_DEFCG _SP_GTPCG _SP_REGST _SP_REGGT _BGSCRLST _BGSCRLGT _BGCTRLST _BGCTRLGT _BGTEXTCL _BGTEXTST _BGTEXTGT </span></p><ul><li><span class="en"><a href="https://stdkmd.net/bugsx68k/#rom_spinit">Bus error occurs in _SP_INIT (ROM 1.0/1.1/1.2/1.3)</a></span> <span class="ja"><a href="https://stdkmd.net/bugsx68k/#rom_spinit">_SP_INIT でバスエラーが発生する (ROM 1.0/1.1/1.2/1.3)</a></span></li></ul><h4><span class="en">ROM 1.5 : 6x12 ANK font</span> <span class="ja">ROM 1.5 : 6x12 ANK フォント</span></h4><p><span class="en"> The 6x12 ANK font is located in IPLROM on the X68000 and in CGROM on the X68030. Therefore, if you combine the CGROM of X68000 with the IPLROM of X68030, the 6x12 ANK font is not displayed in SX-WINDOW and so on. If you are using an emulator, you can solve this problem by simply replacing CGROM.DAT with CGROM30.DAT, but if the CGROM and IPLROM of the actual machine are not integrated, you cannot easily replace the CGROM. To solve this problem, we placed 6x12 ANK fonts at $00FEF400~$00FEFFFF of IPLROM and adjusted IOCS _FNTADR to display 6x12 ANK fonts without using CGROM. </span> <span class="ja"> 6x12 ANK フォントは X68000 では IPLROM にあり X68030 では CGROM にあります。 そのため、X68000 の CGROM と X68030 の IPLROM を組み合わせると SX-WINDOW などで 6x12 ANK フォントが表示されません。 エミュレータならば CGROM.DAT を CGROM30.DAT に差し替えるだけで解決しますが、実機の CGROM と IPLROM が一体になっていない機種では CGROM を簡単に差し替えることができません。 そこで、6x12 ANK フォントを IPLROM の $00FEF400～$00FEFFFF に配置した上で IOCS _FNTADR を調整することで、CGROM を使わずに 6x12 ANK フォントを表示できるようにしました。 </span></p><h4><span class="en">Create ROM file</span> <span class="ja">ROM ファイルの作成</span></h4><p><span class="en"> Added <a href="menu.htm#romfile">Create ROM file</a> to the <a href="menu.htm#config">Config menu</a>. XEiJ uses ROM 1.5 by applying a patch to X68030 ROM 1.3. When you want to use this patched ROM with other emulators or actual devices, you need to create the necessary files. If you read the contents of the ROM from the X68030, have XEiJ patch it, and then return it to the X68030, you will have a ROM that can boot the 060turbo. </span> <span class="ja"> <a href="menu.htm#config">設定メニュー</a> に <a href="menu.htm#romfile">ROM ファイルの作成</a> を追加しました。XEiJ は X68030 の ROM 1.3 にパッチを当てて ROM 1.5 として使います。 このパッチが当たった ROM を他のエミュレータまたは実機で使いたいとき必要になるファイルを作ります。X68030 実機から ROM の内容を読み出してそれに XEiJ にパッチをあてさせてそれを再び X68030 実機に戻すと、060turbo を起動できる ROM ができます。 </span></p><ul><li><span class="en">Create XEIJROM.DAT…Outputs the XEiJ ROM $00F00000～$00FFFFFF (1MB) to a file.</span> <span class="ja">XEIJROM.DAT の作成 …XEiJ の ROM $00F00000～$00FFFFFF (1MB) をファイルに出力します。</span></li><li><span class="en">Create EVEN030.BIN…Create a binary file of the ROM to be installed in the socket marked EVEN on the X68030. The size is 256Kbit x 16 = 4Mbit = 512KB. Output in little-endian format.</span> <span class="ja">EVEN030.BIN の作成 …X68030 の EVEN と書かれたソケットに取り付ける ROM のバイナリファイルを作成します。サイズは 256Kbit x 16 = 4Mbit = 512KB です。リトルエンディアンで出力します。</span></li><li><span class="en">Create ODD030.BIN…Create a binary file of the ROM to be installed in the socket marked ODD on the X68030. The size is 256Kbit x 16 = 4Mbit = 512KB. Output in little-endian format.</span> <span class="ja">ODD030.BIN の作成 …X68030 の ODD と書かれたソケットに取り付ける ROM のバイナリファイルを作成します。サイズは 256Kbit x 16 = 4Mbit = 512KB です。リトルエンディアンで出力します。</span></li><li><span class="en">Create EVENXVI.BIN…Create a binary file of the ROM to be installed in the socket marked EVEN on the X68000 XVI expansion RAM board CZ-6BE2A. The size is 128Kbit x 8 = 1Mbit = 128KB.</span> <span class="ja">EVENXVI.BIN の作成 …X68000 XVI の増設 RAM ボード CZ-6BE2A の EVEN と書かれたソケットに取り付ける ROM のバイナリファイルを作成します。サイズは 128Kbit x 8 = 1Mbit = 128KB です。</span></li><li><span class="en">Create ODDXVI.BIN…Create a binary file of the ROM to be installed in the socket marked ODD on the X68000 XVI expansion RAM board CZ-6BE2A. The size is 128Kbit x 8 = 1Mbit = 128KB.</span> <span class="ja">ODDXVI.BIN の作成 …X68000 XVI 用の増設 RAM ボード CZ-6BE2A の ODD と書かれたソケットに取り付ける ROM のバイナリファイルを作成します。サイズは 128Kbit x 8 = 1Mbit = 128KB です。</span></li></ul><h4>MC68000</h4><p><span class="en">Extra reads of the following instructions are executed.</span> <span class="ja">以下の命令の余分なリードを実行します。</span></p><ul><li>BRA.S &lt;label&gt;</li><li>BSR.S &lt;label&gt;</li><li>Bcc.S &lt;label&gt;</li><li>CLR.B &lt;mem&gt;</li><li>CLR.W &lt;mem&gt;</li><li>CLR.L &lt;mem&gt;</li><li>MOVE SR,&lt;mem&gt;</li><li>MOVEM.W &lt;mem&gt;,&lt;list&gt;</li><li>MOVEM.L &lt;mem&gt;,&lt;list&gt;</li><li>Scc.B &lt;mem&gt;</li></ul><h4><span class="en">Sprite screen</span> <span class="ja">スプライト画面</span></h4><p><span class="en">Accessing the sprite scroll register and sprite PCG and text area causes a bus error when the lower 5 bits of the R20 register in the CRTC are %1??1?.</span> <span class="ja">CRTC の R20 レジスタの下位 5 ビットが %1??1? のとき、スプライトスクロールレジスタとスプライト PCG およびテキストエリアにアクセスするとバスエラーが発生します。</span></p><h4>CRTC</h4><p><span class="en">The lengths of the horizontal back porch and horizontal front porch were corrected.</span> <span class="ja">水平バックポーチと水平フロントポーチの長さを修正しました。</span></p><h4>FDC</h4><p><span class="en">When resetting the system, the boot sequence could be stopped because the CB was not cleared.</span> <span class="ja">システムをリセットするとき CB をクリアしていなかったため起動シーケンスが止まることがありました。</span></p><h4>ROM 1.0</h4><p><span class="en">IPLROM 1.0 ($10870318) taken from the first X68000 (Shodai) is recognized.</span> <span class="ja">X68000 初代から吸い出された IPLROM 1.0 ($10870318) が認識されます。</span></p><h3><a href="#changes_0191215" id="changes_0191215">0.19.12.15</a></h3><h4><span class="en">Execution environment</span> <span class="ja">実行環境</span></h4><p><span class="en">Use <a href="https://jdk.java.net/13/" target="_blank">JDK 13.0.1 GA Release</a> to complile and run XEiJ.</span> <span class="ja">XEiJ のコンパイルと実行に <a href="https://jdk.java.net/13/" target="_blank">JDK 13.0.1 GA Release</a> を使います。</span></p><h4>ROM</h4><p><span class="en">TOMO confirmed that the ROM patched by XEiJ can be used with real 060turbo machines.</span> <span class="ja">XEiJ がパッチを当てた ROM が 060turbo の実機で使えることを TOMO さんに確認していただきました。</span></p><ul><li><a href="https://tomoretropc.blogspot.com/2019/12/060turbo-rom-xeij.html" target="_blank">060turbo 用 ROM の作成 (XEiJ フルパッチ)</a></li></ul><p><span class="en">The operating frequency of real 040turbo machines will be displayed correctly on the startup screen. But the ROM patched by XEiJ is not able to be used with 040turbo because the patches collide. Use not-patched ROM of X68030 for 040turbo.</span> <span class="ja">040turbo の実機で起動画面に動作周波数が正しく表示されます。しかし、XEiJ がパッチを当てた ROM はパッチが衝突するので 040turbo では使用できません。040turbo ではパッチを当てていない X68030 の ROM を使用してください。</span></p><h4>NetBSD/x68k</h4><p><span class="en">&#34;<a href="netbsd.htm">Try to run the NetBSD/x68k</a>&#34; was updated to try NetBSD-8.1.</span> <span class="ja">「<a href="netbsd.htm">NetBSD/x68k を動かしてみる</a>」を NetBSD-8.1 に更新しました。</span></p><h4><span class="en">Menu</span> <span class="ja">メニュー</span></h4><p><span class="en"><a href="menu.htm#mousespeed">Mouse speed</a> could not be changed.</span> <span class="ja"><a href="menu.htm#mousespeed">マウスカーソルの速度</a> が変更できなくなっていました。</span></p><h4><span class="en">Parameter</span> <span class="ja">パラメータ</span></h4><p><span class="en">When the parameter <a href="parameter.htm#boot">boot</a> was specified with a hard disk image file, an out-of-memory error had occurred.</span> <span class="ja">パラメータ <a href="parameter.htm#boot">boot</a> にハードディスクのイメージファイルを指定したときメモリ不足のエラーが出ることがありました。</span></p><p><span class="en">The parameter <a href="parameter.htm#clock">clock</a> could not accept a decimal number.</span> <span class="ja">パラメータ <a href="parameter.htm#clock">clock</a> が 10 進数を受け付けなくなっていました。</span></p><p><span class="en">When the parameter <a href="parameter.htm#rom">rom</a> was specified, font data that was saved in the configuration file was wrongly restored.</span> <span class="ja">パラメータ <a href="parameter.htm#rom">rom</a> が指定されたとき設定ファイルに保存されたフォントデータが誤って復元されていました。</span></p><h4>MC68060</h4><p><span class="en">In MC68060, if the branch destination address is odd, Bcc/DBcc/FBcc cause an address error even if a branch is not taken.</span> <span class="ja">MC68060 の Bcc/DBcc/FBcc は分岐先のアドレスが奇数のとき分岐しなくてもアドレスエラーになります。</span></p><p><span class="en">Displacement of FDBcc had been read from not the code space but the data space.</span> <span class="ja">FDBcc のディスプレースメントをコード空間ではなくデータ空間から読んでいました。</span></p><h4>MC68000</h4><p><span class="en">The number of clock cycles of ADDA.L, SUBA.L, MULU.W and MULS.W were corrected.</span> <span class="ja">ADDA.L、SUBA.L、MULU.W および MULS.W のクロックサイクル数を修正しました。</span></p><h3><a href="#changes_0190124" id="changes_0190124">0.19.01.24</a></h3><h4><span class="en">Website</span> <span class="ja">ウェブサイト</span></h4><p><span class="en">The website of XEiJ had been moved to <a href="https://stdkmd.net/xeij/">https://stdkmd.net/xeij/</a>. Remove http://stdkmd.com/ from the Exception Site List in the Java control panel, if any.</span> <span class="ja">XEiJ のウェブサイトは <a href="https://stdkmd.net/xeij/">https://stdkmd.net/xeij/</a> に引っ越しました。Java コントロールパネルの例外サイトリストに http://stdkmd.com/ があれば取り除いてください。</span></p><h4><span class="en">Execution environment</span> <span class="ja">実行環境</span></h4><p><span class="en">Use <a href="https://jdk.java.net/11/" target="_blank">JDK 11.0.2 GA Release</a> to complile and run XEiJ.</span> <span class="ja">XEiJ のコンパイルと実行に <a href="https://jdk.java.net/11/" target="_blank">JDK 11.0.2 GA Release</a> を使います。</span></p><h4><span class="en">How to start</span> <span class="ja">起動方法</span></h4><p><span class="en">The Java applet mode to launch XEiJ on web browsers and the JNLP mode to launch XEiJ via Java Web Start had been abolished. XEiJ only works in the command line mode from now on.</span> <span class="ja">ウェブブラウザ上で XEiJ を起動する Java アプレットモードと Java Web Start を介して XEiJ を起動する JNLP モードを廃止しました。今後、XEiJ はコマンドラインモードでのみ動作します。</span></p><h4><span class="en">Log messages</span> <span class="ja">ログメッセージ</span></h4><p><span class="en">Output destination of log messages was changed from the <a href="feature.htm#terminal">terminal</a> to standard output.</span> <span class="ja">ログメッセージの出力先を <a href="feature.htm#terminal">ターミナル</a> から標準出力に変更しました。</span></p><h4><span class="en">Key assignments</span> <span class="ja">キー割り当て</span></h4><p><span class="en">You can change key assignments as to which key of X68000 is to be pressed when a key of the host machine is pressed. The assignment of the escape key can not be changed because the escape key is used to cancel assignments.</span> <span class="ja">ホストマシンのキーを押したとき X68000 のどのキーが押されたことにするか、キー割り当てを変更できます。エスケープキーは割り当てを取り消すときに使うので割り当てを変更できません。</span></p><p><span class="en">Key assignments are stored in the parameter <a href="parameter.htm#keymap">keymap</a>.</span> <span class="ja">キー割り当てはパラメータ <a href="parameter.htm#keymap">keymap</a> に保存されます。</span></p><h4><span class="en">Key input</span> <span class="ja">キー入力</span></h4><p><span class="en">To distinguish between IntlYen to the left of Backspace and IntlRo to the left of ShiftRight on Japanese 106 keyboard accurately, access to KeyEvent.rawCode is attempted. Therefore, the following warning message will appear on the console at startup.</span> <span class="ja">日本語 106 キーボードで Backspace の左隣にある IntlYen と ShiftRight の左隣にある IntlRo を正確に見分けるために、KeyEvent.rawCode にアクセスを試みます。そのため、起動時にコンソールに以下の警告メッセージが表示されます。</span></p><pre>WARNING: An illegal reflective access operation has occurred
WARNING: Illegal reflective access by xeij.Keyboard (.../XEiJ.jar) to field java.awt.event.KeyEvent.rawCode
WARNING: Please consider reporting this to the maintainers of xeij.Keyboard
WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations
WARNING: All illegal access operations will be denied in a future release</pre><p><span class="en">If the parameter accessrawcode is off, KeyEvent.rawCode is not accessed. When KeyEvent.rawCode can not be accessed, rawCode= is extracted from the result of KeyEvent.toString ().</span> <span class="ja">パラメータ accessrawcode が off のときは KeyEvent.rawCode にアクセスしません。KeyEvent.rawCode にアクセスできないときは KeyEvent.toString () の結果から rawCode=～ の部分を切り出します。</span></p><p><span class="en">The key code attribute values such as IntlYen are written at <a href="https://www.w3.org/TR/uievents-code/" target="_blank">UI Events KeyboardEvent code Values</a> .</span> <span class="ja">IntlYen などの key code attribute value は <a href="https://www.w3.org/TR/uievents-code/" target="_blank">UI Events KeyboardEvent code Values</a> に書かれています。</span></p><h4><span class="en">MC68010</span> <span class="ja">MC68010</span></h4><p><span class="en">In X68000 Hybrid mode, you can select MC68010 with the parameter <a href="parameter.htm#mpu">mpu</a> or the <a href="menu.htm#mpu">MPU menu</a>. Differences between MC68000 and MC68010 of XEiJ are as follows.</span> <span class="ja">X68000 Hybrid モードのとき、パラメータ <a href="parameter.htm#mpu">mpu</a> または <a href="menu.htm#mpu">MPU メニュー</a> で MC68010 を選択できます。XEiJ の MC68000 と MC68010 の違いは以下の通りです。</span></p><ul><li><span class="en">BKPT, MOVE from CCR, MOVEC, MOVES and RTD were added.</span> <span class="ja">BKPT、MOVE from CCR、MOVEC、MOVES、RTD が追加されました。</span></li><li><span class="en">MOVE from SR was changed to a privilege instruction.</span> <span class="ja">MOVE from SR が特権命令になりました。</span></li><li><span class="en">A format and a vector offset were added to exception stack frames.</span> <span class="ja">例外スタックフレームにフォーマットとベクタオフセットが追加されました。</span></li></ul><p><span class="en">Operation execution time is the same as MC68000. Loop mode has not been implemented.</span> <span class="ja">命令の所要時間は MC68000 と同じです。ループモードは実装されていません。</span></p><h4><span class="en">060turbo mode</span> <span class="ja">060turbo モード</span></h4><p><span class="en">Default operation frequency of 060turbo mode was reduced to 33.3MHz.</span> <span class="ja">060turbo モードのデフォルトの動作周波数を 33.3MHz に下げました。</span></p><h4><span class="en">Trace machine instructions with mouse</span> <span class="ja">マウスによる機械語命令のトレース</span></h4><p><span class="en">You can stop and resume emulation by clicking button 4 on a 5 button mouse. When emulation is stopped, you can trace an instruction by forward rotating the mouse wheel and step an instruction by backward rotating the mouse wheel. Usually one instruction is executed per one notch. 10 instructions are executed if you hold down the Shift key. 100 instructions are executed if you hold down the Ctrl key. You can execute step-until-return by backward rotating the mouse wheel with holding down the Alt key.</span> <span class="ja">5 ボタンマウスのボタン 4 でエミュレーションの停止と再開ができます。エミュレーションが停止しているとき、マウスホイールの正回転でトレース実行、負回転でステップ実行できます。通常は 1 ノッチにつき 1 命令、Shift キーを押しているときは 10 命令、Ctrl キーを押しているときは 100 命令が実行されます。Alt キーを押しながらマウスホイールを負回転させるとステップアンティルリターンが実行されます。</span></p><h4><span class="en">Extended click</span> <span class="ja">延長クリック</span></h4><p><span class="en">The state that the button is pressed will be kept until the port B of SCC is read to detect mouse clicks without missing when a mouse button is pressed. Normally, the state of the mouse of X68000 is scanned at 1/100 second intervals, so clicks manipulated by humans are rarely missed. However, there was a possibility that clicks could be lost when the scan interval was longer than 1/100 second due to the heavy operation of the emulator or when the mechanically generated click was extremely short.</span> <span class="ja">マウスのボタンが押されてから SCC のポート B が読み出されるまでボタンが押されたままの状態にしておくことで、クリックを取りこぼさないようにしました。通常、X68000 のマウスの状態は 1/100 秒間隔でスキャンされるので、人間が操作したクリックが取りこぼされることはほとんどありません。しかし、エミュレータの動作が重くてスキャンの間隔が 1/100 秒よりも長くなったり、機械的に生成されたクリックが極端に短いと、クリックを取りこぼす可能性がありました。</span></p><h4><span class="en">Joystick port</span> <span class="ja">ジョイスティックポート</span></h4><p><span class="en">You can select devices connected to the joystick ports on the joystick port window. Corresponding parameter is <a href="parameter.htm#joystickN">joystickN</a>.</span> <span class="ja">ジョイスティックポートウインドウでジョイスティックポートに接続するデバイスを選択できます。対応するパラメータは <a href="parameter.htm#joystickN">joystickN</a> です。</span></p><h4><span class="en">Normal 2 button pad</span> <span class="ja">ノーマル 2 ボタンパッド</span></h4><p><span class="en">You can connect <a href="feature.htm#normal2buttonpad">normal 2 button pads</a> to joystick ports. It is a normal joy pad. No special joystick driver is required to use them.</span> <span class="ja">ジョイスティックポートに <a href="feature.htm#normal2buttonpad">ノーマル 2 ボタンパッド</a> を接続できます。普通のジョイパッドです。特別なジョイスティックドライバは不要です。</span></p><p><span class="en">Settings of normal 2 button pads are stored in the parameter <a href="parameter.htm#normal2buttonN">normal2buttonN</a>.</span> <span class="ja">ノーマル 2 ボタンパッドの設定はパラメータ <a href="parameter.htm#normal2buttonN">normal2buttonN</a> に保存されます。</span></p><h4><span class="en">MEGA DRIVE 3 button pad</span> <span class="ja">メガドラ 3 ボタンパッド</span></h4><p><span class="en">You can connect <a href="feature.htm#megadrive3buttonpad">MEGA DRIVE 3 button pads</a> to joystick ports. Joystick driver that supports the Chelnov adapter is required to use them.</span> <span class="ja">ジョイスティックポートに <a href="feature.htm#megadrive3buttonpad">メガドラ 3 ボタンパッド</a> を接続できます。メガドラパッド変換アダプタに対応しているジョイスティックドライバが必要です。</span></p><p><span class="en">Settings of MEGA DRIVE 3 button pads are stored in the parameter <a href="parameter.htm#megadrive3buttonN">megadrive3buttonN</a>.</span> <span class="ja">メガドラ 3 ボタンパッドの設定はパラメータ <a href="parameter.htm#megadrive3buttonN">megadrive3buttonN</a> に保存されます。</span></p><h4><span class="en">MEGA DRIVE 6 button pad</span> <span class="ja">メガドラ 6 ボタンパッド</span></h4><p><span class="en">You can connect <a href="feature.htm#megadrive6buttonpad">MEGA DRIVE 6 button pads</a> to joystick ports. Joystick driver that supports the Chelnov adapter is required to use them.</span> <span class="ja">ジョイスティックポートに <a href="feature.htm#megadrive6buttonpad">メガドラ 6 ボタンパッド</a> を接続できます。メガドラパッド変換アダプタに対応しているジョイスティックドライバが必要です。</span></p><p><span class="en">Settings of MEGA DRIVE 6 button pads are stored in the parameter <a href="parameter.htm#megadrive6buttonN">megadrive6buttonN</a>.</span> <span class="ja">メガドラ 6 ボタンパッドの設定はパラメータ <a href="parameter.htm#megadrive6buttonN">megadrive6buttonN</a> に保存されます。</span></p><h4><span class="en">Shiromadokun</span> <span class="ja">白窓君</span></h4><p><span class="en">You can connect the LCD device <a href="feature.htm#shiromadokun">Shiromadokun</a> to joystick ports. Shiromadokun device driver JLCDDRV.x is included in Gekikou Dennou Club Volume 3 and Gekkan Dennou Club Volume 147.</span> <span class="ja">LCD デバイス <a href="feature.htm#shiromadokun">白窓君</a> をジョイスティックポートに接続できます。白窓君デバイスドライバ JLCDDRV.x は激光電脳倶楽部 3 号と月刊電脳倶楽部 147 号に収録されています。</span></p><p><span class="en">You can select Japanese specification or European specification with the parameter <a href="parameter.htm#shiromadokunN">shiromadokunN</a>.</span> <span class="ja">パラメータ <a href="parameter.htm#shiromadokunN">shiromadokunN</a> で日本仕様と欧州仕様を選択できます。</span></p><h4><span class="en">Font data</span> <span class="ja">フォントデータ</span></h4><p><span class="en">Font data is stored in the parameter <a href="parameter.htm#f___data">f___data</a>.</span> <span class="ja">フォントデータがパラメータ <a href="parameter.htm#f___data">f___data</a> に保存されます。</span></p><h4><span class="en">Font files</span> <span class="ja">フォントファイル</span></h4><p><span class="en">You can specify font files with the parameter <a href="parameter.htm#f___">f___</a>.</span> <span class="ja">パラメータ <a href="parameter.htm#f___">f___</a> でフォントファイルを指定できます。</span></p><h3><a href="#changes_0170617" id="changes_0170617">0.17.06.17</a></h3><h4><span class="en">Execution environment</span> <span class="ja">実行環境</span></h4><p><span class="en">Required version of Java SE has been updated to 8u131 (1.8.0_131) or later.</span> <span class="ja">要求する Java SE のバージョンを 8u131 (1.8.0_131) 以上に更新しました。</span></p><ul><li><a href="https://www.oracle.com/java/technologies/javase/8u131-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 131 Release Notes</a> (Oracle)</li></ul><h4><span class="en">*.DIM files</span> <span class="ja">*.DIM ファイル</span></h4><p><span class="en">*.DIM files are floppy disk image files converted by DIFC.X developed by GUN. XEiJ supports them now on not only reading but also writing and formatting. There are five acceptable media types: 2HD, 2HS, 2HC, 2HDE and 2HQ. The over track mode is not supported. On reading, unsaved tracks are filled by 0xe5. On writing and formatting, all tracks that include data other than 0xe5 are saved regardless of FAT. You can change the media type of *.DIM files by formatting with FORMAT.X or other tools. Note that formatting in an unsupported media type makes data unable to be written back to image files.</span> <span class="ja">*.DIM は GUN さんの DIFC.X で変換されたフロッピーディスクのイメージファイルです。XEiJ では読み込みだけ対応していましたが、書き出しと新規作成もできるようにしました。対応しているメディアタイプは 2HD、2HS、2HC、2HDE、2HQ の 5 種類です。オーバートラックには対応していません。読み込むときは保存されていないトラックを 0xe5 で充填し、書き出すときと新規作成するときは FAT に関係なく 0xe5 以外のデータを含むトラックをすべて保存します。*.DIM から読み込んだディスクを FORMAT.X などでフォーマットするとメディアタイプを変更できますが、対応していないメディアタイプに変更すると書き出せなくなるので注意してください。</span></p><h4><span class="en">Mouse</span> <span class="ja">マウス</span></h4><p><span class="en">Menu &#34;<a href="menu.htm#ctrlright">Ctrl-key + left-button = right-button</a>&#34; and parameter <a href="parameter.htm#ctrlright">ctrlright</a> were added. Operations of left-button are treated as operations of right-button while Ctrl-key is pressed.</span> <span class="ja">入力メニューの <a href="menu.htm#ctrlright">Ctrl キー＋左ボタン＝右ボタン</a> とパラメータの <a href="parameter.htm#ctrlright">ctrlright</a> を追加しました。ON にすると Ctrl (control) キーが押されている間マウスの左ボタンの操作を右ボタンの操作とみなします。</span></p><p><span class="en">Usually, right-button of mouse is assigned to the button 3 of a commonplace three button mouse. When a two button mouse is connected, right-button of mouse is assigned to the button 2.</span> <span class="ja">ありふれた 3 ボタンマウスが接続されていることを想定して右ボタンをボタン 3 に割り当てていましたが、2 ボタンマウスのときは右ボタンをボタン 2 に割り当てるようにしました。</span></p><p><span class="en">When a two button mouse is connected, you can change the mouse mode by Alt-right click. Use conventional wheel click in case of a three button mouse.</span> <span class="ja">2 ボタンマウスのときは Alt (option) + 右クリック でシームレス / エクスクルーシブを切り替えられるようにしました。3 ボタンマウスのときは従来通り中ボタンで切り替わります。</span></p><p><span class="en">To check what kind of event occurs when mouse button is operated, menu item &#34;Mouse button status&#34; was added to the menu &#34;Miscellaneous&#34;. When a mouse button is pressed or released, a message such as &#34;mouse button 1/5 was pressed (0x00000010, 0x00000400)&#34; appears on the <a href="feature.htm#terminal">terminal</a>.</span> <span class="ja">マウスのボタンが操作されたときどのようなイベントが発生しているか確認するために、メニュー『<a href="menu.htm#misc">その他</a>』にメニューアイテム『マウスのボタンの状態』を追加しました。マウスのボタンを押したときまたは離したとき「mouse button 1/5 was pressed (0x00000010, 0x00000400)」のようなメッセージが <a href="feature.htm#terminal">ターミナル</a> に表示されます。</span></p><h4>CGROM</h4><p><span class="en">When XEiJ generates CGROM automatically with fonts of the host machine, characters defined in Shift_JIS-2004 (JIS X 0213) are drawn at unused blank codes. &#34; か&#12442;き&#12442;く&#12442;け&#12442;こ&#12442;&#34; seems not drawn beautifully with MS Gothic and MS Mincho.</span> <span class="ja">ホストマシンのフォントを使って CGROM を自動生成するとき、使われていない空白のコードに Shift_JIS-2004 (JIS X 0213) で定義されている文字を展開します。MS ゴシックや MS 明朝は「か&#12442;き&#12442;く&#12442;け&#12442;こ&#12442;」が綺麗に書けないようです。</span></p><p><span class="en">Character code table is available.</span> <span class="ja">文字コード表 を作りました。</span></p><h4>RTC</h4><p><span class="en">RTC was corrected to avoid ArrayIndexOutOfBoundsException.</span> <span class="ja">RTC の操作で ArrayIndexOutOfBoundsException が発生することがありました。</span></p><p><span class="en">TEST register of RTC was implemented. winner2.x that was developed by jinson runs.</span> <span class="ja">RTC の TEST レジスタを実装しました。じんそんさんの winner2.x が動きます。</span></p><p><span class="en">References</span> <span class="ja">参考</span></p><ul><li><a href="https://x.com/kugimoto0715/status/745570562102046728" target="_blank">GIMONS さんのツイート : &#34; メモ：X68K の RTC(RP5C15) のテストレジスタ仕様 ・内部に秒、分、日、年の４つのカウンタがある（推測） ・$e8a01d の TEST レジスタは TEST0～３のビットがある ・それぞれのビットは上の４つのカウンタに影響する つづく・・・&#34;</a></li><li><a href="https://x.com/chinjinson/status/826036700597981184" target="_blank">jinson さんのツイート : &#34;winner2.x はこちら https://t.co/zbiKPeappn&#34;</a></li></ul><p><span class="en">Menu &#34;<a href="menu.htm#rtc">RTC</a>&#34; was added. When the clock of the X68000 is not on time with the clock of the host machine, use menu item &#34;Adjust clock to host&#34;.</span> <span class="ja"><a href="menu.htm#rtc">RTC メニュー</a> を追加しました。X68000 の時計とホストの時計がずれてしまったとき「時計をホストマシンに合わせる」で元に戻せます。</span></p><h3><a href="#changes_0170130" id="changes_0170130">0.17.01.30</a></h3><h4><span class="en">Floating point instructions</span> <span class="ja">浮動小数点命令</span></h4><p><span class="en">Set UNFL in FDIV, FMUL and FSCALE when a result changed from a denormalized number to a normalized number,</span> <span class="ja">FDIV、FMUL、FSCALE で拡張精度の結果が切り上げられて非正規化数から正規化数になったとき、UNFL がセットされていませんでした。</span></p><p><span class="en">Clear OPERR in FMOVE.P FPn,&lt;ea&gt; when FPn is±0 or±Inf or NaN and k-factor is 18 or upper.</span> <span class="ja">FMOVE.P FPn,&lt;ea&gt; で FPn が ±0 または ±Inf または NaN で k-factor が 18 以上のとき OPERR がセットされていました。</span></p><p><span class="en">References</span> <span class="ja">参考</span></p><ul><li><a href="https://x.com/isaki68k/status/825573041052594177" target="_blank">isaki さんのツイート : &#34;@kamadox X68030 実機でログ取ってみましたがどうでしょうか。https://t.co/aen0feckst&#34;</a></li></ul><h4>fputest.x</h4><p><span class="en"><a href="miscfiles.htm#fputestx">fputest.x</a> was updated.</span> <span class="ja"><a href="miscfiles.htm#fputestx">fputest.x</a> を更新しました。</span></p><h3><a href="#changes_0170128" id="changes_0170128">0.17.01.28</a></h3><h4>FPU、MC68882</h4><p>FSGLDIV、FSGLMUL の変則的な動作が他の命令の動作に影響を与えていました。</p><p>FCOSH、FSINH で FPCR の丸めモードがゼロへの丸めまたは負の無限大への丸めでオーバーフローしたとき、結果が正規化数の最大値ではなく無限大になってしまうことがありました。</p><p>FTENTOX で ArrayIndexOutOfBoundsException が発生することがありました。</p><h4>fputest.x</h4><p><a href="miscfiles.htm#fputestx">fputest.x</a> を更新しました。およそ 29MB のデータを 7MB 弱に圧縮して抱えており、テスト毎に展開して比較する仕組みになっています。実行するにはフリーエリアが 10MB くらい必要です。</p><h3><a href="#changes_0170124" id="changes_0170124">0.17.01.24</a></h3><h4>実行環境</h4><p>要求する Java SE のバージョンを 8u121 (1.8.0_121) 以上に更新しました。</p><ul><li><a href="https://www.oracle.com/java/technologies/javase/8u121-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 121 Release Notes</a> (Oracle)</li></ul><h4>CRTC</h4><p>垂直映像期間のすべてのラスタについて、水平映像期間の開始時から終了時までの間に、全画面再描画に相当する画面およびプレーンの表示の有無、重ね合わせの順序、半透明または特殊プライオリティ、パレット、スクロール位置などの変更があったとき、水平映像期間の終了時にデータの後半 (右半分) を再描画します。グラフィック画面で 768×512 ドット 256 色表示 (テキスト画面と混ぜて 4096 色表示) を行う画像ローダー (Arimac さんの BMPL.X/LPICL.X、CUL. さんの COPIX.r など) の画面を再現できます。</p><p>参考</p><ul><li><a href="https://x.com/kugimoto0715/status/800231367699116032" target="_blank">GIMONS さんのツイート : &#34;@kamadox 昔の TypeG は 16 ドット単位合成で分割して表示してましたが L31 からは H-DISP の開始でラスター合成を行ったあと更に H-DISP の終了で VC の更新をチェックしてラスター二分割した後半を再描画するという方法で表示してます。性能落としたくなかったんで・・・&#34;</a></li><li>Arimac さんの BMPL.X/LPICL.X の添付ドキュメント X256.DOC</li></ul><h4>FPU、MC68882</h4><p>FATAN の引数が大きすぎて ±π /2 を返すとき、丸め処理が行われていませんでした。</p><p>FCOSH で FPCR の丸めモードがゼロへの丸めまたは負の無限大への丸めでオーバーフローしたとき、結果が正規化数の最大値ではなく無限大になっていました。</p><p>FDBcc、FScc、FTRAPcc で FPSR の BSUN をセットするとき、IOP をセットしていませんでした。</p><p>MC68060 の FDBcc で未実装浮動小数点命令例外が発生したとき、スタックに積まれた PC が次の命令ではなくディスプレースメントを指していました。</p><p>FMOVE.B FPn,&lt;ea&gt;、FMOVE.W FPn,&lt;ea&gt;、FMOVE.L FPn,&lt;ea&gt; が NaN を -1 ではなく 0 に変換していました。</p><p>FMOVE.L FPn,&lt;ea&gt; で FPCR の丸め桁数がシングルのとき、シングルで表現できないがロングで表現できる値の変換に失敗していました。ロングに変換する前に誤ってシングルに丸めていました。</p><p>FMOVE.S FPn,&lt;ea&gt; と FMOVE.D FPn,&lt;ea&gt; で FPCR の丸めモードがゼロへの丸めでオーバーフローしたとき、結果が正規化数の最大値ではなく無限大になっていました。</p><p>FSGLDIV、FSGLMUL の動作を実機に近付けました。MC68882 のバグは再現していません。</p><p>FSUB で 2<sup>127</sup> から 2<sup>64</sup>-1 を引いたとき、FPSR の INEX2 と INEX がセットされていませんでした。指数をずらした組み合わせや FADD で符号が異なる場合も同様でした。</p><p><del>演算結果の仮数部に誤差がない状態で指数部がオーバーフローして無限大または正規化数の最大値を返すとき、FPSR の INEX2 と INEX がセットされていませんでした。</del></p><p><del>演算結果が丸め処理で切り上げられて非正規化数から正規化数になったとき、FPSR の UNFL がセットされていました。</del></p><p>平方根と超越関数の誤差を減らしました。</p><p>実験的に FLGAMMA と FTGAMMA を追加しました。</p><table><caption>実験的に追加された浮動小数点命令</caption><thead><tr><th>OPMODE</th><th>文法</th><th>機能</th></tr></thead><tbody><tr><th>1110000</th><td>FLGAMMA.[BWLSDXP] &lt;ea&gt;,FPn</td><td>ログガンマ関数</td></tr><tr><th>1110001</th><td>FTGAMMA.[BWLSDXP] &lt;ea&gt;,FPn</td><td>ガンマ関数</td></tr></tbody></table><h4>MC68EC030</h4><p>CHK2、CMP2 の未定義のビットを含むコンディションコードの作り方を U - D、L - D、D - L のいずれかに帰着させる方法に変更しました。引数をすべて 32 ビットに符号拡張してから符号なし比較で以下のように分岐させます。</p><pre>if (L &lt; D &amp;&amp; L &#8804; U || D == U) {
  U - D
} else if (D &lt; U &amp;&amp; U &lt; L) {
  L - D
} else {
  D - L
}</pre><p>参考</p><ul><li><a href="https://x.com/moveccr/status/814309539012976640" target="_blank">Y.Sugahara さんのツイート : &#34;cmp2 についてコード公開前に。 まず L,U,Dst は全部 32bit 符号拡張する。cmp L,U if (C) { cmp D,U if (Z) { } else if (C) { cmp L,D } else { cmp D,L } } else {&#34;</a></li><li><a href="https://x.com/moveccr/status/814309679845109760" target="_blank">Y.Sugahara さんのツイート : &#34;cmp L,D if (Z) { } else if (C) { } else { cmp D,U } }&#34;</a></li><li><a href="https://x.com/moveccr/status/814310106598871040" target="_blank">Y.Sugahara さんのツイート : &#34;cmp L,U が NC のときだけ早期終了があるのが落とし穴。&#34;</a></li></ul><p>DIVS、DIVSL、DIVU、DIVUL でゼロ除算が発生したときコンディションコードの未定義のビットで引数以外の要因で変化する Z と V のうち、V を作るコードを加えました。</p><p>参考</p><ul><li><a href="https://x.com/moveccr/status/814032098692513792" target="_blank">Y.Sugahara さんのツイート : &#34;68030 の DIV 命令の div/0 が起きたときの V フラグは、前回 div または mul が正常終了してから div0 が起きるまでに実行した dbcc 命令の回数が奇数か偶数かに依存する。 何を言っているかわからないと思うが (ry&#34;</a></li><li><a href="https://x.com/isaki68k/status/814036909030682624" target="_blank">isaki さんのツイート : &#34; 内部 V フラグ (仮称) が、正常な DIV,MUL でクリア。DBcc 命令ごとに反転 (DBT だけでも反転)。DIV 0 でその内部 V が V にコピーされる、みたいな感じ。&gt; さっきの &#34;</a></li></ul><h4>SRAM</h4><p><a href="menu.htm#sram">SRAM メニュー</a> と <a href="parameter.htm#sramsize">sramsize パラメータ</a> で SRAM の容量を 16KB/32KB/64KB から選べるようにしました。メモリマップはリセットしたときに変更されます。なお、XEiJ は SRAM の内容を設定ファイルに保存するので通常は SRAM.DAT ファイルを使いません。他のエミュレータで作成した SRAM.DAT ファイルをインポートするときは <a href="menu.htm#sram">SRAM メニュー</a> で SRAM の容量を指定してから読み込ませてください。</p><h4>プリンタ</h4><p>24 ドットビットイメージの改行ピッチを修正しました。</p><h4>ホストファイルシステム</h4><p><a href="feature.htm#hostfilesystem">ホストファイルシステム</a> でファイルをオープンした直後に先頭から 16KB 未満の位置をシークしてすぐに書き込むと先頭からシークした位置までのデータが消えてしまうバグを修正しました。また、シークコマンドで負のオフセットを指定するとエラーになるバグを修正しました。</p><h4>fputest.x</h4><p><a href="miscfiles.htm#fputestx">fputest.x</a> を作り直しました。</p><h4>instructiontest.x</h4><p><a href="miscfiles.htm#instructiontestx">instructiontest.x</a> を更新しました。easy モードで CHK 命令のコンディションコードの未定義の Z、V、C がテストされていました。また、兼用になっていたコンディションコードの X と例外発生フラグを分けました。</p><h3><a href="#changes_0161117" id="changes_0161117">0.16.11.17</a></h3><h4>実行環境</h4><p>要求する Java SE のバージョンを 8u111 (1.8.0_111) 以上に、推奨する Java SE のバージョンを 8u112 (1.8.0_112) 以上に更新しました。</p><ul><li><a href="https://www.oracle.com/java/technologies/javase/8u112-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 112 Release Notes</a> (Oracle)</li></ul><h4>プリンタ</h4><p><a href="feature.htm#printer">プリンタ</a> を追加しました。</p><h4>CRTC</h4><p>CRTC の未公開のメモリモード 2 の処理を追加しました。060turbo と 060turbo 以外で動作が少し違います。</p><h4>crtcmmtest.x</h4><p><a href="miscfiles.htm#crtcmmtestx">crtcmmtest.x</a> を追加しました。</p><h4>デバッガ</h4><p><a href="feature.htm#disassemblelist">逆アセンブルリスト</a> などにボタンを追加しました。</p><ul><li>トレース 10 回ボタン … トレース実行を 10 回繰り返します。</li><li>トレース 100 回ボタン … トレース実行を 100 回繰り返します。</li><li>ステップ 10 回ボタン … ステップ実行を 10 回繰り返します。</li><li>ステップ 100 回ボタン … ステップ実行を 100 回繰り返します。</li><li>ステップアンティルリターンボタン … 現在のサブルーチンまたは割り込みルーチンから復帰する RTD、RTE、RTR、RTS までステップ実行を繰り返します。ソースコードデバッガ SCD.X で言うところの Step until Return です。</li></ul><h4>instructiontest.x</h4><p><a href="miscfiles.htm#instructiontestx">instructiontest.x</a> を更新しました。コマンドラインに空白で区切って複数の命令を書けるようにしました。また、デフォルトでコンディションコードの未定義のビットを無視するようにしました。コンディションコードの未定義のビットもテストするときは hard と書いてから命令を書きます。</p><pre>B:\&gt;<kbd>instructiontest easy all hard all</kbd></pre><p>と書くとすべてのテストが実行されます。所要時間は 060turbo (実機) で 15 分、X68030 (実機) で 102 分でした。テストデータを増やしたので時間が長くなりましたが、以前は見逃されていたエラーが見つかることがあります。なお、ほとんどの命令は未定義のビットがないので、all を 2 回書いても 1 回しかテストされません。</p><h4>MC68030</h4><p>DIVS.L &lt;ea&gt;,Dh:Dl でオーバーフローしたときのコンディションコードの未定義の N の変化を実機に近付けました。</p><p>ゼロ除算、CHK 命令、TRAPV 命令の例外スタックフレームのフォーマットを修正しました。</p><h4>MC68060</h4><p>CAS.W Dc,Du,&lt;ea&gt; (misaligned &lt;ea&gt;)、CAS.L Dc,Du,&lt;ea&gt; (misaligned &lt;ea&gt;)、DIVS.L Dr,Dh:Dl、DIVU.L Dr,Dh:Dl、MULS.L Dr,Dh:Dl、MULU.L Dr,Dh:Dl で未実装整数命令例外が発生するようにしました。</p><p>アクセスフォルトの例外スタックフレームのフォルトステータスロングワードのサイズを修正しました。</p><h4>MC68882</h4><p>MC68882 の restore CIR にはフォーマットワード書き込んだらそれを必ず (must) 読み出さなければならないという決まりがありますが、この決まりを守らなくてもコプロセッサプロトコル違反にならないようにしました。libc の __fpuinit がこの決まりを守っていませんでした。</p><h4>拡張グラフィック画面</h4><p><a href="feature.htm#extendedgraphic">拡張グラフィック画面</a> をメニューとパラメータで ON/OFF できるようにしました。デフォルトは OFF です。変更はリセットしたとき反映されます。</p><h4>フロッピーディスク</h4><p>FDC は工事中です。NetBSD/x68k でフロッピーディスクをマウントしようとしないでください。ハングアップしてしまいます。</p><h4>vcntest.x</h4><p><a href="miscfiles.htm#vcntestx">vcntest.x</a> で 512 X 65536 X 1 を選択したとき CRTC とビデオコントローラに設定されるメモリモードを修正しました。</p><h3><a href="#changes_0160817" id="changes_0160817">0.16.08.17</a></h3><h4>重要</h4><p>FDC は工事中です。NetBSD/x68k でフロッピーディスクをマウントしようとしないでください。ハングアップしてしまいます。</p><h4>実行環境</h4><p>要求する Java SE のバージョンを 8u101 (1.8.0_101) 以上に、推奨する Java SE のバージョンを 8u102 (1.8.0_102) 以上に更新しました。</p><ul><li><a href="https://www.oracle.com/java/technologies/javase/8u102-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 102 Release Notes</a> (Oracle)</li></ul><h4>アドレス変換キャッシュモニタ</h4><p><a href="feature.htm#atcmonitor">アドレス変換キャッシュモニタ</a> を追加しました。MMU のアドレス変換キャッシュの内容を表示します。</p><h4>MPU</h4><p>ABCD と NBCD と SBCD で引数が BCD の範囲外のときの演算結果と未定義の N と V の変化を実機に近付けました。</p><table><caption>ABCD と NBCD と SBCD のコンディションコード</caption><thead><tr><th>コンディションコード</th><th>MC68030</th><th>MC68060</th></tr></thead><tbody><tr><th>X</th><td colspan="2">キャリーまたはボローがあるときセット、さもなくばクリア</td></tr><tr><th>N</th><td>未定義 (結果の最上位ビット)</td><td>未定義 (変化しない)</td></tr><tr><th>Z</th><td colspan="2">結果が 0 でないときクリア、さもなくば変化しない</td></tr><tr><th>V</th><td>未定義 (クリア)</td><td>未定義 (変化しない)</td></tr><tr><th>C</th><td colspan="2">キャリーまたはボローがあるときセット、さもなくばクリア</td></tr></tbody></table><p>ASR.W &lt;mem&gt; と ROXR.W &lt;mem&gt; で X をクリアしなければならないときにクリアしていませんでした。</p><p>BFxxx のビットフィールドのオフセットがデータレジスタで指定されたとき、オフセットが 0 未満または 32 以上のときの動作が間違っていました。</p><p>CAS.B と CAS.W と CAS2.W でオーバーフローしたときの動作が間違っていました。</p><p>CHK.W と CHK.L で例外が発生しなかったときコンディションコードが設定されていませんでした。また、未定義の Z と V と C の変化を実機に近付けました。</p><table><caption>CHK.* &lt;ea&gt;,Dq のコンディションコード</caption><thead><tr><th>コンディションコード</th><th>MC68030</th><th>MC68060</th></tr></thead><tbody><tr><th>X</th><td colspan="2">変化しない</td></tr><tr><th>N</th><td colspan="2">Dq の最上位ビット</td></tr><tr><th>Z</th><td>未定義 (Dq が 0 のときセット、さもなくばクリア)</td><td rowspan="3">未定義 (変化しない)</td></tr><tr><th>V</th><td>未定義 (&lt;ea&gt;-Dq がオーバーフローしたときセット、さもなくばクリア)</td></tr><tr><th>C</th><td>未定義 (&lt;ea&gt;-Dq でキャリーがあるときセット、さもなくばクリア)</td></tr></tbody></table><p>CHK2 と CMP2 の未定義の N と V の変化を実機に近付けました。</p><p>DIVS/DIVSL/DIVU/DIVUL でゼロ除算のとき未定義の N と Z と V およびオーバーフローしたとき未定義の N と Z の変化を実機に近付けました。</p><p>DIVU.L Dr,Dh:Dl で $8000000000000000/$FFFFFFFE などの計算が間違っていました。</p><p>NEG.B &lt;mem&gt; と NEG.W &lt;mem&gt; でオーバーフローしたとき (引数が $80 と $8000 のとき) のコンディションコードが間違っていました。</p><h4>SCSI ROM</h4><p>IOCS _SCSIDRV で D5 レジスタに 3 以上が指定されたとき 2048 バイト / ブロックとみなすパッチを追加しました。</p><h4>その他</h4><p><a href="miscfiles.htm">misc/* の説明</a> を書きました。</p><p><a href="miscfiles.htm#instructiontestx">instructiontest.x</a> を追加しました。MPU のユーザモードで使用できる整数命令の動作をテストするプログラムです。</p><p><a href="miscfiles.htm#vcntest2x">vcntest2.x</a> を追加しました。ビデオコントローラの注釈に書いた例を実際に試すプログラムです。</p><p><a href="#download_old">旧版</a> をダウンロードできるようにしました。</p><h3><a href="#changes_0160717" id="changes_0160717">0.16.07.17</a></h3><h4>重要</h4><p>FDC は工事中です。NetBSD/x68k でフロッピーディスクをマウントしようとしないでください。ハングアップしてしまいます。</p><h4>ビデオコントローラ</h4><p>ビデオコントローラのスプライト画面とテキスト画面とグラフィック画面を重ね合わせるコードを大幅に増やしました (手作業 2.3 万行 → 自動生成 48 万行)。</p><h4>グラフィック画面</h4><p>実画面サイズが 1024×1024 ドットのグラフィック画面に実機にない 256 色モードと 65536 色モードを追加しました。</p><table><thead><tr><th>メモリモード</th><th>実画面サイズ</th><th>色数</th><th>ページ数</th><th>GVRAM サイズ</th></tr></thead><tbody><tr><th>0</th><td rowspan="3">512×512 ドット</td><td>16 色</td><td>4 ページ</td><td rowspan="4">512KB</td></tr><tr><th>1</th><td>256 色</td><td>2 ページ</td></tr><tr><th>3</th><td>65536 色</td><td rowspan="4">1 ページ</td></tr><tr><th>4</th><td rowspan="3">1024×1024 ドット</td><td>16 色</td></tr><tr><th>5</th><td>256 色</td><td>1MB</td></tr><tr><th>7</th><td>65536 色</td><td>2MB</td></tr></tbody></table><p>実画面サイズが 1024×1024 ドットのグラフィック画面を 512×512 ドットずつ 4 分割して組み換えられるようにしました。</p><h4>表示モードテスト</h4><p><a href="feature.htm#screenmodetest">表示モードテスト</a> に画面の解像度、ラスタ 2 度読みとインターレースの有無、オシレータと水平同期信号と垂直同期信号の周波数などの表示を追加しました。</p><h4>PCM8A.X のパッチ</h4><p>PCM8A.X v1.02 がローカルメモリを 256MB 積んだ 060turbo で動かない問題を回避するパッチを追加しました。I/O ポートのアドレスの上位 8 ビットが $FF になっているところを $00 に修正します。なお、LZX 圧縮されたデバイスドライバや実行ファイルには対応していません。</p><h4>音声出力速度制御</h4><p>音声出力速度制御 を廃止しました。代わりに音声出力が ON のとき負荷率 90% を上限としてそれ以上動作周波数が上がらないようにしました。</p><h4>データブレークポイント</h4><p>バイトサイズまたはワードサイズの <a href="feature.htm#databreakpoint">データブレークポイント</a> が仕掛けられたアドレスをそれより大きいワードサイズまたはロングワードサイズでアクセスしたときも停止するようにしました。</p><h4>スプライト画面</h4><p>スプライトプレーンとバックグラウンドプレーンのパレットの下位 4 ビットがすべて 0 でバックグラウンドプレーン 1 のパレットブロックが 0 のときバックグラウンドプレーン 0 のパレットブロックが出力されなくなっていたバグを修正しました。</p><h4>CRTC</h4><p>インターレースのとき画面に縞模様ができるようになっていたバグを修正しました。</p><h4>フォントエディタ</h4><p>フォントエディタ でズームアウトすると表示が乱れるようになっていたバグを修正しました。</p><h4>その他</h4><p>動作確認環境を Windows 7 Professional (64 ビット) から Windows 10 Pro (64 ビット) に更新しました。</p><h3><a href="#changes_0160512" id="changes_0160512">0.16.05.12</a></h3><h4>フロッピーディスク、SASI ハードディスク、SCSI ハードディスクと CD-ROM</h4><p>レスポンスの遅い FD メディアを挿入するとメディアの判別が終わる前に FDC が READ DATA コマンドを受け付けてしまい NullPointerException が発生することがあるバグを修正しました (Thanks: 星型ピノ @delikea さん)。メディアの判別が終わるまでメディアが挿入されていないように見えるようにしました。SASI ハードディスク と SCSI ハードディスクと CD-ROM も同様の調整を行いました。</p><h3><a href="#changes_0160507" id="changes_0160507">0.16.05.07</a></h3><h4>スプライト画面</h4><p>スプライト画面を作り直しました。スプライトは表示ラスタの 2 ラスタ手前で、バックグラウンドは 1 ラスタ手前で並べて、表示ラスタで重ね合わせます。変化していないラスタの描画を省く処理は行わず、スプライトを表示できる画面モードのときは常にすべてのラスタを描画します。そのため、768×512 ドット以外の画面モードのときの動作が重くなっています。</p><h4>スプライトパターンビュア</h4><p><a href="feature.htm#spritepatternviewer">スプライトパターンビュア</a> を追加しました。</p><h4>IOCS _DEFCHR</h4><p>IPLROM 1.3 のとき IOCS _DEFCHR が X68030 の <a href="feature.htm#highmemory">ハイメモリ</a> や 060turbo の <a href="feature.htm#localmemory">ローカルメモリ</a> を ROM と誤認してフォントパターンの設定に失敗する問題を修正するパッチを追加しました。</p><h3><a href="#changes_0160430" id="changes_0160430">0.16.04.30</a></h3><h4>シームレスマウスモード</h4><p>IOCS だけでなく SX-WINDOW (FSX.X version 3.10) も <a href="feature.htm#seamlessmouse">シームレスマウスモード</a> で操作できるようにしました。<a href="feature.htm#edgeacceleration">縁部加速</a> を ON にすると実画面モードもシームレスのまま操作できます。</p><h4>エクスクルーシブマウスモード</h4><p><a href="feature.htm#exclusivemouse">エクスクルーシブマウスモード</a> に入るときと出るときに X68000 のマウスカーソルが動かないようにしました。</p><h4>スプライト画面</h4><p>XEiJ は画面の描画処理を水平映像期間の先頭で 1 ラスタ分まとめて行いますが、このときスプライトを並べる処理も同時に行っていました。スプライトを並べる処理だけ 1 ラスタ手前にずらしました。スプライトダブラ (画面を上下に分割するラスタに走査線が差し掛かったとき上で使われたスプライトを定義し直して下で再び使うことで 1 画面あたりのスプライトの表示可能枚数を増やす技術) を用いているゲームなどで横線ノイズが表示される症状が改善される場合があります。</p><h4>SCSI ROM</h4><p>X68000 EXPERT/SUPER/XVI/Compact モードのとき IPLROM30.DAT から自動生成した SCSI ROM がうまく動かないバグを修正しました。060turbo モード用に追加した IPLROM 1.3 のパッチと衝突していました。</p><h4>逆アセンブルリスト</h4><p>CPUSHL/CPUSHP/CPUSHA 命令を逆アセンブルすると CINVL/CINVP/CINVA 命令が表示されるバグを修正しました。</p><h3><a href="#changes_0160426" id="changes_0160426">0.16.04.26</a></h3><h4>グラフィック画面</h4><p>65536 色モードのときパレットコードの上位バイトをバイトサイズでリードすると 0 に見えるバグを修正しました。</p><h4>データブレークポイント</h4><p>X68000 モードのとき MOVEM 命令でメインメモリを読み書きすると <a href="feature.htm#databreakpoint">データブレークポイント</a> で検出されないバグを修正しました。</p><h3><a href="#changes_0160422" id="changes_0160422">0.16.04.22</a></h3><h4>MC68060</h4><p>060turbo モードのとき CTRL+OPT.1+DEL や kt reset などでソフトウェアリセットをかけようとすると「バスエラーが発生しました」という白帯が表示されて結局リセットボタンを押さなければならなくなるバグを修正しました。MC68060 の MOVES 命令でファンクションコードに 3 が指定されたときユーザモードのメモリマップが選択されてスーパーバイザ領域のアクセスに失敗していました。</p><h4>メインメモリ</h4><p>設定メニューでメインメモリのサイズを変更したとき直後のリセットで反映されない不具合を修正しました。</p><h3><a href="#changes_0160421" id="changes_0160421">0.16.04.21</a></h3><h4>実行環境</h4><p>要求する Java SE のバージョンを 8u91 (1.8.0_91) 以上に、推奨する Java SE のバージョンを 8u92 (1.8.0_92) 以上に更新しました。</p><ul><li><a href="https://www.oracle.com/java/technologies/javase/8u92-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 92 (JDK 8u92)</a> (Oracle)</li></ul><h4>ホストファイルシステム</h4><p><a href="feature.htm#hostfilesystem">ホストファイルシステム</a> でホストマシンのファイルを操作するスレッドをコアから分離しました。また、先読み・遅延書き込みバッファを介してファイルにアクセスするようにしました。ファイルアクセスが軽くなり、バッファの充填や排出を待っている間も割り込み処理を続けることができます。<a href="execute.htm#command_dennouclub">例 : CD-ROM 版の電脳倶楽部を起動する</a> に書いたように XEiJ は DVD スーパーマルチドライブ (以下は E: の場合) などに CD-ROM 版の電脳倶楽部 (月刊電脳倶楽部 140 号以降や激光電脳倶楽部など) を入れて</p><pre>&gt;<kbd>java -jar XEiJ.jar -boot=E:</kbd></pre><p>とするだけで電脳倶楽部を起動できますが、このとき「◎」をクリックして新しいページに移る度にオープニング曲の演奏が途切れる症状が改善されました。</p><h4>SCSI ハードディスク</h4><p>XEiJ は SCSI ハードディスクのイメージファイルの新規作成で必ず装置初期化を行い、正しく装置初期化されていないファイルを SCSI ハードディスクのイメージファイルと認識しない仕様になっています。この条件が厳しすぎて、装置初期化を行わない他のエミュレータで FORMAT.X を使って装置初期化されたファイルは FORMAT.X のバグでファイルサイズと容量が一致していないため XEiJ で使用することができませんでした (Thanks: <a href="http://tanehp.ec-net.jp/heppoko-lab/" target="_blank">TANE さん</a>)。ファイルサイズに対して容量が 1 セクタ少ないファイルも SCSI ハードディスクのイメージファイルとみなすようにしました。</p><p>FORMAT.X の動作に合わせて SCSI ハードディスクの Read Capacity コマンドが最終論理ブロックアドレスの代わりに論理ブロック数を返していました。これを常に最終論理ブロックアドレスを返すように変更してしまうと XEiJ でも FORMAT.X で正しく装置初期化することができなくなってしまうので、Read Capacity コマンドが FORMAT.X から呼び出されたときだけ従来通り論理ブロック数を返し、それ以外は最終論理ブロックアドレスを返すようにしました。</p><p>060turbo.sys の SCSI コールでバスエラーが出ることがあるバグを修正するパッチを追加しました。</p><h4>MC68882</h4><p>MC68882 の浮動小数点コンディションコード OR、NE、GLE、SNE の動作を修正しました。</p><table><thead><tr><th>cc</th><th>MC68882</th><th>MC68060</th></tr></thead><tbody><tr><th>OR / GLE</th><td>Z|~NAN</td><td>~NAN</td></tr><tr><th>NE / SNE</th><td>NAN|~Z</td><td>~Z</td></tr></tbody></table><h4>ハイメモリ</h4><p>ハイメモリが存在するだけで正常に動作しなくなるプログラムがあるので X68030 のハイメモリのデフォルトを OFF にしました。</p><h3><a href="#changes_0160412" id="changes_0160412">0.16.04.12</a></h3><h4>実行環境</h4><p>要求する Java SE のバージョンを 8u77 (1.8.0_77) 以上に、推奨する Java SE のバージョンを 8u77 (1.8.0_77) 以上に更新しました。</p><ul><li><a href="https://www.oracle.com/java/technologies/javase/8u77-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 77 Release Notes</a> (Oracle)</li></ul><p>Google Chrome はバージョン 45 から Java アプレットに対応しなくなりました。<a href="sample.htm">実行サンプル</a> は <a href="execute.htm#javaws">Java Web Start</a> で起動できます。</p><h4>060turbo</h4><p>機種に 060turbo を追加しました。</p><p>MPU は MC68060 と命令互換のプロセッサです。命令キャッシュ、データキャッシュ、分岐キャッシュ、ストアバッファおよびスーパースカラはありません。CACR や PCR の該当ビットを 1 にしても何も変わりません。0 サイクルの命令はありません。</p><p>FPU は未実装浮動小数点命令を FPSP に任せる通常版と MC68882 と MC68060 のすべての浮動小数点命令を実行できるフルスペック版を選択できます。</p><p>MMU のアドレス変換キャッシュは独自仕様です。1-way にする代わりにハッシュ関数を工夫してアドレス変換のオーバーヘッドを減らしています。</p><p>FC2 ピンをカットできます。NetBSD/x68k で X Window System が動きます。<a href="netbsd.htm">NetBSD/x68k を動かしてみる</a> を書きました。</p><p>ローカルメモリ $10000000-$1FFFFFFF (16MB～256MB) を利用できます。設定ファイルにローカルメモリの内容を保存することができます。</p><p>リソースから読み込んだ IPLROM30.DAT に新しく作ったパッチを当てて使います。060turbo の実機の ROM は不要です。</p><h4>ハイメモリ</h4><p>X68030 モードのとき九十九電気 (ツクモ) の TS-6BE16 相当のハイメモリ $01000000-$01FFFFFF (16MB) を利用できます。設定ファイルにハイメモリの内容を保存することができます。</p><h4>浮動小数点プロセッサボード</h4><p>浮動小数点プロセッサボード CZ-6BP1 を 2 枚挿してあります。FPCP は MC68882 と命令互換のコプロセッサです。FLOAT3.X を利用できます。<a href="http://retropc.net/x68000/software/develop/c/gcc_mariko/" target="_blank">GCC（真里子版）</a> または <a href="http://retropc.net/x68000/software/develop/c/gcc2/" target="_blank">GCC2</a> でコンパイルして <a href="http://retropc.net/x68000/software/develop/lib/libc1132a/" target="_blank">libc</a> をリンクしたプログラムは FLOAT3.X を経由せずコプロセッサを直接操作します。</p><h4>マザーボードコプロセッサ</h4><p>ドーターボードにある MC68060 から見てマザーボードにある MC68882 をマザーボードコプロセッサと呼んでいます。実機と同様に MC68060 から MC68882 にアクセスできます。起動メッセージなどでマザーボードコプロセッサの有無と種類が表示されます。</p><h4>SCSI CD-ROM</h4><p>SCSI 機器の種類に CD-ROM を追加しました。*.ISO ファイルを SCSI CD-ROM とみなします。ブートセクタがあるときは「ここから再起動」で CD-ROM から直接起動できます。Human68k からは <a href="http://retropc.net/x68000/software/disk/scsi/susie/" target="_blank">susie.x</a> でアクセスできます。</p><h4>IPLROM</h4><p>IPLROM 1.3 を 1.5 に更新するパッチを追加しました。MC68000、MC68EC030 および MC68060 のいずれでも起動できます。SCSI CD-ROM から起動できます。起動メッセージにマザーボードコプロセッサや浮動小数点プロセッサボードの有無と種類を表示します。</p><p>IOCS _CRTMOD が指定された画面モードと異なる色数でグラフィックパレットを初期化するバグを修正するパッチを追加しました。</p><h4>デバッグコンソール</h4><p>コマンド入力で停止、実行、逆アセンブル、ダンプなどの処理を行います。</p><h4>論理空間モニタ</h4><p>論理アドレスに割り当てられている物理アドレスを表示します。</p><h4>物理空間モニタ</h4><p>物理アドレスに割り当てられているデバイスを表示します。</p><h4>ルートポインタリスト</h4><p>マルチタスク環境で停止させるタスクを選択できます。</p><h4>レジスタリスト</h4><p><a href="feature.htm#registerlist">レジスタリスト</a> に浮動小数点レジスタを追加しました。</p><h4>逆アセンブルリスト</h4><p><a href="feature.htm#disassemblelist">逆アセンブルリスト</a> でスーパーバイザモードとユーザモードを切り替えられるようにしました。</p><h4>メモリダンプリスト</h4><p><a href="feature.htm#memorydumplist">メモリダンプリスト</a> でスーパーバイザモードとユーザモードを切り替えられるようにしました。</p><h4>周波数固定モード</h4><p><a href="feature.htm#fixedfrequencymode">周波数固定モード</a> のときも負荷率が 100% を超えると動作周波数を抑えて負荷率を 100% まで下げます。</p><h4>音声出力速度制御</h4><p>音声出力速度制御 のデフォルトを ON にしました。</p><h4>ホストファイルシステム</h4><p><a href="http://retropc.net/x68000/software/tools/archiver/lha/" target="_blank">LHA.x</a> の誤動作を避けるため、DOS _DSKFRE が返す HFS の空き容量の上限を 2GB にしました。</p><p>DOS _FILES が属性の条件にボリューム名が含まれているときファイル名の条件を無視してボリューム名を返していました。これが原因で FORMAT.X が領域確保後のシステム転送に失敗していました。HFS の DOS _FILES がボリューム名を返すのはファイル名の条件が *.* のときだけにしました。</p><h4>ディスクのイメージファイルの新規作成</h4><p>フロッピーディスク、SASI ハードディスク、SCSI ハードディスクのイメージファイルを新規作成するとき、適切な拡張子が指定されていなければ拡張子を追加するようにしました。</p><h4>ラスタコピー</h4><p>ラスタコピーを実機と同様に水平フロントポーチで行います。</p><h4>FPU</h4><p>「80 ビット拡張精度」と「96 ビット拡張精度」の呼び方を「拡張精度」と「三倍精度」に変更しました。</p><p>例外発生時に FPIAR またはスタックフレームの実効アドレスが正しく設定されていない場合がありました。</p><p>FTST がソースオペランドではなくデスティネーションオペランドをテストしていました。これが原因で xeyes の目玉が崩れていました。</p><p>FBGE と FBLE で FPSR の Z と NAN が同時にセットされていた場合 (通常は起こらない) の動作が実機と違いました。</p><h4>MC68EC030</h4><p>BFINS Dn,&lt;mem&gt;{offset:width} で 5 バイトに跨るとき 1 バイト目の範囲外のビットが破壊されていました。</p><p>BFFFO &lt;mem&gt;{offset:width},Dn で オフセットが 8 以上のときの計算が間違っていました。</p><h4>ソースコード</h4><p><a href="https://stdkmd.net/xeij/source/">ソースコード</a> を分割しました。</p><h3><a href="#changes_0150831" id="changes_0150831">0.15.08.31</a></h3><p>推奨する Java SE のバージョンを 8u60 (1.8.0_60) 以上に更新しました。</p><ul><li><a href="https://www.oracle.com/java/technologies/javase/8u60-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 60 Release Notes</a> (Oracle)</li></ul><h3><a href="#changes_0150812" id="changes_0150812">0.15.08.12</a></h3><p>MOVEM.wl &lt;list&gt;,-(Ar) で &lt;list&gt; に Ar が含まれているときの動作を再修正しました。</p><h3><a href="#changes_0150809" id="changes_0150809">0.15.08.09</a></h3><p>MOVEM.wl &lt;list&gt;,-(Ar) で &lt;list&gt; に Ar が含まれているときの動作を修正しました。</p><h3><a href="#changes_0150719" id="changes_0150719">0.15.07.19</a></h3><p>ビデオコントローラの 0x00e82500 の上位バイト (スプライト画面・テキスト画面・グラフィック画面間の優先順位) に不正な値が設定されたときの動作を X68030 の実機に合わせました。参考 : <a href="https://x.com/kugimoto0715/status/622434268787019776" target="_blank">GIMONS さん</a></p><h3><a href="#changes_0150715" id="changes_0150715">0.15.07.15</a></h3><p><a href="feature.htm#disassembler">逆アセンブラ</a> を更新しました。</p><p>要求する Java SE のバージョンを 8u51 (1.8.0_51) 以上に更新しました。</p><ul><li><a href="https://www.oracle.com/java/technologies/javase/8u51-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 51 Release Notes</a> (Oracle)</li></ul><h3><a href="#changes_0150701" id="changes_0150701">0.15.07.01</a></h3><p><a href="feature.htm">機能と特徴</a> の文章を更新しました。また、<a href="menu.htm">メニュー</a> と <a href="parameter.htm">パラメータ</a> と <a href="inifile.htm">設定ファイル</a> の説明を書きました。</p><p>コマンドラインから起動したとき「メインメモリの内容を保存する」が ON になっていると終了時にメインメモリの内容が <a href="inifile.htm">設定ファイル</a> に保存されます。RAM ディスクで作業中にうっかりエミュレータを終了してしまっても大丈夫です。</p><p>メモリ上の Human68k にもパッチを当てます。といっても大したものは入っていません。</p><p><a href="feature.htm#fefunction">FE ファンクション命令</a> を更新しました。「FLOATn.X を組み込まない」を ON にすると CONFIG.SYS に FLOATn.X が書かれていても組み込まれなくなります。</p><p>FPCR (Floating Point Control Register) と FPSR (Floating Point Status Register) の処理を更新しました。</p><p>コアの負荷が大きいときキーを押した途端に何文字も入力されてしまうことがある問題を修正しました。</p><p>MPU が MC68EC030 のとき DIVS.L &lt;ea&gt;,Dq 命令で -2<sup>31</sup>/-1 の計算を間違えるバグを修正しました。</p><p>MPU が MC68EC030 のとき上位 8 ビットが 0 でない奇数アドレスにワードサイズでアクセスしようとするとコアが止まるバグを修正しました。</p><h3><a href="#changes_0150608" id="changes_0150608">0.15.06.08</a></h3><p>推奨ブラウザから Google Chrome を外し、代わりに Mozilla Firefox と Waterfox を復活させました。</p><p><a href="http://retropc.net/x68000/software/disk/floppy/9scset/" target="_blank">9SCDRV.X</a> を組み込むと Human68k と FDDEVICE.X の 2HD/2HC/2DD8/2DD9/2HQ に加えて 2DD10/2HDE/2HS のフロッピーディスクのイメージファイルにアクセスできます。2HD/2HC/2HDE/2HS のイメージから起動できます。</p><p>DIFC.X で変換された 2HD/2HC/2HQ/2HDE/2HS の DIM ファイル (オーバートラックなし) にリードオンリーでアクセスできます。2HD/2HC/2HDE/2HS の DIM ファイルから起動できます。</p><h3><a href="#changes_0150422" id="changes_0150422">0.15.04.22</a></h3><p>ROM デバッガの実効アドレスの計算に関係する不具合を修正するパッチを追加しました。</p><p>キーボードをマウスで操作したときマウス受信データのボタンの状態が変化しないようにしました。</p><p>ファンクションキーの表示がなくてカーソルが最下行にあるとき OPT.1+OPT.2 を押すと電卓が画面の外に表示されて見えない問題を修正するパッチを加えました。060turbo と同様にカーソルが最下行にあるときは電卓がカーソルの上の行に表示されます。</p><p>LEA.L 4.W,A0;MOVEM.L D0-D1,-(A0) を実行すると ArrayIndexOutOfBoundsException が出てコアが止まるバグを修正しました。</p><h3><a href="#changes_0150415" id="changes_0150415">0.15.04.15</a></h3><p>音声出力速度制御 をデフォルトで OFF にしました。</p><p>ROM デバッガ 2.32 で FSINCOS.X FPm,FPc:FPs をアセンブルしようとすると bus error in debugger が発生するバグを修正するパッチを加えました。</p><p>要求する Java SE のバージョンを 8u45 (1.8.0_45) 以上に更新しました。<a href="https://www.oracle.com/java/technologies/javase/8u45-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 45 Release Notes</a></p><h3><a href="#changes_0150330" id="changes_0150330">0.15.03.30</a></h3><p>スタイルシートをサイトに合わせました。</p><p>FFT を更新しました。</p><p>推奨する Java SE のバージョンを 8u40 (1.8.0_40) 以上に更新しました。<a href="https://www.oracle.com/java/technologies/javase/8u40-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 40 Release Notes</a></p><h3><a href="#changes_0150129" id="changes_0150129">0.15.01.29</a></h3><p>http://stdkmd.com/xeij/ に引っ越しました。Java コントロールパネルのセキュリティタブの例外サイトリストに http://mada.la.coocan.jp/ を登録されている場合は http://stdkmd.com/ への変更をお願いします。</p><h3><a href="#changes_0150125" id="changes_0150125">0.15.01.25</a></h3><p>ウインドウの位置、ディスクのイメージファイルの名前、SRAM の内容などを終了時に設定ファイルに保存して次回の起動時に復元します。コマンドラインから起動したときの設定ファイルは、Windows のとき %APPDATA%/XEiJ/XEiJ.ini、それ以外は ~/XEiJ.ini または ./XEiJ.ini です。Java アプレットのときは Web Storage を、Java Web Start のときは PersistenceService を使用して設定をローカルファイルに保存します。</p><p><a href="feature.htm#screenmodetest">表示モードテスト</a> のパターンテストを更新しました。背景に敷き詰められると邪魔な 0 番の番号を省き、反転を示す印は小さく、手前のスプライトを明るく、奥のスプライトとバックグラウンドを暗く表示します。</p><p>デバッガ db.x とソースコードデバッガ scd.x にある「リモートコンソールモードのとき受信バッファに溜まった入力が 1 文字置きに欠落する」というバグを回避して、入力を 1 行ずつ転送するターミナルとの相性を改善しました。</p><p>音声出力速度制御 を OFF にできるようにしました。音程が不安定になるのは音が途切れるよりも気持ち悪いという人は OFF にしてください。</p><p>要求する Java SE のバージョンを 8u31 (1.8.0_31) 以上に更新しました。<a href="https://www.oracle.com/java/technologies/javase/8u31-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 31 Release Notes</a></p><h3><a href="#changes_0141226" id="changes_0141226">0.14.12.26</a></h3><p>CRTC のステージを再構築しました。CRTC IRQ と V-DISP は水平フロントポーチで遷移します。ラスタブレークも一緒で H-SYNC はブレーク後数命令ないし数十命令後に遷移します。</p><p>ビデオコントローラの重ね合わせの処理を変更しました。スプライト画面とテキスト画面のどちらか代表する画面を選んでからグラフィック画面と重ね合わせます。</p><p><a href="feature.htm#screenmodetest">表示モードテスト</a> を追加しました。CRTC やビデオコントローラなどの表示モードの確認と、任意のテストデータで動作テストを行えます。</p><p><a href="feature.htm#soundmonitor">音声モニタ</a> の出力波形は左クリックと右クリックで時間方向、Shift キーを押しながらだと振幅方向に拡大縮小します。</p><h3><a href="#changes_0141123" id="changes_0141123">0.14.11.23</a></h3><p>OPM モニタ改め <a href="feature.htm#soundmonitor">音声モニタ</a> に、出力波形、周波数分布、キーオンとリリースを示す鍵盤、音色定義データおよび ADPCM の状態を表示します。</p><p>ADPCM の出力が ON または OFF されたとき、-1 または 0 のマスクの代わりに滑らかな曲線を掛けることでプチノイズを除去します。</p><p>ADPCM で 0x00 または 0x88 が出力されたとき、変位の符号によって 0x08 または 0x80 に読み替えることで変位の偏りを抑制します。</p><p>ADPCM の原発振周波数を通常の 8MHz/4MHz と改造された 8MHz/16MHz から選べます。8MHz/16MHz のとき PCM8A.X -M1 -F2 とすると ADPCM のサンプリング周波数が 31.3kHz になります。</p><p>ADPCM の予測指標が 45 以上のとき波形が乱れる不具合を修正しました。</p><h3><a href="#changes_0141111" id="changes_0141111">0.14.11.11</a></h3><p>IPLROM 1.3 を使用していて ROM デバッガがないのに ROM デバッガを組み込もうとしたとき、エラーが出ないようにダミーのコードを走らせてそのまま起動できるようにしました。</p><h3><a href="#changes_0141107" id="changes_0141107">0.14.11.07</a></h3><p>コアのバグを修正しました。また、ゼロプライオリティといくつかの特殊プライオリティ／半透明モードを追加・修正しました。</p><h3><a href="#changes_0141103" id="changes_0141103">0.14.11.03</a></h3><p>DMA を更新しました。</p><p><a href="feature.htm#databreakpoint">データブレークポイント</a> を追加しました。指定されたアドレスとサイズで指定された範囲のデータの読み書きがあると停止します。</p><h3><a href="#changes_0141029" id="changes_0141029">0.14.10.29</a></h3><p>HFS の _CREATE の不具合を修正しました。また、MFP の割り込み要求が 1 命令遅れて受け付けられるようにしてみました。</p><h3><a href="#changes_0141021" id="changes_0141021">0.14.10.21</a></h3><p>SASI ハードディスクのイメージファイルの書き出しと SCSI ハードディスクのイメージファイルの新規作成の不具合を修正しました。</p><h3><a href="#changes_0141020" id="changes_0141020">0.14.10.20</a></h3><p>マウスモード (エクスクルーシブ) のときマウスカーソルの移動速度を調節できるようにしました。</p><h3><a href="#changes_0141018" id="changes_0141018">0.14.10.18</a></h3><p><a href="feature.htm#rasterbreakpoint">ラスタブレークポイント</a> を追加しました。垂直帰線割り込み、水平帰線割り込み、ラスタ割り込みをトレースしたいときに使います。</p><h3><a href="#changes_0141015" id="changes_0141015">0.14.10.15</a></h3><p>要求する Java SE 実行環境のバージョンを <a href="https://www.oracle.com/java/technologies/javase/8u25-relnotes.html" target="_blank">Java&#8482; SE Development Kit 8, Update 25 Release Notes</a> (8u25, 1.8.0_25) 以上に更新しました。</p><h3><a href="#changes_0141014" id="changes_0141014">0.14.10.14</a></h3><p>パラメータ -model=(EXPERT|SUPER|XVI|Compact|Hybrid|X68030) またはメニューで機種を選択できます。IPLROM*.DAT は機種に対応するものがリソースから読み込まれるので別途用意する必要はありません。</p><p>SCSI ハードディスクのイメージファイル (*.HDS) に対応しました。SCSIINROM.DAT と SCSIEXROM.DAT はリソースにある IPLROM30.DAT を使って内部で生成されるので別途用意する必要はありません。</p><h3><a href="#changes_0140923" id="changes_0140923">0.14.09.23</a></h3><p>FMOVE.D FPn,(Ar)+/-(Ar) を修正しました。</p><h3><a href="#changes_0140922" id="changes_0140922">0.14.09.22</a></h3><p>ieeerem/rem のアルゴリズムを変更しました。sin(2<sup>10000</sup>) を計算できるようにしました。</p><h3><a href="#changes_0140908" id="changes_0140908">0.14.09.08</a></h3><p>atanh のアルゴリズムを変更しました。また、JRE 7 への対応を廃止しました。</p><h3><a href="#changes_0140904" id="changes_0140904">0.14.09.04</a></h3><p>atan/exp2/tan のアルゴリズムを変更しました。</p><h3><a href="#changes_0140829" id="changes_0140829">0.14.08.29</a></h3><p>浮動小数点命令の処理を更新しました。</p><h3><a href="#changes_0140822" id="changes_0140822">0.14.08.22</a></h3><p>デバッガで浮動小数点命令を逆アセンブルできるようにしました。</p><h3><a href="#changes_0140821" id="changes_0140821">0.14.08.21</a></h3><p>拡張精度浮動小数点数 (19 桁) または三倍精度浮動小数点数 (24 桁) のどちらかを選択できるようにしました。</p><h3><a href="#changes_0140820" id="changes_0140820">0.14.08.20</a></h3><p>FETOXM1 の誤差を減らしました。</p><h3><a href="#changes_0140819" id="changes_0140819">0.14.08.19</a></h3><p>X68030 モードのとき浮動小数点命令の一部 (演算命令と分岐命令) を実行できるようにしました。例外処理は未実装です。</p><h3><a href="#changes_0140717" id="changes_0140717">0.14.07.17</a></h3><p>要求する Java SE のバージョンを更新しました。</p><h3><a href="#changes_0140506" id="changes_0140506">0.14.05.06</a></h3><p>割り込み禁止の状態で暴走したときもインタラプトスイッチが効くようにしました。</p><h3><a href="#changes_0140505" id="changes_0140505">0.14.05.05</a></h3><p><a href="feature.htm#branchlog">分岐ログ</a> を更新して <a href="feature.htm#flowvisualizer">プログラムフロービジュアライザ</a> を追加しました。プログラムカウンタが通った跡をリアルタイムに可視化します。</p><h3><a href="#changes_0140501" id="changes_0140501">0.14.05.01</a></h3><p>デバッグウインドウが開いているときは F11 キーが全画面表示ではなく停止ボタンとして機能します。</p><h3><a href="#changes_0140430" id="changes_0140430">0.14.04.30</a></h3><p>コアのバグを修正しました。</p><h3><a href="#changes_0140429" id="changes_0140429">0.14.04.29</a></h3><p>キー入力の処理を TimerTask を使わない方法に変更しました。</p><h3><a href="#changes_0140428" id="changes_0140428">0.14.04.28</a></h3><p>FDC を更新しました。FDDEVICE.X を組み込むと 2DD (640KB)、2DD (720KB)、2HQ のイメージファイルを操作できます。</p><h3><a href="#changes_0140427" id="changes_0140427">0.14.04.27</a></h3><p>描画するフレームの間隔を空けることで描画の負荷を軽くすることができます。</p><h3><a href="#changes_0140426" id="changes_0140426">0.14.04.26</a></h3><p>FDC を動かしてみるテスト。FORMAT /5 B: で 2HC モードでフォーマットできます。</p><h3><a href="#changes_0140423" id="changes_0140423">0.14.04.23</a></h3><p>HUMAN.SYS が入っていないディレクトリでも起動できるようにしました。COMMAND.X は入れておいてください。</p><h3><a href="#changes_0140421" id="changes_0140421">0.14.04.21</a></h3><p>実行サンプルの Human68k version 3.02 のシステムディスクの設定を 10MHz、最近傍補間、音声なしに変更しました。</p><h3><a href="#changes_0140419" id="changes_0140419">0.14.04.19</a></h3><p>Firefox と Opera でも全画面表示が使えるようになりました。</p></div><div id="foot"><a href="https://stdkmd.net/">STUDIO KAMADA</a><br>Copyright &copy; 1999-2025 Makoto Kamada<div></div></div></body></html>